# Task ID: 36
# Title: Dependency & Environment Setup for browser-use v0.3.2
# Status: pending
# Dependencies: 1
# Priority: high
# Description: Add/upgrade all required libraries, verify Python 3.11-3.13 compatibility, and bootstrap local dev/CI environments.
# Details:
1. Update pyproject.toml:
   - browser-use==0.3.2
   - redis>=5.2.0,<7.0.0
   - aiofiles>=24.1.0
   - opentelemetry-sdk~=1.25.0
   - pytest~=8.2.2, pytest-asyncio~=0.23.5, hypothesis~=6.100.0
   - uv~=0.1.38 (for lockfile management)
2. Execute:
   ```bash
   uv pip install -r pyproject.toml
   uv pip compile --upgrade
   uv venv .venv && source .venv/bin/activate
   ```
3. Add Playwright install step (headless chromium):
   `python -m playwright install chromium`
4. Verify imports with Python 3.11 & 3.13 using tox matrix.
5. Pin Docker image: `python:3.12-slim-bullseye` + system deps `libgbm-dev libnss3 libatk1.0-0`.
6. Add pre-commit hooks for isort, black, ruff, mypy.
7. Update CI (GitHub Actions) to cache Playwright browsers and run tox.
8. Document changes in CLAUDE.md.

# Test Strategy:
• Run `pytest -q` – ensure tests discover environment.
• `tox -e py311,py313` passes.
• CI workflow completes <6 min.
• Validate import graph with `python - <<'PY' ; import browser_use, redis, aiofiles ; PY`.

# Subtasks:
## 1. Update and Pin Project Dependencies [pending]
### Dependencies: None
### Description: Update pyproject.toml to specify browser-use v0.3.2 and required library versions, ensuring all dependencies are compatible with Python 3.11–3.13.
### Details:
Edit pyproject.toml to include browser-use==0.3.2, redis>=5.2.0,<7.0.0, aiofiles>=24.1.0, opentelemetry-sdk~=1.25.0, pytest~=8.2.2, pytest-asyncio~=0.23.5, hypothesis~=6.100.0, and uv~=0.1.38. Use 'uv pip install' and 'uv pip compile --upgrade' to install and lock dependencies.

## 2. Bootstrap Local Development and CI Environments [pending]
### Dependencies: 36.1
### Description: Set up local virtual environment, install Playwright Chromium, and configure Docker image and system dependencies for consistent development and CI.
### Details:
Create and activate a virtual environment using 'uv venv .venv'. Install Playwright Chromium with 'python -m playwright install chromium'. Pin Docker image to python:3.12-slim-bullseye and add system dependencies (libgbm-dev, libnss3, libatk1.0-0).

## 3. Verify Python 3.11–3.13 Compatibility and Add Pre-commit Hooks [pending]
### Dependencies: 36.2
### Description: Test the project across Python 3.11, 3.12, and 3.13 using tox, and set up pre-commit hooks for code quality tools.
### Details:
Configure tox to run tests in a matrix for Python 3.11, 3.12, and 3.13. Add pre-commit hooks for isort, black, ruff, and mypy to enforce code style and static analysis.

## 4. Update CI Pipeline and Documentation [pending]
### Dependencies: 36.3
### Description: Enhance GitHub Actions to cache Playwright browsers, run tox, and document all setup and changes in CLAUDE.md.
### Details:
Modify CI workflows to cache Playwright browsers and execute tox for all supported Python versions. Update CLAUDE.md with dependency, environment, and CI changes.


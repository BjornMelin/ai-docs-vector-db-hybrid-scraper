examples/enhanced_security_config_demo.py:436:21: G003 Logging statement uses `+`
    |
434 |         demo_data_classification()
435 |
436 |         logger.info("\n" + "=" * 60)
    |                     ^^^^^^^^^^^^^^^ G003
437 |         logger.info("All demonstrations completed successfully!")
438 |         logger.info("Enhanced security configuration management provides:")
    |

examples/parallel_processing_usage.py:268:22: RUF001 String contains ambiguous `ℹ` (INFORMATION SOURCE). Did you mean `i` (LATIN SMALL LETTER I)?
    |
266 |             logger.info(f"   • {opt}")  # TODO: Convert f-string to logging format
267 |     else:
268 |         logger.info("ℹ️  No optimizations needed - system is already optimal")
    |                      ^ RUF001
269 |
270 |     logger.info(
    |

examples/security_config_demo.py:473:21: G003 Logging statement uses `+`
    |
471 |         demo_data_classification()
472 |
473 |         logger.info("\n" + "=" * 60)
    |                     ^^^^^^^^^^^^^^^ G003
474 |         logger.info("All demonstrations completed successfully!")
475 |         logger.info("Enhanced security configuration management provides:")
    |

src/architecture/service_factory.py:335:12: PLW0603 Using the global statement to update `_service_factory` is discouraged
    |
333 | def get_service_factory() -> ModeAwareServiceFactory:
334 |     """Get the global service factory instance."""
335 |     global _service_factory
    |            ^^^^^^^^^^^^^^^^ PLW0603
336 |     if _service_factory is None:
337 |         _service_factory = ModeAwareServiceFactory()
    |

src/architecture/service_factory.py:343:12: PLW0603 Using the global statement to update `_service_factory` is discouraged
    |
341 | def reset_service_factory() -> None:
342 |     """Reset the global service factory instance."""
343 |     global _service_factory
    |            ^^^^^^^^^^^^^^^^ PLW0603
344 |     _service_factory = None
    |

src/automation/config_automation.py:357:12: PLW0603 Using the global statement to update `_config_manager` is discouraged
    |
355 | async def get_auto_config() -> ZeroMaintenanceConfig:
356 |     """Get the global auto-managed configuration instance."""
357 |     global _config_manager
    |            ^^^^^^^^^^^^^^^ PLW0603
358 |
359 |     if _config_manager is None:
    |

src/automation/config_automation.py:370:12: PLW0603 Using the global statement to update `_config_manager` is discouraged
    |
368 | async def start_config_automation():
369 |     """Start the configuration automation system."""
370 |     global _config_manager
    |            ^^^^^^^^^^^^^^^ PLW0603
371 |
372 |     if _config_manager is None:
    |

src/automation/config_automation.py:378:5: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
376 |     # Start drift healing
377 |     drift_healer = ConfigDriftHealer(_config_manager)
378 |     asyncio.create_task(drift_healer.start_monitoring())
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
379 |
380 |     logger.info("Configuration automation system started")
    |

src/automation/infrastructure_automation.py:230:13: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
228 |             logger.exception("Failed to initialize database")
229 |             # Start background recovery
230 |             asyncio.create_task(self._background_recovery())
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
231 |
232 |     async def _create_engine_with_retry(self) -> AsyncEngine:
    |

src/automation/infrastructure_automation.py:322:13: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
320 |             logger.exception("Database recovery failed")
321 |             # Schedule retry
322 |             asyncio.create_task(self._delayed_recovery())
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
323 |
324 |     async def _delayed_recovery(self):
    |

src/automation/infrastructure_automation.py:511:9: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
509 |         # Initialize auto-scaling
510 |         self.scaling_manager = AutoScalingManager()
511 |         asyncio.create_task(self.scaling_manager.start_monitoring())
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
512 |
513 |         logger.info("Self-healing infrastructure initialized")
    |

src/automation/infrastructure_automation.py:555:12: PLW0603 Using the global statement to update `_self_healing_manager` is discouraged
    |
553 | async def get_self_healing_manager() -> SelfHealingManager:
554 |     """Get the global self-healing manager instance."""
555 |     global _self_healing_manager
    |            ^^^^^^^^^^^^^^^^^^^^^ PLW0603
556 |
557 |     if _self_healing_manager is None:
    |

src/automation/self_healing/auto_remediation_engine.py:827:23: DTZ003 `datetime.datetime.utcnow()` used
    |
825 |         checkpoint = SystemCheckpoint(
826 |             checkpoint_id=checkpoint_id,
827 |             timestamp=datetime.utcnow(),
    |                       ^^^^^^^^^^^^^^^^^ DTZ003
828 |             configuration_state=await self._capture_configuration_state(),
829 |             service_states=await self._capture_service_states(),
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/auto_remediation_engine.py:872:26: DTZ003 `datetime.datetime.utcnow()` used
    |
870 |         # In a real implementation, this would capture actual configuration
871 |         return {
872 |             "timestamp": datetime.utcnow().isoformat(),
    |                          ^^^^^^^^^^^^^^^^^ DTZ003
873 |             "configuration_version": "1.0.0",
874 |             "environment_variables": dict(os.environ) if hasattr(self, "os") else {},
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/auto_remediation_engine.py:903:26: DTZ003 `datetime.datetime.utcnow()` used
    |
901 |             if hasattr(psutil, "net_io_counters")
902 |             else {},
903 |             "timestamp": datetime.utcnow().isoformat(),
    |                          ^^^^^^^^^^^^^^^^^ DTZ003
904 |         }
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/auto_remediation_engine.py:909:30: DTZ003 `datetime.datetime.utcnow()` used
    |
907 |         """Capture current circuit breaker states."""
908 |         # In a real implementation, this would capture actual circuit breaker states
909 |         return {"timestamp": datetime.utcnow().isoformat(), "breakers": {}}
    |                              ^^^^^^^^^^^^^^^^^ DTZ003
910 |
911 |     def _get_database_connections(self) -> int:
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/auto_remediation_engine.py:1170:17: DTZ003 `datetime.datetime.utcnow()` used
     |
1168 |             r
1169 |             for r in self.remediation_history
1170 |             if (datetime.utcnow() - datetime.utcnow()).total_seconds()
     |                 ^^^^^^^^^^^^^^^^^ DTZ003
1171 |             < 3600  # Last hour
1172 |         ]
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/auto_remediation_engine.py:1170:37: DTZ003 `datetime.datetime.utcnow()` used
     |
1168 |             r
1169 |             for r in self.remediation_history
1170 |             if (datetime.utcnow() - datetime.utcnow()).total_seconds()
     |                                     ^^^^^^^^^^^^^^^^^ DTZ003
1171 |             < 3600  # Last hour
1172 |         ]
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/autonomous_health_monitor.py:707:27: DTZ003 `datetime.datetime.utcnow()` used
    |
706 |             return SystemMetrics(
707 |                 timestamp=datetime.utcnow(),
    |                           ^^^^^^^^^^^^^^^^^ DTZ003
708 |                 cpu_percent=cpu_percent,
709 |                 memory_percent=memory.percent,
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/autonomous_health_monitor.py:730:27: DTZ003 `datetime.datetime.utcnow()` used
    |
728 |             # Return minimal metrics on failure
729 |             return SystemMetrics(
730 |                 timestamp=datetime.utcnow(),
    |                           ^^^^^^^^^^^^^^^^^ DTZ003
731 |                 cpu_percent=0.0,
732 |                 memory_percent=0.0,
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/autonomous_health_monitor.py:782:34: DTZ003 `datetime.datetime.utcnow()` used
    |
780 |             self.remediation_history.append(
781 |                 {
782 |                     "timestamp": datetime.utcnow(),
    |                                  ^^^^^^^^^^^^^^^^^ DTZ003
783 |                     "type": "current_issues",
784 |                     "issues": issues_detected,
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/autonomous_health_monitor.py:830:30: DTZ003 `datetime.datetime.utcnow()` used
    |
828 |         self.remediation_history.append(
829 |             {
830 |                 "timestamp": datetime.utcnow(),
    |                              ^^^^^^^^^^^^^^^^^ DTZ003
831 |                 "type": "prediction",
832 |                 "prediction": prediction,
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/autonomous_health_monitor.py:1094:25: DTZ003 `datetime.datetime.utcnow()` used
     |
1092 |                     p
1093 |                     for p in self.prediction_history
1094 |                     if (datetime.utcnow() - datetime.utcnow()).total_seconds() < 3600
     |                         ^^^^^^^^^^^^^^^^^ DTZ003
1095 |                 ]
1096 |             ),
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/autonomous_health_monitor.py:1094:45: DTZ003 `datetime.datetime.utcnow()` used
     |
1092 |                     p
1093 |                     for p in self.prediction_history
1094 |                     if (datetime.utcnow() - datetime.utcnow()).total_seconds() < 3600
     |                                             ^^^^^^^^^^^^^^^^^ DTZ003
1095 |                 ]
1096 |             ),
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/autonomous_health_monitor.py:1103:26: DTZ003 `datetime.datetime.utcnow()` used
     |
1101 |                     if p.risk_level
1102 |                     in [FailureRiskLevel.HIGH, FailureRiskLevel.CRITICAL]
1103 |                     and (datetime.utcnow() - datetime.utcnow()).total_seconds() < 3600
     |                          ^^^^^^^^^^^^^^^^^ DTZ003
1104 |                 ]
1105 |             ),
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/autonomous_health_monitor.py:1103:46: DTZ003 `datetime.datetime.utcnow()` used
     |
1101 |                     if p.risk_level
1102 |                     in [FailureRiskLevel.HIGH, FailureRiskLevel.CRITICAL]
1103 |                     and (datetime.utcnow() - datetime.utcnow()).total_seconds() < 3600
     |                                              ^^^^^^^^^^^^^^^^^ DTZ003
1104 |                 ]
1105 |             ),
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/intelligent_chaos_orchestrator.py:148:24: DTZ003 `datetime.datetime.utcnow()` used
    |
146 |         """Identify system weaknesses based on current metrics and patterns."""
147 |         weaknesses = []
148 |         current_time = datetime.utcnow()
    |                        ^^^^^^^^^^^^^^^^^ DTZ003
149 |
150 |         # Analyze different types of weaknesses
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/intelligent_chaos_orchestrator.py:789:21: DTZ003 `datetime.datetime.utcnow()` used
    |
787 |                 learning
788 |                 for learning in self.learning_database[learning_key]
789 |                 if (datetime.utcnow() - learning.learning_timestamp).days < 7
    |                     ^^^^^^^^^^^^^^^^^ DTZ003
790 |             ]
791 |             if recent_learnings:
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/intelligent_chaos_orchestrator.py:1151:24: DTZ003 `datetime.datetime.utcnow()` used
     |
1149 |     async def assess_system_resilience(self) -> ResilienceAssessment:
1150 |         """Assess current system resilience and identify weaknesses."""
1151 |         current_time = datetime.utcnow()
     |                        ^^^^^^^^^^^^^^^^^ DTZ003
1152 |
1153 |         # Collect current system metrics
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/intelligent_chaos_orchestrator.py:1358:13: TRY300 Consider moving this statement to an `else` block
     |
1356 |             if len(self.experiment_history) > 500:
1357 |                 self.experiment_history = self.experiment_history[-500:]
1358 |             return chaos_result
     |             ^^^^^^^^^^^^^^^^^^^ TRY300
1359 |
1360 |         except Exception as e:
     |

src/automation/self_healing/intelligent_chaos_orchestrator.py:1391:40: DTZ003 `datetime.datetime.utcnow()` used
     |
1389 |                     ],
1390 |                     confidence_score=0.0,
1391 |                     learning_timestamp=datetime.utcnow(),
     |                                        ^^^^^^^^^^^^^^^^^ DTZ003
1392 |                 ),
1393 |                 resilience_impact=0.0,
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/intelligent_chaos_orchestrator.py:1723:32: DTZ003 `datetime.datetime.utcnow()` used
     |
1721 |                 + recovery_analysis.get("resilience_score", 0) / 2,
1722 |             ),
1723 |             learning_timestamp=datetime.utcnow(),
     |                                ^^^^^^^^^^^^^^^^^ DTZ003
1724 |         )
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/intelligent_chaos_orchestrator.py:1841:42: DTZ003 `datetime.datetime.utcnow()` used
     |
1839 |                                 "total_recovery_time", 0
1840 |                             ),
1841 |                             "timestamp": datetime.utcnow(),
     |                                          ^^^^^^^^^^^^^^^^^ DTZ003
1842 |                         }
1843 |                     )
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/predictive_maintenance.py:730:21: DTZ003 `datetime.datetime.utcnow()` used
    |
728 |     async def update_time_series_data(self, metrics: SystemMetrics):
729 |         """Update time series data with current metrics."""
730 |         timestamp = datetime.utcnow()
    |                     ^^^^^^^^^^^^^^^^^ DTZ003
731 |
732 |         # Add system-level metrics
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/predictive_maintenance.py:761:21: DTZ003 `datetime.datetime.utcnow()` used
    |
759 |     ) -> list[AnomalyDetection]:
760 |         """Detect anomalies in current metrics."""
761 |         timestamp = datetime.utcnow()
    |                     ^^^^^^^^^^^^^^^^^ DTZ003
762 |         anomalies = []
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/predictive_maintenance.py:835:24: DTZ003 `datetime.datetime.utcnow()` used
    |
833 |         anomalies."""
834 |         recommendations = []
835 |         current_time = datetime.utcnow()
    |                        ^^^^^^^^^^^^^^^^^ DTZ003
836 |
837 |         # Generate recommendations based on health assessments
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/predictive_maintenance.py:938:17: DTZ003 `datetime.datetime.utcnow()` used
    |
936 |             for rec in self.pending_recommendations
937 |             if rec.urgency in [MaintenanceUrgency.CRITICAL, MaintenanceUrgency.HIGH]
938 |             and datetime.utcnow() >= rec.optimal_execution_window[0]
    |                 ^^^^^^^^^^^^^^^^^ DTZ003
939 |         ]
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/predictive_maintenance.py:964:24: DTZ003 `datetime.datetime.utcnow()` used
    |
962 |             recommendation=recommendation,
963 |             status="starting",
964 |             start_time=datetime.utcnow(),
    |                        ^^^^^^^^^^^^^^^^^ DTZ003
965 |         )
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/predictive_maintenance.py:993:34: DTZ003 `datetime.datetime.utcnow()` used
    |
991 |             execution.success = success
992 |             execution.status = "completed" if success else "failed"
993 |             execution.end_time = datetime.utcnow()
    |                                  ^^^^^^^^^^^^^^^^^ DTZ003
994 |
995 |             # Capture metrics after maintenance
    |
    = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/predictive_maintenance.py:1010:13: TRY300 Consider moving this statement to an `else` block
     |
1008 |                 f"Success: {success}"
1009 |             )
1010 |             return execution
     |             ^^^^^^^^^^^^^^^^ TRY300
1011 |
1012 |         except Exception as e:
     |

src/automation/self_healing/predictive_maintenance.py:1016:34: DTZ003 `datetime.datetime.utcnow()` used
     |
1014 |             execution.status = "failed"
1015 |             execution.success = False
1016 |             execution.end_time = datetime.utcnow()
     |                                  ^^^^^^^^^^^^^^^^^ DTZ003
1017 |             execution.notes = f"Execution failed: {e!s}"
1018 |             return execution
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/automation/self_healing/predictive_maintenance.py:1057:28: DTZ003 `datetime.datetime.utcnow()` used
     |
1055 |             affected_components=[recommendation.component],
1056 |             metrics_snapshot={},
1057 |             detection_time=datetime.utcnow(),
     |                            ^^^^^^^^^^^^^^^^^ DTZ003
1058 |             contributing_factors=["Predictive maintenance detected anomaly"],
1059 |             business_impact_score=0.5,
     |
     = help: Use `datetime.datetime.now(tz=...)` instead

src/chunking.py:28:26: PGH003 Use specific rule codes when ignoring type issues
   |
26 |     except ImportError:
27 |         PYTHON_AVAILABLE = False
28 |         tspython = None  # type: ignore
   |                          ^^^^^^^^^^^^^^ PGH003
29 |
30 |     try:
   |

src/chunking.py:36:30: PGH003 Use specific rule codes when ignoring type issues
   |
34 |     except ImportError:
35 |         JAVASCRIPT_AVAILABLE = False
36 |         tsjavascript = None  # type: ignore
   |                              ^^^^^^^^^^^^^^ PGH003
37 |
38 |     try:
   |

src/chunking.py:44:30: PGH003 Use specific rule codes when ignoring type issues
   |
42 |     except ImportError:
43 |         TYPESCRIPT_AVAILABLE = False
44 |         tstypescript = None  # type: ignore
   |                              ^^^^^^^^^^^^^^ PGH003
45 |
46 | except ImportError:
   |

src/chunking.py:48:20: PGH003 Use specific rule codes when ignoring type issues
   |
46 | except ImportError:
47 |     TREE_SITTER_AVAILABLE = False
48 |     Parser = None  # type: ignore
   |                    ^^^^^^^^^^^^^^ PGH003
49 |     Node = None  # type: ignore
50 |     PYTHON_AVAILABLE = False
   |

src/chunking.py:49:18: PGH003 Use specific rule codes when ignoring type issues
   |
47 |     TREE_SITTER_AVAILABLE = False
48 |     Parser = None  # type: ignore
49 |     Node = None  # type: ignore
   |                  ^^^^^^^^^^^^^^ PGH003
50 |     PYTHON_AVAILABLE = False
51 |     JAVASCRIPT_AVAILABLE = False
   |

src/chunking.py:53:22: PGH003 Use specific rule codes when ignoring type issues
   |
51 |     JAVASCRIPT_AVAILABLE = False
52 |     TYPESCRIPT_AVAILABLE = False
53 |     tspython = None  # type: ignore
   |                      ^^^^^^^^^^^^^^ PGH003
54 |     tsjavascript = None  # type: ignore
55 |     tstypescript = None  # type: ignore
   |

src/chunking.py:54:26: PGH003 Use specific rule codes when ignoring type issues
   |
52 |     TYPESCRIPT_AVAILABLE = False
53 |     tspython = None  # type: ignore
54 |     tsjavascript = None  # type: ignore
   |                          ^^^^^^^^^^^^^^ PGH003
55 |     tstypescript = None  # type: ignore
   |

src/chunking.py:55:26: PGH003 Use specific rule codes when ignoring type issues
   |
53 |     tspython = None  # type: ignore
54 |     tsjavascript = None  # type: ignore
55 |     tstypescript = None  # type: ignore
   |                          ^^^^^^^^^^^^^^ PGH003
   |

src/chunking.py:271:64: PGH003 Use specific rule codes when ignoring type issues
    |
269 |         for lang in languages:
270 |             lang_counts[lang] = lang_counts.get(lang, 0) + 1
271 |         detected_lang = max(lang_counts, key=lang_counts.get)  # type: ignore
    |                                                                ^^^^^^^^^^^^^^ PGH003
272 |
273 |         lang_map = {
    |

src/cli/commands/setup.py:240:9: F811 Redefinition of unused `customize_template` from line 147
    |
238 |         return self._customize_performance(template_data)
239 |
240 |     def customize_template(self, template_data: dict[str, Any]) -> dict[str, Any]:
    |         ^^^^^^^^^^^^^^^^^^ F811
241 |         """Customize template settings (public method for testing)."""
242 |         return self._customize_template(template_data)
    |
    = help: Remove definition: `customize_template`

src/config/__init__.py:264:35: ARG002 Unused method argument: `trigger`
    |
262 |     """Mock config manager for backward compatibility."""
263 |
264 |     async def reload_config(self, trigger=None, config_source=None, force=False):
    |                                   ^^^^^^^ ARG002
265 |         """Mock reload config method."""
266 |         return ReloadOperation()
    |

src/config/__init__.py:264:49: ARG002 Unused method argument: `config_source`
    |
262 |     """Mock config manager for backward compatibility."""
263 |
264 |     async def reload_config(self, trigger=None, config_source=None, force=False):
    |                                                 ^^^^^^^^^^^^^ ARG002
265 |         """Mock reload config method."""
266 |         return ReloadOperation()
    |

src/config/__init__.py:264:69: ARG002 Unused method argument: `force`
    |
262 |     """Mock config manager for backward compatibility."""
263 |
264 |     async def reload_config(self, trigger=None, config_source=None, force=False):
    |                                                                     ^^^^^ ARG002
265 |         """Mock reload config method."""
266 |         return ReloadOperation()
    |

src/config/__init__.py:268:37: ARG002 Unused method argument: `target_hash`
    |
266 |         return ReloadOperation()
267 |
268 |     async def rollback_config(self, target_hash=None):
    |                                     ^^^^^^^^^^^ ARG002
269 |         """Mock rollback config method."""
270 |         return ReloadOperation()
    |

src/config/__init__.py:272:34: ARG002 Unused method argument: `limit`
    |
270 |         return ReloadOperation()
271 |
272 |     def get_reload_history(self, limit=20):
    |                                  ^^^^^ ARG002
273 |         """Mock get reload history method."""
274 |         return []
    |

src/config/__init__.py:298:34: ARG002 Unused method argument: `limit`
    |
296 |         return "default"
297 |
298 |     def get_config_backups(self, limit=10):
    |                                  ^^^^^ ARG002
299 |         """Mock get config backups method."""
300 |         return []
    |

src/config/__init__.py:359:35: ARG002 Unused method argument: `trigger`
    |
357 |     """Mock config reloader for backward compatibility."""
358 |
359 |     async def reload_config(self, trigger=None, config_source=None, force=False):
    |                                   ^^^^^^^ ARG002
360 |         """Mock reload config method."""
361 |         return ReloadOperation()
    |

src/config/__init__.py:359:49: ARG002 Unused method argument: `config_source`
    |
357 |     """Mock config reloader for backward compatibility."""
358 |
359 |     async def reload_config(self, trigger=None, config_source=None, force=False):
    |                                                 ^^^^^^^^^^^^^ ARG002
360 |         """Mock reload config method."""
361 |         return ReloadOperation()
    |

src/config/__init__.py:359:69: ARG002 Unused method argument: `force`
    |
357 |     """Mock config reloader for backward compatibility."""
358 |
359 |     async def reload_config(self, trigger=None, config_source=None, force=False):
    |                                                                     ^^^^^ ARG002
360 |         """Mock reload config method."""
361 |         return ReloadOperation()
    |

src/config/__init__.py:363:37: ARG002 Unused method argument: `target_hash`
    |
361 |         return ReloadOperation()
362 |
363 |     async def rollback_config(self, target_hash=None):
    |                                     ^^^^^^^^^^^ ARG002
364 |         """Mock rollback config method."""
365 |         return ReloadOperation()
    |

src/config/__init__.py:367:34: ARG002 Unused method argument: `limit`
    |
365 |         return ReloadOperation()
366 |
367 |     def get_reload_history(self, limit=20):
    |                                  ^^^^^ ARG002
368 |         """Mock get reload history method."""
369 |         return []
    |

src/config/__init__.py:403:7: F811 Redefinition of unused `ReloadOperation` from line 343
    |
403 | class ReloadOperation:
    |       ^^^^^^^^^^^^^^^ F811
404 |     """Mock reload operation for backward compatibility."""
    |
    = help: Remove definition: `ReloadOperation`

src/config/__init__.py:414:7: F811 Redefinition of unused `ConfigDriftDetector` from line 20
    |
414 | class ConfigDriftDetector:
    |       ^^^^^^^^^^^^^^^^^^^ F811
415 |     """Mock config drift detector for backward compatibility."""
    |
    = help: Remove definition: `ConfigDriftDetector`

src/config/__init__.py:418:7: F811 Redefinition of unused `ConfigSnapshot` from line 21
    |
418 | class ConfigSnapshot:
    |       ^^^^^^^^^^^^^^ F811
419 |     """Mock config snapshot for backward compatibility."""
    |
    = help: Remove definition: `ConfigSnapshot`

src/config/__init__.py:422:7: F811 Redefinition of unused `DriftEvent` from line 22
    |
422 | class DriftEvent:
    |       ^^^^^^^^^^ F811
423 |     """Mock drift event for backward compatibility."""
    |
    = help: Remove definition: `DriftEvent`

src/config/__init__.py:426:7: F811 Redefinition of unused `DriftSeverity` from line 23
    |
426 | class DriftSeverity:
    |       ^^^^^^^^^^^^^ F811
427 |     """Mock drift severity for backward compatibility."""
    |
    = help: Remove definition: `DriftSeverity`

src/config/__init__.py:435:7: F811 Redefinition of unused `DriftType` from line 24
    |
435 | class DriftType:
    |       ^^^^^^^^^ F811
436 |     """Mock drift type for backward compatibility."""
    |
    = help: Remove definition: `DriftType`

src/config/__init__.py:506:11: RUF022 `__all__` is not sorted
    |
505 |   # Update __all__ to include everything for full backward compatibility
506 |   __all__ = [
    |  ___________^
507 | |     # Enums
508 | |     "ABTestVariant",
509 | |     "ApplicationMode",
510 | |     # Auto-detection classes
511 | |     "AutoDetectedServices",
512 | |     "AutoDetectionConfig",
513 | |     "BrowserUseConfig",
514 | |     "CacheConfig",
515 | |     "CacheType",
516 | |     "ChunkingConfig",
517 | |     "ChunkingStrategy",
518 | |     "CircuitBreakerConfig",
519 | |     "Config",
520 | |     "ConfigDriftDetector",
521 | |     "ConfigError",
522 | |     "ConfigFileWatchError",
523 | |     "ConfigLoadError",
524 | |     "ConfigManager",
525 | |     "ConfigMigrator",
526 | |     "ConfigReloadError",
527 | |     "ConfigReloader",
528 | |     "ConfigSnapshot",
529 | |     "ConfigValidationError",
530 | |     "Crawl4AIConfig",
531 | |     "CrawlProvider",
532 | |     "DatabaseConfig",
533 | |     "DeploymentConfig",
534 | |     "DeploymentTier",
535 | |     "DetectedEnvironment",
536 | |     "DetectedService",
537 | |     "DocumentStatus",
538 | |     "DocumentationSite",
539 | |     "DriftDetectionConfig",
540 | |     "DriftEvent",
541 | |     "DriftSeverity",
542 | |     "DriftType",
543 | |     "EmbeddingConfig",
544 | |     "EmbeddingModel",
545 | |     "EmbeddingProvider",
546 | |     "Environment",
547 | |     "EnvironmentDetector",
548 | |     "ErrorContext",
549 | |     "FastEmbedConfig",
550 | |     "FirecrawlConfig",
551 | |     "FusionAlgorithm",
552 | |     "GracefulDegradationHandler",
553 | |     "HyDEConfig",
554 | |     "LegacyCacheConfig",
555 | |     "LegacyChunkingConfig",
556 | |     "LegacyConfig",
557 | |     "LegacyFirecrawlConfig",
558 | |     "LegacyHyDEConfig",
559 | |     "LegacyOpenAIConfig",
560 | |     "LegacyPerformanceConfig",
561 | |     "LegacyQdrantConfig",
562 | |     "LegacySecurityConfig",
563 | |     "LogLevel",
564 | |     "ModelType",
565 | |     "ModernCacheConfig",
566 | |     "ModernChunkingConfig",
567 | |     "ModernConfig",
568 | |     "ModernFirecrawlConfig",
569 | |     "ModernHyDEConfig",
570 | |     "ModernOpenAIConfig",
571 | |     "ModernPerformanceConfig",
572 | |     "ModernQdrantConfig",
573 | |     "ModernSecurityConfig",
574 | |     "MonitoringConfig",
575 | |     "ObservabilityConfig",
576 | |     "OpenAIConfig",
577 | |     "OptimizationStrategy",
578 | |     "PerformanceConfig",
579 | |     "PlaywrightConfig",
580 | |     "QdrantConfig",
581 | |     "QueryComplexity",
582 | |     "QueryType",
583 | |     "RAGConfig",
584 | |     "ReRankingConfig",
585 | |     "ReloadOperation",
586 | |     "ReloadStatus",
587 | |     "ReloadTrigger",
588 | |     "RetryableConfigOperation",
589 | |     "SQLAlchemyConfig",
590 | |     "SafeConfigLoader",
591 | |     "SearchAccuracy",
592 | |     "SearchStrategy",
593 | |     "SecurityConfig",
594 | |     # Main configuration class
595 | |     "Settings",
596 | |     "TaskQueueConfig",
597 | |     # Mock classes for compatibility
598 | |     "TierCapability",
599 | |     "TierConfiguration",
600 | |     "TierManager",
601 | |     # Legacy compatibility
602 | |     "UnifiedConfig",
603 | |     "VectorType",
604 | |     "async_error_context",
605 | |     "create_and_load_config_async",
606 | |     "create_enterprise_config",
607 | |     "create_migration_compatibility_wrapper",
608 | |     "create_settings_from_env",
609 | |     # Mode-specific factories
610 | |     "create_simple_config",
611 | |     # Mock functions for compatibility
612 | |     "default_tier_manager",
613 | |     "get_cache_config",
614 | |     "get_config",
615 | |     "get_drift_detector",
616 | |     "get_drift_summary",
617 | |     "get_config_manager",
618 | |     "get_config_reloader",
619 | |     "get_config_with_auto_detection",
620 | |     "get_current_tier_config",
621 | |     "get_degradation_handler",
622 | |     "get_embedding_config",
623 | |     # Legacy functions
624 | |     "get_legacy_config",
625 | |     "get_legacy_config_with_auto_detection",
626 | |     "get_migration_status",
627 | |     "get_modern_config",
628 | |     "get_modern_config_with_auto_detection",
629 | |     "get_openai_config",
630 | |     "get_performance_config",
631 | |     # Convenience functions
632 | |     "get_qdrant_config",
633 | |     "get_security_config",
634 | |     # Configuration management
635 | |     "get_settings",
636 | |     "handle_validation_error",
637 | |     "initialize_drift_detector",
638 | |     "is_feature_enabled",
639 | |     "is_using_modern_config",
640 | |     "migrate_legacy_config",
641 | |     "migrate_to_modern_config",
642 | |     "reset_config",
643 | |     "reset_legacy_config",
644 | |     "reset_modern_config",
645 | |     "reset_settings",
646 | |     "retry_config_operation",
647 | |     "run_drift_detection",
648 | |     "set_config",
649 | |     "set_config_manager",
650 | |     "set_legacy_config",
651 | |     "set_modern_config",
652 | |     "set_settings",
653 | |     "settings",
654 | | ]
    | |_^ RUF022
    |
    = help: Apply an isort-style sorting to `__all__`

src/infrastructure/clients/redis_client.py:11:11: N801 Class name `redis` should use CapWords convention
   |
 9 | except ImportError:
10 |     # Create a placeholder if redis is not available
11 |     class redis:
   |           ^^^^^ N801
12 |         class Redis:
13 |             pass
   |

src/infrastructure/container.py:113:31: ASYNC109 Async function definition with a `timeout` parameter
    |
113 | async def _create_http_client(timeout: float = 30.0) -> AsyncGenerator[Any]:
    |                               ^^^^^^^^^^^^^^^^^^^^^ ASYNC109
114 |     """Create HTTP client with proper lifecycle management.
    |
    = help: Use `asyncio.timeout` instead

src/mcp_tools/tools/agentic_rag.py:186:20: SLF001 Private member accessed: `_initialized`
    |
184 |             # Initialize query orchestrator
185 |             orchestrator = QueryOrchestrator()
186 |             if not orchestrator._initialized:
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
187 |                 await orchestrator.initialize(deps)
    |

src/mcp_tools/tools/configuration.py:1068:9: TRY300 Consider moving this statement to an `else` block
     |
1066 |               await ctx.debug(f"Saved current configuration as profile: {profile_name}")
1067 |
1068 | /         return {
1069 | |             "success": True,
1070 | |             "profile": saved_profile,
1071 | |             "action": "save",
1072 | |         }
     | |_________^ TRY300
1073 |
1074 |       except Exception as e:
     |

src/mcp_tools/tools/configuration.py:1149:9: TRY300 Consider moving this statement to an `else` block
     |
1147 |               await ctx.debug(f"Optimized configuration profile: {profile_name}")
1148 |
1149 | /         return {
1150 | |             "success": True,
1151 | |             "optimization_result": optimization_result,
1152 | |             "profile_name": profile_name,
1153 | |             "action": "optimize",
1154 | |         }
     | |_________^ TRY300
1155 |
1156 |       except Exception as e:
     |

src/mcp_tools/tools/configuration.py:1199:9: TRY300 Consider moving this statement to an `else` block
     |
1197 |               await ctx.debug(f"Compared configuration profiles with: {profile_name}")
1198 |
1199 | /         return {
1200 | |             "success": True,
1201 | |             "comparison_result": comparison_result,
1202 | |             "action": "compare",
1203 | |         }
     | |_________^ TRY300
1204 |
1205 |       except Exception as e:
     |

src/mcp_tools/tools/content_intelligence.py:171:13: TRY300 Consider moving this statement to an `else` block
    |
169 |             )
170 |
171 |             return result
    |             ^^^^^^^^^^^^^ TRY300
172 |
173 |         except (asyncio.CancelledError, TimeoutError, RuntimeError) as e:
    |

src/mcp_tools/tools/content_intelligence.py:233:13: TRY300 Consider moving this statement to an `else` block
    |
231 |             )
232 |
233 |             return result
    |             ^^^^^^^^^^^^^ TRY300
234 |
235 |         except (asyncio.CancelledError, TimeoutError, RuntimeError) as e:
    |

src/mcp_tools/tools/content_intelligence.py:291:13: TRY300 Consider moving this statement to an `else` block
    |
289 |             )
290 |
291 |             return result
    |             ^^^^^^^^^^^^^ TRY300
292 |
293 |         except (asyncio.CancelledError, TimeoutError, RuntimeError) as e:
    |

src/mcp_tools/tools/content_intelligence.py:395:13: TRY300 Consider moving this statement to an `else` block
    |
393 |             )
394 |
395 |             return metrics
    |             ^^^^^^^^^^^^^^ TRY300
396 |
397 |         except (redis.RedisError, ConnectionError, TimeoutError, ValueError) as e:
    |

src/mcp_tools/tools/cost_estimation.py:120:13: TRY300 Consider moving this statement to an `else` block
    |
118 |                 )
119 |
120 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
121 |
122 |         except Exception as e:
    |

src/mcp_tools/tools/cost_estimation.py:220:13: TRY300 Consider moving this statement to an `else` block
    |
218 |                 )
219 |
220 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
221 |
222 |         except Exception as e:
    |

src/mcp_tools/tools/cost_estimation.py:322:13: TRY300 Consider moving this statement to an `else` block
    |
320 |                 )
321 |
322 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
323 |
324 |         except Exception as e:
    |

src/mcp_tools/tools/crawling.py:32:11: TRY003 Avoid specifying long messages outside the exception class
   |
30 | def _raise_invalid_url_format() -> None:
31 |     """Raise ValueError for invalid URL format."""
32 |     raise ValueError("Invalid URL format")
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
   |

src/mcp_tools/tools/crawling.py:32:22: EM101 Exception must not use a string literal, assign to variable first
   |
30 | def _raise_invalid_url_format() -> None:
31 |     """Raise ValueError for invalid URL format."""
32 |     raise ValueError("Invalid URL format")
   |                      ^^^^^^^^^^^^^^^^^^^^ EM101
   |
   = help: Assign to variable; remove string literal

src/mcp_tools/tools/crawling.py:67:13: PLC0415 `import` should be at the top-level of a file
   |
65 |         try:
66 |             # Validate URL
67 |             import urllib.parse
   |             ^^^^^^^^^^^^^^^^^^^ PLC0415
68 |
69 |             parsed_url = urllib.parse.urlparse(url)
   |

src/mcp_tools/tools/crawling.py:110:13: TRY300 Consider moving this statement to an `else` block
    |
108 |                   )
109 |
110 | /             return {
111 | |                 "success": True,
112 | |                 "recommended_tier": recommended_tier,
113 | |                 "url_analysis": url_analysis,
114 | |                 "optimization_metadata": optimization_metadata,
115 | |                 "autonomous_features": {
116 | |                     "ml_powered_selection": True,
117 | |                     "performance_optimization": True,
118 | |                     "content_awareness": True,
119 | |                 },
120 | |             }
    | |_____________^ TRY300
121 |
122 |           except Exception as e:
    |

src/mcp_tools/tools/crawling.py:155:13: PLC0415 `import` should be at the top-level of a file
    |
153 |         try:
154 |             # Validate URL
155 |             import urllib.parse
    |             ^^^^^^^^^^^^^^^^^^^ PLC0415
156 |
157 |             parsed_url = urllib.parse.urlparse(url)
    |

src/mcp_tools/tools/crawling.py:226:13: TRY300 Consider moving this statement to an `else` block
    |
224 |                 )
225 |
226 |             return response
    |             ^^^^^^^^^^^^^^^ TRY300
227 |
228 |         except Exception as e:
    |

src/mcp_tools/tools/crawling.py:248:13: TRY300 Consider moving this statement to an `else` block
    |
246 |               _browser_manager = await client_manager.get_browser_manager()
247 |
248 | /             return {
249 | |                 "available_tiers": [
250 | |                     "lightweight",
251 | |                     "crawl4ai",
252 | |                     "playwright",
253 | |                     "firecrawl",
254 | |                     "browser_use",
255 | |                 ],
256 | |                 "tier_capabilities": {
257 | |                     "lightweight": {
258 | |                         "speed": "fastest",
259 | |                         "js_support": False,
260 | |                         "anti_detection": False,
261 | |                         "best_for": ["static_content", "simple_pages"],
262 | |                     },
263 | |                     "crawl4ai": {
264 | |                         "speed": "fast",
265 | |                         "js_support": True,
266 | |                         "anti_detection": "basic",
267 | |                         "best_for": ["dynamic_content", "spa_apps"],
268 | |                     },
269 | |                     "playwright": {
270 | |                         "speed": "medium",
271 | |                         "js_support": True,
272 | |                         "anti_detection": "advanced",
273 | |                         "best_for": ["complex_interactions", "forms"],
274 | |                     },
275 | |                     "firecrawl": {
276 | |                         "speed": "medium",
277 | |                         "js_support": True,
278 | |                         "anti_detection": "professional",
279 | |                         "best_for": ["protected_content", "enterprise_sites"],
280 | |                     },
281 | |                     "browser_use": {
282 | |                         "speed": "slow",
283 | |                         "js_support": True,
284 | |                         "anti_detection": "advanced",
285 | |                         "best_for": ["complex_workflows", "human_like_interaction"],
286 | |                     },
287 | |                 },
288 | |                 "autonomous_features": {
289 | |                     "intelligent_tier_selection": True,
290 | |                     "ml_powered_optimization": True,
291 | |                     "quality_assessment": True,
292 | |                     "content_enhancement": True,
293 | |                     "performance_prediction": True,
294 | |                 },
295 | |                 "i3_research_implementation": {
296 | |                     "tier_selection_ml": True,
297 | |                     "autonomous_processing": True,
298 | |                     "quality_metrics": True,
299 | |                     "performance_optimization": True,
300 | |                 },
301 | |                 "status": "active",
302 | |             }
    | |_____________^ TRY300
303 |
304 |           except Exception as e:
    |

src/mcp_tools/tools/document_management.py:225:13: TRY300 Consider moving this statement to an `else` block
    |
223 |                   )
224 |
225 | /             return {
226 | |                 "success": True,
227 | |                 "lifecycle_results": results,
228 | |                 "autonomous_policies_applied": True,
229 | |             }
    | |_____________^ TRY300
230 |
231 |           except Exception as e:
    |

src/mcp_tools/tools/document_management.py:331:13: TRY300 Consider moving this statement to an `else` block
    |
329 |                 )
330 |
331 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
332 |
333 |         except Exception as e:
    |

src/mcp_tools/tools/document_management.py:416:13: TRY300 Consider moving this statement to an `else` block
    |
414 |                   )
415 |
416 | /             return {
417 | |                 "success": True,
418 | |                 "analytics": analytics,
419 | |             }
    | |_____________^ TRY300
420 |
421 |           except Exception as e:
    |

src/mcp_tools/tools/embeddings.py:109:16: SLF001 Private member accessed: `_openai_available`
    |
108 |             # OpenAI provider
109 |             if embedding_manager._openai_available():
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
110 |                 providers.append(
111 |                     {
    |

src/mcp_tools/tools/filtering.py:144:13: TRY300 Consider moving this statement to an `else` block
    |
142 |                 )
143 |
144 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
145 |
146 |         except Exception as e:
    |

src/mcp_tools/tools/filtering.py:256:13: TRY300 Consider moving this statement to an `else` block
    |
254 |                 )
255 |
256 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
257 |
258 |         except Exception as e:
    |

src/mcp_tools/tools/filtering.py:371:13: TRY300 Consider moving this statement to an `else` block
    |
369 |                 )
370 |
371 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
372 |
373 |         except Exception as e:
    |

src/mcp_tools/tools/filtering.py:1265:17: PERF401 Use `list.extend` to create a transformed list
     |
1263 |         for field in required_fields:
1264 |             if field not in feedback:
1265 |                 validation_issues.append(f"Missing {field} in feedback {i}")
     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PERF401
1266 |
1267 |     return {
     |
     = help: Replace for loop with list.extend

src/mcp_tools/tools/filtering_tools.py:186:9: TRY300 Consider moving this statement to an `else` block
    |
184 |         )
185 |
186 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
187 |
188 |     except Exception as e:
    |

src/mcp_tools/tools/filtering_tools.py:244:9: TRY300 Consider moving this statement to an `else` block
    |
242 |         )
243 |
244 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
245 |
246 |     except Exception as e:
    |

src/mcp_tools/tools/filtering_tools.py:303:9: TRY300 Consider moving this statement to an `else` block
    |
301 |         )
302 |
303 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
304 |
305 |     except Exception as e:
    |

src/mcp_tools/tools/filtering_tools.py:363:9: TRY300 Consider moving this statement to an `else` block
    |
361 |         )
362 |
363 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
364 |
365 |     except Exception as e:
    |

src/mcp_tools/tools/filtering_tools.py:432:9: TRY300 Consider moving this statement to an `else` block
    |
430 |         )
431 |
432 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
433 |
434 |     except Exception as e:
    |

src/mcp_tools/tools/helpers/pipeline_factory.py:66:13: TRY300 Consider moving this statement to an `else` block
   |
64 |             await pipeline.initialize()
65 |
66 |             return pipeline
   |             ^^^^^^^^^^^^^^^ TRY300
67 |
68 |         except (AttributeError, ImportError, OSError):
   |

src/mcp_tools/tools/helpers/tool_registrars.py:122:13: TRY300 Consider moving this statement to an `else` block
    |
120 |             )
121 |
122 |             return mcp_response
    |             ^^^^^^^^^^^^^^^^^^^ TRY300
123 |
124 |         except Exception as e:
    |

src/mcp_tools/tools/helpers/tool_registrars.py:214:13: TRY300 Consider moving this statement to an `else` block
    |
212 |             )
213 |
214 |             return response
    |             ^^^^^^^^^^^^^^^ TRY300
215 |
216 |         except Exception as e:
    |

src/mcp_tools/tools/helpers/tool_registrars_additional.py:52:13: TRY300 Consider moving this statement to an `else` block
   |
50 |             )
51 |
52 |             return health_status
   |             ^^^^^^^^^^^^^^^^^^^^ TRY300
53 |
54 |         except Exception as e:
   |

src/mcp_tools/tools/helpers/tool_registrars_additional.py:86:13: TRY300 Consider moving this statement to an `else` block
   |
84 |             await ctx.info(f"Pipeline metrics collection {request_id} completed")
85 |
86 |             return metrics
   |             ^^^^^^^^^^^^^^ TRY300
87 |
88 |         except Exception as e:
   |

src/mcp_tools/tools/helpers/tool_registrars_additional.py:116:13: TRY300 Consider moving this statement to an `else` block
    |
114 |             await ctx.info(f"Pipeline warm-up {request_id} completed successfully")
115 |
116 |             return {"status": "success", "message": "Pipeline warmed up successfully"}
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
117 |
118 |         except (ConnectionError, TimeoutError, ValueError):
    |

src/mcp_tools/tools/hybrid_search.py:155:13: TRY300 Consider moving this statement to an `else` block
    |
153 |                 )
154 |
155 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
156 |
157 |         except Exception as e:
    |

src/mcp_tools/tools/hybrid_search.py:244:13: TRY300 Consider moving this statement to an `else` block
    |
242 |                 )
243 |
244 |             return search_result
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
245 |
246 |         except Exception as e:
    |

src/mcp_tools/tools/hybrid_search.py:359:13: TRY300 Consider moving this statement to an `else` block
    |
357 |                 )
358 |
359 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
360 |
361 |         except Exception as e:
    |

src/mcp_tools/tools/hybrid_search.py:456:9: TRY300 Consider moving this statement to an `else` block
    |
454 |                 )
455 |
456 |         return search_result or {"points": []}
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
457 |
458 |     except (OSError, FileNotFoundError, ValueError) as e:
    |

src/mcp_tools/tools/hybrid_search.py:555:9: B007 Loop control variable `doc_id` not used within loop body
    |
554 |     # Calculate DBSF scores
555 |     for doc_id, doc_data in combined.items():
    |         ^^^^^^ B007
556 |         dbsf_score = (
557 |             vector_weight * doc_data["vector_score"]
    |
    = help: Rename unused `doc_id` to `_doc_id`

src/mcp_tools/tools/hyde_search.py:193:13: TRY300 Consider moving this statement to an `else` block
    |
191 |                 )
192 |
193 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
194 |
195 |         except Exception as e:
    |

src/mcp_tools/tools/hyde_search.py:329:13: TRY300 Consider moving this statement to an `else` block
    |
327 |                 )
328 |
329 |             return best_result
    |             ^^^^^^^^^^^^^^^^^^ TRY300
330 |
331 |         except Exception as e:
    |

src/mcp_tools/tools/hyde_search.py:421:13: TRY300 Consider moving this statement to an `else` block
    |
419 |                 )
420 |
421 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
422 |
423 |         except Exception as e:
    |

src/mcp_tools/tools/hyde_search.py:660:30: PERF102 When using only the values of a dict use the `values()` method
    |
658 |     # Calculate fused scores
659 |     fused_results = []
660 |     for _doc_id, doc_data in document_scores.items():
    |                              ^^^^^^^^^^^^^^^^^^^^^ PERF102
661 |         # Use max score fusion (can be enhanced with other strategies)
662 |         fused_score = max(doc_data["scores"])
    |
    = help: Replace `.items()` with `.values()`

src/mcp_tools/tools/lightweight_scrape.py:58:9: TRY300 Consider moving this statement to an `else` block
   |
56 |                 "Consider using standard search or crawl tools for complex pages."
57 |             )
58 |         return can_handle
   |         ^^^^^^^^^^^^^^^^^ TRY300
59 |     except (AttributeError, ConnectionError, RuntimeError, TimeoutError):
60 |         return True  # Default to allowing the attempt
   |

src/mcp_tools/tools/lightweight_scrape.py:188:27: SLF001 Private member accessed: `_unified_browser_manager`
    |
187 |         # Analyze URL suitability for lightweight tier
188 |         unified_manager = crawl_manager._unified_browser_manager
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
189 |         can_handle = await _analyze_url_suitability(unified_manager, url, ctx)
    |

src/mcp_tools/tools/multi_stage_search.py:199:13: TRY300 Consider moving this statement to an `else` block
    |
197 |                 )
198 |
199 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
200 |
201 |         except Exception as e:
    |

src/mcp_tools/tools/multi_stage_search.py:285:13: TRY300 Consider moving this statement to an `else` block
    |
283 |                 )
284 |
285 |             return search_result
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
286 |
287 |         except Exception as e:
    |

src/mcp_tools/tools/multi_stage_search.py:429:13: TRY300 Consider moving this statement to an `else` block
    |
427 |                 )
428 |
429 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
430 |
431 |         except Exception as e:
    |

src/mcp_tools/tools/multi_stage_search.py:739:21: PERF401 Use `list.extend` to create a transformed list
    |
737 |             for word in title_words:
738 |                 if len(word) > 4 and word.isalpha():
739 |                     contextual_terms.append(word)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PERF401
740 |
741 |     # Use most common contextual term
    |
    = help: Replace for loop with list.extend

src/mcp_tools/tools/multi_stage_search.py:1075:29: PERF401 Use `list.extend` to create a transformed list
     |
1073 |                     for word in words:
1074 |                         if len(word) > 5 and word.isalpha():
1075 |                             context_terms.append(word)
     |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^ PERF401
1076 |
1077 |         # Find most relevant context terms
     |
     = help: Replace for loop with list.extend

src/mcp_tools/tools/projects.py:49:41: A002 Function argument `format` is shadowing a Python builtin
   |
47 |         raise ValueError(msg)
48 |
49 |     async def _raise_unsupported_format(format: str, ctx: Context = None) -> None:
   |                                         ^^^^^^ A002
50 |         """Raise ValueError for unsupported format."""
51 |         if ctx:
   |

src/mcp_tools/tools/projects.py:418:26: A002 Function argument `format` is shadowing a Python builtin
    |
416 |     @mcp.tool()
417 |     async def export_project(
418 |         project_id: str, format: str = "json", ctx: Context = None
    |                          ^^^^^^ A002
419 |     ) -> dict:
420 |         """Export project data in the specified format.
    |

src/mcp_tools/tools/query_processing_tools.py:169:9: TRY300 Consider moving this statement to an `else` block
    |
167 |         )
168 |
169 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
170 |
171 |     except Exception as e:
    |

src/mcp_tools/tools/query_processing_tools.py:222:9: TRY300 Consider moving this statement to an `else` block
    |
220 |         )
221 |
222 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
223 |
224 |     except Exception as e:
    |

src/mcp_tools/tools/query_processing_tools.py:275:9: TRY300 Consider moving this statement to an `else` block
    |
273 |         )
274 |
275 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
276 |
277 |     except Exception as e:
    |

src/mcp_tools/tools/query_processing_tools.py:331:9: TRY300 Consider moving this statement to an `else` block
    |
329 |         )
330 |
331 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
332 |
333 |     except Exception as e:
    |

src/mcp_tools/tools/query_processing_tools.py:389:9: TRY300 Consider moving this statement to an `else` block
    |
387 |         )
388 |
389 |         return converted_results
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
390 |
391 |     except Exception as e:
    |

src/mcp_tools/tools/rag.py:257:50: SLF001 Private member accessed: `_llm_client`
    |
256 |             results["connectivity_test"] = True
257 |             results["openai_client_available"] = rag_generator._llm_client is not None
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
258 |
259 |             # Cleanup
    |

src/mcp_tools/tools/rag.py:293:13: TRY300 Consider moving this statement to an `else` block
    |
291 |               rag_generator.clear_cache()
292 |
293 | /             return {
294 | |                 "status": "success",
295 | |                 "message": "RAG answer cache cleared successfully",
296 | |             }
    | |_____________^ TRY300
297 |
298 |           except Exception as e:
    |

src/mcp_tools/tools/search.py:69:31: SLF001 Private member accessed: `_client`
   |
68 |             # Get the document by ID
69 |             retrieved = await qdrant_service._client.retrieve(
   |                               ^^^^^^^^^^^^^^^^^^^^^^ SLF001
70 |                 collection_name=collection,
71 |                 ids=[query_id],
   |

src/mcp_tools/tools/search.py:131:13: TRY300 Consider moving this statement to an `else` block
    |
129 |                     f"Found {len(final_results)} similar documents for {query_id}"
130 |                 )
131 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
132 |
133 |         except (TimeoutError, OSError, PermissionError):
    |

src/mcp_tools/tools/search_tools.py:194:13: TRY300 Consider moving this statement to an `else` block
    |
192 |                 f"Multi-stage search {request_id} completed: {len(search_results)} results"
193 |             )
194 |             return search_results
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY300
195 |
196 |         except (ConnectionError, OSError, PermissionError):
    |

src/mcp_tools/tools/search_tools.py:327:13: TRY300 Consider moving this statement to an `else` block
    |
325 |                 f"HyDE search {request_id} completed: {len(search_results)} results found"
326 |             )
327 |             return search_results
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY300
328 |
329 |         except Exception as e:
    |

src/mcp_tools/tools/search_tools.py:577:13: TRY300 Consider moving this statement to an `else` block
    |
575 |                 f"Filtered search {request_id} completed: {len(search_results)} results"
576 |             )
577 |             return search_results
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY300
578 |
579 |         except (ConnectionError, OSError, PermissionError):
    |

src/mcp_tools/tools/search_with_reranking.py:141:13: TRY300 Consider moving this statement to an `else` block
    |
139 |                 )
140 |
141 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
142 |
143 |         except Exception as e:
    |

src/mcp_tools/tools/search_with_reranking.py:264:13: TRY300 Consider moving this statement to an `else` block
    |
262 |                 )
263 |
264 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
265 |
266 |         except Exception as e:
    |

src/mcp_tools/tools/search_with_reranking.py:397:13: TRY300 Consider moving this statement to an `else` block
    |
395 |                 )
396 |
397 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
398 |
399 |         except Exception as e:
    |

src/mcp_tools/tools/search_with_reranking.py:507:9: TRY300 Consider moving this statement to an `else` block
    |
505 |               await ctx.debug(f"Initial search returned {len(results)} results")
506 |
507 | /         return {
508 | |             "success": True,
509 | |             "results": results,
510 | |             "query_embedding": query_embedding,
511 | |         }
    | |_________^ TRY300
512 |
513 |       except Exception as e:
    |

src/mcp_tools/tools/search_with_reranking.py:1010:9: PLC0206 Extracting value from dictionary without calling `.items()`
     |
1008 |       weight_changes = {}
1009 |       if original_weights:
1010 | /         for factor in optimal_weights:
1011 | |             original = original_weights.get(factor, 0.0)
1012 | |             optimal = optimal_weights[factor]
1013 | |             weight_changes[factor] = optimal - original
     | |_______________________________________________________^ PLC0206
1014 |
1015 |       # Calculate ranking confidence based on score distribution
     |

src/mcp_tools/tools/search_with_reranking.py:1110:13: PLW2901 `for` loop variable `result` overwritten by assignment target
     |
1108 |         # Start with existing quality assessment or create basic one
1109 |         if "quality_assessment" not in result:
1110 |             result = (await _apply_quality_assessment([result], query, ctx))[0]
     |             ^^^^^^ PLW2901
1111 |
1112 |         # Add contextual relevance if context provided
     |

src/mcp_tools/tools/system_health.py:137:13: TRY300 Consider moving this statement to an `else` block
    |
135 |                 )
136 |
137 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
138 |
139 |         except Exception as e:
    |

src/mcp_tools/tools/system_health.py:250:13: TRY300 Consider moving this statement to an `else` block
    |
248 |                 )
249 |
250 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
251 |
252 |         except Exception as e:
    |

src/mcp_tools/tools/system_health.py:359:13: TRY300 Consider moving this statement to an `else` block
    |
357 |                 )
358 |
359 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
360 |
361 |         except Exception as e:
    |

src/mcp_tools/tools/web_search.py:168:13: TRY300 Consider moving this statement to an `else` block
    |
166 |                 )
167 |
168 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
169 |
170 |         except Exception as e:
    |

src/mcp_tools/tools/web_search.py:322:13: TRY300 Consider moving this statement to an `else` block
    |
320 |                 )
321 |
322 |             return best_result
    |             ^^^^^^^^^^^^^^^^^^ TRY300
323 |
324 |         except Exception as e:
    |

src/mcp_tools/tools/web_search.py:429:13: TRY300 Consider moving this statement to an `else` block
    |
427 |                 )
428 |
429 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
430 |
431 |         except Exception as e:
    |

src/security/ml_security.py:148:13: TRY300 Consider moving this statement to an `else` block
    |
146 |             )
147 |             self.checks_performed.append(result)
148 |             return result
    |             ^^^^^^^^^^^^^ TRY300
149 |
150 |         except Exception as e:
    |

src/security/ml_security.py:237:13: TRY300 Consider moving this statement to an `else` block
    |
235 |             )
236 |             self.checks_performed.append(result)
237 |             return result
    |             ^^^^^^^^^^^^^ TRY300
238 |
239 |         except subprocess.TimeoutExpired:
    |

src/security/ml_security.py:348:13: TRY300 Consider moving this statement to an `else` block
    |
346 |             )
347 |             self.checks_performed.append(result)
348 |             return result
    |             ^^^^^^^^^^^^^ TRY300
349 |
350 |         except (AttributeError, RuntimeError, ValueError):
    |

src/services/agents/agentic_orchestrator.py:479:12: PLW0603 Using the global statement to update `_orchestrator_instance` is discouraged
    |
477 | def get_orchestrator() -> AgenticOrchestrator:
478 |     """Get singleton orchestrator instance."""
479 |     global _orchestrator_instance
    |            ^^^^^^^^^^^^^^^^^^^^^^ PLW0603
480 |     if _orchestrator_instance is None:
481 |         _orchestrator_instance = AgenticOrchestrator()
    |

src/services/agents/coordination.py:216:13: SIM105 Use `contextlib.suppress(asyncio.CancelledError)` instead of `try`-`except`-`pass`
    |
214 |           if self._health_monitor_task and not self._health_monitor_task.done():
215 |               self._health_monitor_task.cancel()
216 | /             try:
217 | |                 await self._health_monitor_task
218 | |             except asyncio.CancelledError:
219 | |                 pass
    | |____________________^ SIM105
220 |
221 |           # Cancel coordination task
    |
    = help: Replace with `contextlib.suppress(asyncio.CancelledError)`

src/services/agents/coordination.py:224:13: SIM105 Use `contextlib.suppress(asyncio.CancelledError)` instead of `try`-`except`-`pass`
    |
222 |           if self._coordination_task and not self._coordination_task.done():
223 |               self._coordination_task.cancel()
224 | /             try:
225 | |                 await self._coordination_task
226 | |             except asyncio.CancelledError:
227 | |                 pass
    | |____________________^ SIM105
228 |
229 |           # Cancel any running tasks
    |
    = help: Replace with `contextlib.suppress(asyncio.CancelledError)`

src/services/agents/coordination.py:521:13: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
520 |             # Start task execution
521 |             asyncio.create_task(self._execute_task(task, assignment))
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
522 |
523 |             # Respect parallel execution limit
    |

src/services/agents/coordination.py:702:65: SLF001 Private member accessed: `_initialized`
    |
700 |             try:
701 |                 # Simple health check - could be enhanced with agent-specific checks
702 |                 is_healthy = hasattr(agent, "_initialized") and agent._initialized
    |                                                                 ^^^^^^^^^^^^^^^^^^ SLF001
703 |                 self.agent_health_status[agent_name] = is_healthy
    |

src/services/agents/dynamic_tool_discovery.py:705:12: PLW0603 Using the global statement to update `_discovery_engine` is discouraged
    |
703 | def get_discovery_engine() -> DynamicToolDiscovery:
704 |     """Get singleton discovery engine instance."""
705 |     global _discovery_engine
    |            ^^^^^^^^^^^^^^^^^ PLW0603
706 |     if _discovery_engine is None:
707 |         _discovery_engine = DynamicToolDiscovery()
    |

src/services/agents/dynamic_tool_discovery.py:725:12: SLF001 Private member accessed: `_initialized`
    |
723 |     """
724 |     engine = get_discovery_engine()
725 |     if not engine._initialized:
    |            ^^^^^^^^^^^^^^^^^^^ SLF001
726 |         await engine.initialize_discovery(deps)
727 |     return await engine.discover_tools_for_task(task, requirements)
    |

src/services/agents/integration.py:328:13: TRY300 Consider moving this statement to an `else` block
    |
326 |             )
327 |
328 |             return response
    |             ^^^^^^^^^^^^^^^ TRY300
329 |
330 |         except Exception as e:
    |

src/services/agents/integration.py:512:13: TRY300 Consider moving this statement to an `else` block
    |
510 |                         vector_results["optimizations_applied"].append(opt_result)
511 |
512 |             return vector_results
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY300
513 |
514 |         except Exception as e:
    |

src/services/agents/integration.py:581:13: TRY300 Consider moving this statement to an `else` block
    |
579 |                 tasks.append(task)
580 |
581 |             return tasks
    |             ^^^^^^^^^^^^ TRY300
582 |
583 |         except Exception:
    |

src/services/agents/integration.py:619:13: TRY300 Consider moving this statement to an `else` block
    |
617 |               )
618 |
619 | /             return {
620 | |                 "coordination_results": coordination_result,
621 | |                 "tool_results": tool_result,
622 | |                 "integration_success": True,
623 | |             }
    | |_____________^ TRY300
624 |
625 |           except Exception as e:
    |

src/services/agents/integration.py:667:13: TRY300 Consider moving this statement to an `else` block
    |
665 |                 ]["results"]
666 |
667 |             return integrated
    |             ^^^^^^^^^^^^^^^^^ TRY300
668 |
669 |         except Exception as e:
    |

src/services/agents/integration.py:789:13: TRY300 Consider moving this statement to an `else` block
    |
787 |                 recommendations.append("System performing optimally")
788 |
789 |             return recommendations
    |             ^^^^^^^^^^^^^^^^^^^^^^ TRY300
790 |
791 |         except Exception:
    |

src/services/agents/integration.py:920:13: TRY300 Consider moving this statement to an `else` block
    |
918 |                 optimizations.append("System operating efficiently")
919 |
920 |             return optimizations
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
921 |
922 |         except Exception:
    |

src/services/agents/tool_orchestration.py:305:13: TRY300 Consider moving this statement to an `else` block
    |
303 |             logger.info(f"Composed tool chain {plan_id} with {len(nodes)} tools")
304 |
305 |             return plan
    |             ^^^^^^^^^^^ TRY300
306 |
307 |         except Exception:
    |

src/services/agents/tool_orchestration.py:398:13: TRY300 Consider moving this statement to an `else` block
    |
396 |             )
397 |
398 |             return final_results
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
399 |
400 |         except Exception as e:
    |

src/services/agents/tool_orchestration.py:487:13: TRY300 Consider moving this statement to an `else` block
    |
485 |             await self._update_tool_metrics(tool_id, execution_result)
486 |
487 |             return execution_result
    |             ^^^^^^^^^^^^^^^^^^^^^^^ TRY300
488 |
489 |         except TimeoutError:
    |

src/services/agents/tool_orchestration.py:930:13: TRY300 Consider moving this statement to an `else` block
    |
928 |                 execution_state["failed_nodes"].add(node.node_id)
929 |
930 |             return result.result or {"error": result.error}
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
931 |
932 |         except Exception as e:
    |

src/services/analytics/search_dashboard.py:104:13: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
102 |         try:
103 |             # Initialize background pattern detection
104 |             asyncio.create_task(self._pattern_detection_loop())
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
105 |
106 |             self._initialized = True
    |

src/services/analytics/search_dashboard.py:395:13: TRY300 Consider moving this statement to an `else` block
    |
393 |                     )
394 |
395 |             return recommendations
    |             ^^^^^^^^^^^^^^^^^^^^^^ TRY300
396 |
397 |         except (AttributeError, OSError, PermissionError):
    |

src/services/analytics/search_dashboard.py:585:13: TRY300 Consider moving this statement to an `else` block
    |
583 |                     )
584 |
585 |             return insights
    |             ^^^^^^^^^^^^^^^ TRY300
586 |
587 |         except (AttributeError, OSError, PermissionError):
    |

src/services/analytics/search_dashboard.py:652:13: TRY300 Consider moving this statement to an `else` block
    |
650 |                 }
651 |
652 |             return trends
    |             ^^^^^^^^^^^^^ TRY300
653 |
654 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/analytics/search_dashboard.py:676:13: TRY300 Consider moving this statement to an `else` block
    |
674 |                 utilization[feature] = count / total_queries
675 |
676 |             return utilization
    |             ^^^^^^^^^^^^^^^^^^ TRY300
677 |
678 |         except (OSError, PermissionError):
    |

src/services/analytics/search_dashboard.py:722:13: TRY300 Consider moving this statement to an `else` block
    |
720 |                 timeline.append({"timestamp": hour_key, "query_count": count})
721 |
722 |             return timeline
    |             ^^^^^^^^^^^^^^^ TRY300
723 |
724 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/analytics/search_dashboard.py:840:13: TRY300 Consider moving this statement to an `else` block
    |
838 |                 )
839 |
840 |             return opportunities
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
841 |
842 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/analytics/vector_visualization.py:846:13: TRY300 Consider moving this statement to an `else` block
    |
844 |                 )
845 |
846 |             return insights
    |             ^^^^^^^^^^^^^^^ TRY300
847 |
848 |         except (AttributeError, OSError, PermissionError):
    |

src/services/analytics/vector_visualization.py:1090:13: TRY300 Consider moving this statement to an `else` block
     |
1088 |                 )
1089 |
1090 |             return recommendations
     |             ^^^^^^^^^^^^^^^^^^^^^^ TRY300
1091 |
1092 |         except (AttributeError, OSError, PermissionError):
     |

src/services/analytics/vector_visualization.py:1151:13: TRY300 Consider moving this statement to an `else` block
     |
1149 |                 )
1150 |
1151 |             return recommendations
     |             ^^^^^^^^^^^^^^^^^^^^^^ TRY300
1152 |
1153 |         except (AttributeError, ConnectionError, OSError):
     |

src/services/auto_detection/connection_pools.py:152:59: B025 try-except block with duplicate exception `ImportError`
    |
150 |         except ImportError:
151 |             self.logger.warning("redis package not available, skipping Redis pool")
152 |         except (OSError, AttributeError, ConnectionError, ImportError):
    |                                                           ^^^^^^^^^^^ B025
153 |             self.logger.exception("Failed to initialize Redis pool")
154 |             raise
    |

src/services/auto_detection/connection_pools.py:206:59: B025 try-except block with duplicate exception `ImportError`
    |
204 |                 "qdrant-client package not available, skipping Qdrant pool"
205 |             )
206 |         except (OSError, AttributeError, ConnectionError, ImportError):
    |                                                           ^^^^^^^^^^^ B025
207 |             self.logger.exception("Failed to initialize Qdrant pool")
208 |             raise
    |

src/services/auto_detection/connection_pools.py:255:59: B025 try-except block with duplicate exception `ImportError`
    |
253 |                 "asyncpg package not available, skipping PostgreSQL pool"
254 |             )
255 |         except (OSError, AttributeError, ConnectionError, ImportError):
    |                                                           ^^^^^^^^^^^ B025
256 |             self.logger.exception("Failed to initialize PostgreSQL pool")
257 |             raise
    |

src/services/auto_detection/connection_pools.py:390:60: SLF001 Private member accessed: `_created_connections`
    |
388 |                     # Add created connections count if available
389 |                     if hasattr(pool, "_created_connections"):
390 |                         pool_info["created_connections"] = pool._created_connections
    |                                                            ^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
391 |                     if hasattr(pool, "_available_connections"):
392 |                         pool_info["available_connections"] = len(
    |

src/services/auto_detection/connection_pools.py:393:29: SLF001 Private member accessed: `_available_connections`
    |
391 |                     if hasattr(pool, "_available_connections"):
392 |                         pool_info["available_connections"] = len(
393 |                             pool._available_connections
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
394 |                         )
395 |                     if hasattr(pool, "_in_use_connections"):
    |

src/services/auto_detection/connection_pools.py:396:63: SLF001 Private member accessed: `_in_use_connections`
    |
394 |                         )
395 |                     if hasattr(pool, "_in_use_connections"):
396 |                         pool_info["in_use_connections"] = len(pool._in_use_connections)
    |                                                               ^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
397 |
398 |                     metrics.library_stats = pool_info
    |

src/services/auto_detection/service_discovery.py:113:25: B025 try-except block with duplicate exception `ConnectionError`
    |
111 |                     errors.append(error_msg)
112 |                     self.logger.warning(error_msg)
113 |                 except (ConnectionError, OSError, TimeoutError) as e:
    |                         ^^^^^^^^^^^^^^^ B025
114 |                     # Catch any unexpected errors during service discovery
115 |                     error_msg = f"Unexpected error discovering {service_type}: {e}"
    |

src/services/auto_detection/service_discovery.py:113:42: B025 try-except block with duplicate exception `OSError`
    |
111 |                     errors.append(error_msg)
112 |                     self.logger.warning(error_msg)
113 |                 except (ConnectionError, OSError, TimeoutError) as e:
    |                                          ^^^^^^^ B025
114 |                     # Catch any unexpected errors during service discovery
115 |                     error_msg = f"Unexpected error discovering {service_type}: {e}"
    |

src/services/auto_detection/service_discovery.py:113:51: B025 try-except block with duplicate exception `TimeoutError`
    |
111 |                     errors.append(error_msg)
112 |                     self.logger.warning(error_msg)
113 |                 except (ConnectionError, OSError, TimeoutError) as e:
    |                                                   ^^^^^^^^^^^^ B025
114 |                     # Catch any unexpected errors during service discovery
115 |                     error_msg = f"Unexpected error discovering {service_type}: {e}"
    |

src/services/auto_detection/service_discovery.py:206:39: B025 try-except block with duplicate exception `ConnectionError`
    |
204 |                 )  # TODO: Convert f-string to logging format
205 |                 continue
206 |             except (redis.RedisError, ConnectionError, TimeoutError, ValueError) as e:
    |                                       ^^^^^^^^^^^^^^^ B025
207 |                 # Catch any unexpected errors during Redis discovery
208 |                 self.logger.debug(
    |

src/services/auto_detection/service_discovery.py:206:56: B025 try-except block with duplicate exception `TimeoutError`
    |
204 |                 )  # TODO: Convert f-string to logging format
205 |                 continue
206 |             except (redis.RedisError, ConnectionError, TimeoutError, ValueError) as e:
    |                                                        ^^^^^^^^^^^^ B025
207 |                 # Catch any unexpected errors during Redis discovery
208 |                 self.logger.debug(
    |

src/services/auto_detection/service_discovery.py:280:21: B025 try-except block with duplicate exception `httpx.HTTPError`
    |
278 |                 )  # TODO: Convert f-string to logging format
279 |                 continue
280 |             except (httpx.HTTPError, httpx.TimeoutException, ConnectionError) as e:
    |                     ^^^^^^^^^^^^^^^ B025
281 |                 # Catch any unexpected errors during Qdrant discovery
282 |                 self.logger.debug(
    |

src/services/auto_detection/service_discovery.py:280:62: B025 try-except block with duplicate exception `ConnectionError`
    |
278 |                 )  # TODO: Convert f-string to logging format
279 |                 continue
280 |             except (httpx.HTTPError, httpx.TimeoutException, ConnectionError) as e:
    |                                                              ^^^^^^^^^^^^^^^ B025
281 |                 # Catch any unexpected errors during Qdrant discovery
282 |                 self.logger.debug(
    |

src/services/auto_detection/service_discovery.py:364:13: TRY300 Consider moving this statement to an `else` block
    |
362 |             writer.close()
363 |             await writer.wait_closed()
364 |             return True
    |             ^^^^^^^^^^^ TRY300
365 |         except (ConnectionError, OSError, PermissionError):
366 |             return False
    |

src/services/auto_detection/service_discovery.py:457:13: TRY300 Consider moving this statement to an `else` block
    |
455 |             writer.close()
456 |             await writer.wait_closed()
457 |             return True
    |             ^^^^^^^^^^^ TRY300
458 |         except (TimeoutError, OSError, PermissionError):
459 |             return False
    |

src/services/browser/automation_router.py:305:13: TRY300 Consider moving this statement to an `else` block
    |
303 |             result["provider"] = tool
304 |             result["automation_time_ms"] = elapsed * 1000
305 |             return result
    |             ^^^^^^^^^^^^^ TRY300
306 |
307 |         except (OSError, PermissionError):
    |

src/services/browser/automation_router.py:569:17: TRY300 Consider moving this statement to an `else` block
    |
567 |                 result["fallback_from"] = failed_tool
568 |                 result["automation_time_ms"] = elapsed * 1000
569 |                 return result
    |                 ^^^^^^^^^^^^^ TRY300
570 |
571 |             except (OSError, PermissionError):
    |

src/services/browser/browser_router.py:212:13: TRY300 Consider moving this statement to an `else` block
    |
210 |             result["provider"] = selected_tier
211 |             result["automation_time_ms"] = elapsed * 1000
212 |             return result
    |             ^^^^^^^^^^^^^ TRY300
213 |
214 |         except Exception as e:
    |

src/services/browser/browser_router.py:446:17: TRY300 Consider moving this statement to an `else` block
    |
444 |                 result["failed_tiers"] = failed_tiers
445 |                 result["automation_time_ms"] = elapsed * 1000
446 |                 return result
    |                 ^^^^^^^^^^^^^ TRY300
447 |
448 |             except Exception as e:
    |

src/services/browser/browser_router.py:571:9: ARG002 Unused method argument: `content_length`
    |
569 |         success: bool,
570 |         response_time_ms: float,
571 |         content_length: int,
    |         ^^^^^^^^^^^^^^ ARG002
572 |         error_type: str | None = None,
573 |     ) -> None:
    |

src/services/browser/browser_use_adapter.py:27:19: PGH003 Use specific rule codes when ignoring type issues
   |
25 |     BROWSER_USE_AVAILABLE = False
26 |     logger.warning("browser-use not available")
27 |     Agent = None  # type: ignore
   |                   ^^^^^^^^^^^^^^ PGH003
28 |     Browser = None  # type: ignore
29 |     BrowserConfig = None  # type: ignore
   |

src/services/browser/browser_use_adapter.py:28:21: PGH003 Use specific rule codes when ignoring type issues
   |
26 |     logger.warning("browser-use not available")
27 |     Agent = None  # type: ignore
28 |     Browser = None  # type: ignore
   |                     ^^^^^^^^^^^^^^ PGH003
29 |     BrowserConfig = None  # type: ignore
30 |     ChatOpenAI = None  # type: ignore
   |

src/services/browser/browser_use_adapter.py:29:27: PGH003 Use specific rule codes when ignoring type issues
   |
27 |     Agent = None  # type: ignore
28 |     Browser = None  # type: ignore
29 |     BrowserConfig = None  # type: ignore
   |                           ^^^^^^^^^^^^^^ PGH003
30 |     ChatOpenAI = None  # type: ignore
31 |     ChatAnthropic = None  # type: ignore
   |

src/services/browser/browser_use_adapter.py:30:24: PGH003 Use specific rule codes when ignoring type issues
   |
28 |     Browser = None  # type: ignore
29 |     BrowserConfig = None  # type: ignore
30 |     ChatOpenAI = None  # type: ignore
   |                        ^^^^^^^^^^^^^^ PGH003
31 |     ChatAnthropic = None  # type: ignore
32 |     ChatGoogleGenerativeAI = None  # type: ignore
   |

src/services/browser/browser_use_adapter.py:31:27: PGH003 Use specific rule codes when ignoring type issues
   |
29 |     BrowserConfig = None  # type: ignore
30 |     ChatOpenAI = None  # type: ignore
31 |     ChatAnthropic = None  # type: ignore
   |                           ^^^^^^^^^^^^^^ PGH003
32 |     ChatGoogleGenerativeAI = None  # type: ignore
   |

src/services/browser/browser_use_adapter.py:32:36: PGH003 Use specific rule codes when ignoring type issues
   |
30 |     ChatOpenAI = None  # type: ignore
31 |     ChatAnthropic = None  # type: ignore
32 |     ChatGoogleGenerativeAI = None  # type: ignore
   |                                    ^^^^^^^^^^^^^^ PGH003
   |

src/services/browser/browser_use_adapter.py:244:21: B025 try-except block with duplicate exception `TimeoutError`
    |
242 |                 await asyncio.sleep(2**retry_count)
243 |
244 |             except (TimeoutError, OSError, PermissionError):
    |                     ^^^^^^^^^^^^ B025
245 |                 retry_count += 1
246 |                 error_msg = "browser-use execution error"
    |

src/services/browser/lightweight_scraper.py:312:13: TRY300 Consider moving this statement to an `else` block
    |
310 |             analysis["can_handle"] = analysis["confidence"] > 0.5
311 |
312 |             return analysis
    |             ^^^^^^^^^^^^^^^ TRY300
313 |
314 |         except (ValueError, TypeError, UnicodeDecodeError) as e:
    |

src/services/browser/lightweight_scraper.py:376:34: B025 try-except block with duplicate exception `httpx.TimeoutException`
    |
374 |                 return None
375 |             raise
376 |         except (httpx.HTTPError, httpx.TimeoutException, ConnectionError) as e:
    |                                  ^^^^^^^^^^^^^^^^^^^^^^ B025
377 |             logger.warning(
378 |                 f"Error scraping {url}: {e}"
    |

src/services/browser/unified_manager.py:284:29: SLF001 Private member accessed: `_generate_cache_key`
    |
282 |             try:
283 |                 # Generate cache key
284 |                 cache_key = self._browser_cache._generate_cache_key(
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
285 |                     request.url, None if request.tier == "auto" else request.tier
286 |                 )
    |

src/services/browser/unified_manager.py:417:33: SLF001 Private member accessed: `_generate_cache_key`
    |
415 |                     )
416 |
417 |                     cache_key = self._browser_cache._generate_cache_key(
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
418 |                         request.url, None if request.tier == "auto" else request.tier
419 |                     )
    |

src/services/circuit_breaker/modern.py:191:13: TRY300 Consider moving this statement to an `else` block
    |
189 |                 return True
190 |             logger.warning(f"Circuit breaker for {service_name} does not support reset")
191 |             return False
    |             ^^^^^^^^^^^^ TRY300
192 |         except Exception:
193 |             logger.exception("Failed to reset circuit breaker for {service_name}")
    |

src/services/config_drift_service.py:368:13: TRY300 Consider moving this statement to an `else` block
    |
366 |             )
367 |
368 |             return True
    |             ^^^^^^^^^^^ TRY300
369 |
370 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/content_intelligence/classifiers.py:651:13: TRY300 Consider moving this statement to an `else` block
    |
649 |                 scores[content_type] = max(0.0, similarity)  # Ensure non-negative
650 |
651 |             return scores
    |             ^^^^^^^^^^^^^ TRY300
652 |
653 |         except (OSError, PermissionError):
    |

src/services/content_intelligence/quality_assessor.py:300:13: TRY300 Consider moving this statement to an `else` block
    |
298 |                 relevance_score = min(relevance_score + 0.3, 1.0)
299 |
300 |             return relevance_score
    |             ^^^^^^^^^^^^^^^^^^^^^^ TRY300
301 |
302 |         except (ValueError, TypeError, UnicodeDecodeError) as e:
    |

src/services/content_intelligence/quality_assessor.py:693:13: TRY300 Consider moving this statement to an `else` block
    |
691 |                     max_similarity = max(max_similarity, jaccard_similarity)
692 |
693 |             return max_similarity
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY300
694 |
695 |         except (ValueError, TypeError, UnicodeDecodeError) as e:
    |

src/services/crawling/crawl4ai_provider.py:350:21: SLF001 Private member accessed: `_value`
    |
348 |                 getattr(self, "semaphore", None)
349 |                 and hasattr(self.semaphore, "_value")
350 |                 and self.semaphore._value
    |                     ^^^^^^^^^^^^^^^^^^^^^ SLF001
351 |             )
352 |             or "unknown",
    |

src/services/crawling/crawl4ai_provider.py:559:13: TRY300 Consider moving this statement to an `else` block
    |
557 |                 stats.update(runtime_stats)
558 |
559 |             return stats
    |             ^^^^^^^^^^^^ TRY300
560 |         except (asyncio.CancelledError, TimeoutError, RuntimeError) as e:
561 |             self.logger.warning("Could not get dispatcher stats")
    |

src/services/crawling/firecrawl_provider.py:215:13: TRY300 Consider moving this statement to an `else` block
    |
214 |               # Timeout
215 | /             return {
216 | |                 "success": False,
217 | |                 "error": "Crawl timed out",
218 | |                 "pages": [],
219 | |                 "total": 0,
220 | |                 "crawl_id": crawl_id,
221 | |             }
    | |_____________^ TRY300
222 |
223 |           except Exception as e:
    |

src/services/crawling/lightweight_scraper.py:109:17: TRY300 Consider moving this statement to an `else` block
    |
107 |             try:
108 |                 recommendation = await self._analyze_url(url)
109 |                 return recommendation == TierRecommendation.LIGHTWEIGHT_OK
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
110 |             except (ConnectionError, OSError, PermissionError):
111 |                 logger.debug("HEAD analysis failed for {url}")
    |

src/services/crawling/lightweight_scraper.py:167:13: TRY300 Consider moving this statement to an `else` block
    |
165 |                 return TierRecommendation.BROWSER_REQUIRED
166 |
167 |             return TierRecommendation.LIGHTWEIGHT_OK
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
168 |
169 |         except httpx.TimeoutException:
    |

src/services/crawling/lightweight_scraper.py:250:13: TRY300 Consider moving this statement to an `else` block
    |
248 |                 result["content"]["text"] = extracted["text"]
249 |
250 |             return result
    |             ^^^^^^^^^^^^^ TRY300
251 |
252 |         except httpx.HTTPStatusError as e:
    |

src/services/crawling/manager.py:128:13: TRY300 Consider moving this statement to an `else` block
    |
127 |               # Return response in standardized format
128 | /             return {
129 | |                 "success": result.success,
130 | |                 "content": result.content,
131 | |                 "url": result.url,
132 | |                 "title": result.title,
133 | |                 "metadata": result.metadata,
134 | |                 "tier_used": result.tier_used,
135 | |                 "automation_time_ms": result.execution_time_ms,
136 | |                 "quality_score": result.quality_score,
137 | |                 "error": result.error,
138 | |                 "fallback_attempted": result.fallback_attempted,
139 | |                 "failed_tiers": result.failed_tiers,
140 | |             }
    | |_____________^ TRY300
141 |
142 |           except (OSError, PermissionError):
    |

src/services/dependencies.py:1523:13: PLC0415 `import` should be at the top-level of a file
     |
1521 |         else:
1522 |             # Fallback to individual scraping
1523 |             import asyncio
     |             ^^^^^^^^^^^^^^ PLC0415
1524 |
1525 |             semaphore = asyncio.Semaphore(request.max_concurrent)
     |

src/services/deployment/ab_testing.py:468:13: TRY300 Consider moving this statement to an `else` block
    |
466 |             is_significant = has_sufficient_sample and abs(uplift) > 5.0  # 5% threshold
467 |
468 |             return uplift, is_significant
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
469 |
470 |         except Exception:
    |

src/services/deployment/blue_green.py:262:13: TRY300 Consider moving this statement to an `else` block
    |
260 |                 f"Successfully switched from {source_env.name} to {target_env.name}"
261 |             )
262 |             return True
    |             ^^^^^^^^^^^ TRY300
263 |
264 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/deployment/blue_green.py:291:13: TRY300 Consider moving this statement to an `else` block
    |
289 |                 return True
290 |             logger.error("Rollback failed")
291 |             return False
    |             ^^^^^^^^^^^^ TRY300
292 |
293 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/deployment/blue_green.py:436:17: TRY300 Consider moving this statement to an `else` block
    |
434 |                     f"Health check passed for {env.name} environment (attempt {env.name})"
435 |                 )
436 |                 return True
    |                 ^^^^^^^^^^^ TRY300
437 |
438 |             except (ValueError, TypeError, AttributeError):
    |

src/services/deployment/canary.py:367:13: TRY300 Consider moving this statement to an `else` block
    |
365 |                 f"Promoted canary {deployment_id} to %.1f%% traffic (stage: {next_percentage})"
366 |             )
367 |             return True
    |             ^^^^^^^^^^^ TRY300
368 |
369 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/deployment/canary.py:406:13: TRY300 Consider moving this statement to an `else` block
    |
404 |                 f"Rolled back canary deployment {deployment_id}. Reason: {reason}"
405 |             )
406 |             return True
    |             ^^^^^^^^^^^ TRY300
407 |
408 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/deployment/canary.py:582:13: TRY300 Consider moving this statement to an `else` block
    |
581 |             # Check minimum monitoring duration
582 |             return metrics.stage_duration_minutes >= config.monitoring_window_minutes
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
583 |
584 |         except (OSError, PermissionError):
    |

src/services/deployment/canary.py:621:13: TRY300 Consider moving this statement to an `else` block
    |
619 |                 return True
620 |
621 |             return False
    |             ^^^^^^^^^^^^ TRY300
622 |
623 |         except (OSError, PermissionError):
    |

src/services/deployment/feature_flags.py:342:13: TRY300 Consider moving this statement to an `else` block
    |
340 |             self._cache_timestamps[cache_key] = current_time
341 |
342 |             return flags
    |             ^^^^^^^^^^^^ TRY300
343 |
344 |         except Exception:
    |

src/services/embeddings/fastembed_provider.py:192:13: TRY300 Consider moving this statement to an `else` block
    |
190 |                 f"Generated {len(embeddings)} embeddings locally"
191 |             )  # TODO: Convert f-string to logging format
192 |             return embeddings
    |             ^^^^^^^^^^^^^^^^^ TRY300
193 |
194 |         except Exception as e:
    |

src/services/embeddings/fastembed_provider.py:235:13: TRY300 Consider moving this statement to an `else` block
    |
233 |                 sparse_embeddings.append(sparse_data)
234 |
235 |             return sparse_embeddings
    |             ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
236 |         except Exception as e:
237 |             msg = f"Sparse embedding generation failed: {e}"
    |

src/services/embeddings/manager.py:591:13: TRY300 Consider moving this statement to an `else` block
    |
589 |                 result["sparse_embeddings"] = sparse_embeddings
590 |
591 |             return result
    |             ^^^^^^^^^^^^^ TRY300
592 |         except (ValueError, RuntimeError, ConnectionError, TimeoutError) as e:
593 |             logger.exception("Embedding generation failed: ")
    |

src/services/embeddings/manager.py:594:19: TRY003 Avoid specifying long messages outside the exception class
    |
592 |         except (ValueError, RuntimeError, ConnectionError, TimeoutError) as e:
593 |             logger.exception("Embedding generation failed: ")
594 |             raise EmbeddingServiceError(f"Failed to generate embeddings: {e}") from e
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
595 |
596 |     async def rerank_results(
    |

src/services/embeddings/manager.py:594:41: EM102 Exception must not use an f-string literal, assign to variable first
    |
592 |         except (ValueError, RuntimeError, ConnectionError, TimeoutError) as e:
593 |             logger.exception("Embedding generation failed: ")
594 |             raise EmbeddingServiceError(f"Failed to generate embeddings: {e}") from e
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM102
595 |
596 |     async def rerank_results(
    |
    = help: Assign to variable; remove f-string literal

src/services/embeddings/openai_provider.py:215:13: TRY300 Consider moving this statement to an `else` block
    |
213 |                 )
214 |
215 |             return embeddings
    |             ^^^^^^^^^^^^^^^^^ TRY300
216 |
217 |         except Exception as e:
    |

src/services/embeddings/openai_provider.py:349:13: TRY300 Consider moving this statement to an `else` block
    |
347 |                 f"Created batch job {batch_response.id} for {len(texts)} texts"
348 |             )  # TODO: Convert f-string to logging format
349 |             return batch_response.id
    |             ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
350 |
351 |         except Exception as e:
    |

src/services/embeddings/parallel.py:53:25: UP046 Generic class `ParallelProcessor` uses `Generic` subclass instead of type parameters
   |
53 | class ParallelProcessor(Generic[T, R]):
   |                         ^^^^^^^^^^^^^ UP046
54 |     """High-performance parallel processor for ML operations."""
   |
   = help: Use type parameters

src/services/embeddings/parallel.py:186:17: TRY300 Consider moving this statement to an `else` block
    |
184 |                     f"Processed batch {batch_idx} with {len(batch)} items"
185 |                 )  # TODO: Convert f-string to logging format
186 |                 return results
    |                 ^^^^^^^^^^^^^^ TRY300
187 |
188 |             except TimeoutError:
    |

src/services/embeddings/parallel.py:193:17: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
191 |                 )  # TODO: Convert f-string to logging format
192 |                 msg = f"Batch {batch_idx} processing timeout"
193 |                 raise EmbeddingServiceError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
194 |             except Exception as e:
195 |                 logger.exception(
    |

src/services/enterprise/cache.py:137:13: TRY300 Consider moving this statement to an `else` block
    |
135 |             self._cache_misses += 1
136 |             self._record_operation_time("get", time.time() - start_time)
137 |             return None
    |             ^^^^^^^^^^^ TRY300
138 |
139 |         except Exception:
    |

src/services/enterprise/cache.py:211:13: TRY300 Consider moving this statement to an `else` block
    |
209 |             self._record_operation_time("delete", time.time() - start_time)
210 |
211 |             return deleted
    |             ^^^^^^^^^^^^^^ TRY300
212 |
213 |         except Exception:
    |

src/services/enterprise/cache.py:298:13: PLC0415 `import` should be at the top-level of a file
    |
296 |         try:
297 |             # Initialize Redis/Dragonfly connection
298 |             from src.services.cache.dragonfly_cache import DragonflyCacheAdapter
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
299 |
300 |             self.distributed_cache = DragonflyCacheAdapter()
    |

src/services/enterprise/integration.py:675:9: PLC0415 `import` should be at the top-level of a file
    |
673 |         """Register all enterprise services with the registry."""
674 |         # Register enterprise cache service
675 |         from src.services.enterprise.cache import EnterpriseCacheService
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
676 |
677 |         cache_service = EnterpriseCacheService()
    |

src/services/enterprise/integration.py:683:9: PLC0415 `import` should be at the top-level of a file
    |
682 |         # Register enterprise search service
683 |         from src.services.enterprise.search import EnterpriseSearchService
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
684 |
685 |         search_service = EnterpriseSearchService()
    |

src/services/enterprise/integration.py:721:12: PLW0603 Using the global statement to update `_integration_manager` is discouraged
    |
719 | ) -> EnterpriseIntegrationManager:
720 |     """Get or create the global enterprise integration manager."""
721 |     global _integration_manager
    |            ^^^^^^^^^^^^^^^^^^^^ PLW0603
722 |
723 |     if _integration_manager is None:
    |

src/services/enterprise/integration.py:742:12: PLW0603 Using the global statement to update `_integration_manager` is discouraged
    |
740 | async def cleanup_enterprise_platform() -> None:
741 |     """Cleanup the enterprise platform."""
742 |     global _integration_manager
    |            ^^^^^^^^^^^^^^^^^^^^ PLW0603
743 |
744 |     if _integration_manager:
    |

src/services/enterprise/search.py:42:11: TRY003 Avoid specifying long messages outside the exception class
   |
40 | def _raise_hybrid_search_service_not_available() -> None:
41 |     """Raise ImportError for HybridSearchService not available."""
42 |     raise ImportError("HybridSearchService not available")
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
   |

src/services/enterprise/search.py:42:23: EM101 Exception must not use a string literal, assign to variable first
   |
40 | def _raise_hybrid_search_service_not_available() -> None:
41 |     """Raise ImportError for HybridSearchService not available."""
42 |     raise ImportError("HybridSearchService not available")
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
   |
   = help: Assign to variable; remove string literal

src/services/enterprise/search.py:47:11: TRY003 Avoid specifying long messages outside the exception class
   |
45 | def _raise_ranking_service_not_available() -> None:
46 |     """Raise ImportError for RankingService not available."""
47 |     raise ImportError("RankingService not available")
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
   |

src/services/enterprise/search.py:47:23: EM101 Exception must not use a string literal, assign to variable first
   |
45 | def _raise_ranking_service_not_available() -> None:
46 |     """Raise ImportError for RankingService not available."""
47 |     raise ImportError("RankingService not available")
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
   |
   = help: Assign to variable; remove string literal

src/services/enterprise/search.py:52:11: TRY003 Avoid specifying long messages outside the exception class
   |
50 | def _raise_query_expansion_service_not_available() -> None:
51 |     """Raise ImportError for QueryExpansionService not available."""
52 |     raise ImportError("QueryExpansionService not available")
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
   |

src/services/enterprise/search.py:52:23: EM101 Exception must not use a string literal, assign to variable first
   |
50 | def _raise_query_expansion_service_not_available() -> None:
51 |     """Raise ImportError for QueryExpansionService not available."""
52 |     raise ImportError("QueryExpansionService not available")
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
   |
   = help: Assign to variable; remove string literal

src/services/enterprise/search.py:57:11: TRY003 Avoid specifying long messages outside the exception class
   |
55 | def _raise_metrics_collector_not_available() -> None:
56 |     """Raise ImportError for MetricsCollector not available."""
57 |     raise ImportError("MetricsCollector not available")
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
   |

src/services/enterprise/search.py:57:23: EM101 Exception must not use a string literal, assign to variable first
   |
55 | def _raise_metrics_collector_not_available() -> None:
56 |     """Raise ImportError for MetricsCollector not available."""
57 |     raise ImportError("MetricsCollector not available")
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
   |
   = help: Assign to variable; remove string literal

src/services/enterprise/search.py:183:13: TRY300 Consider moving this statement to an `else` block
    |
181 |             await self._record_search_analytics(request, response)
182 |
183 |             return response
    |             ^^^^^^^^^^^^^^^ TRY300
184 |
185 |         except Exception as e:
    |

src/services/enterprise/search.py:234:13: TRY300 Consider moving this statement to an `else` block
    |
233 |             # Fallback: simple synonym expansion (placeholder)
234 |             return query  # Would implement actual expansion logic
    |             ^^^^^^^^^^^^ TRY300
235 |
236 |         except Exception:
    |

src/services/enterprise/search.py:333:19: TRY003 Avoid specifying long messages outside the exception class
    |
331 |         """Perform vector search."""
332 |         if EmbeddingManager is None:
333 |             raise ImportError("EmbeddingManager not available")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
334 |
335 |         embedding_manager = EmbeddingManager()
    |

src/services/enterprise/search.py:333:31: EM101 Exception must not use a string literal, assign to variable first
    |
331 |         """Perform vector search."""
332 |         if EmbeddingManager is None:
333 |             raise ImportError("EmbeddingManager not available")
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
334 |
335 |         embedding_manager = EmbeddingManager()
    |
    = help: Assign to variable; remove string literal

src/services/errors.py:300:25: PGH003 Use specific rule codes when ignoring type issues
    |
298 |             raise last_exception or Exception("All retry attempts failed")
299 |
300 |         return wrapper  # type: ignore
    |                         ^^^^^^^^^^^^^^ PGH003
301 |
302 |     return decorator
    |

src/services/errors.py:500:13: TRY300 Consider moving this statement to an `else` block
    |
498 |             self._record_success(response_time)
499 |
500 |             return result
    |             ^^^^^^^^^^^^^ TRY300
501 |
502 |         except self.expected_exceptions as e:
    |

src/services/errors.py:689:44: PGH003 Use specific rule codes when ignoring type issues
    |
688 |         # Add circuit breaker management methods to the wrapper
689 |         wrapper.circuit_breaker = breaker  # type: ignore
    |                                            ^^^^^^^^^^^^^^ PGH003
690 |         wrapper.get_circuit_status = breaker.get_status  # type: ignore
691 |         wrapper.reset_circuit = breaker.reset  # type: ignore
    |

src/services/errors.py:690:58: PGH003 Use specific rule codes when ignoring type issues
    |
688 |         # Add circuit breaker management methods to the wrapper
689 |         wrapper.circuit_breaker = breaker  # type: ignore
690 |         wrapper.get_circuit_status = breaker.get_status  # type: ignore
    |                                                          ^^^^^^^^^^^^^^ PGH003
691 |         wrapper.reset_circuit = breaker.reset  # type: ignore
    |

src/services/errors.py:691:48: PGH003 Use specific rule codes when ignoring type issues
    |
689 |         wrapper.circuit_breaker = breaker  # type: ignore
690 |         wrapper.get_circuit_status = breaker.get_status  # type: ignore
691 |         wrapper.reset_circuit = breaker.reset  # type: ignore
    |                                                ^^^^^^^^^^^^^^ PGH003
692 |
693 |         return wrapper  # type: ignore
    |

src/services/errors.py:693:25: PGH003 Use specific rule codes when ignoring type issues
    |
691 |         wrapper.reset_circuit = breaker.reset  # type: ignore
692 |
693 |         return wrapper  # type: ignore
    |                         ^^^^^^^^^^^^^^ PGH003
694 |
695 |     return decorator
    |

src/services/errors.py:747:25: SLF001 Private member accessed: `_should_attempt_reset`
    |
745 |             if (
746 |                 breaker.state == CircuitState.OPEN
747 |                 and not breaker._should_attempt_reset()
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
748 |             ):
749 |                 wait_time = (
    |

src/services/errors.py:773:25: SLF001 Private member accessed: `_record_success`
    |
771 |                         result = await func(*args, **kwargs)
772 |                         response_time = time.time() - start_time
773 |                         breaker._record_success(response_time)
    |                         ^^^^^^^^^^^^^^^^^^^^^^^ SLF001
774 |                         return result
775 |                     except expected_exceptions as e:
    |

src/services/errors.py:774:25: TRY300 Consider moving this statement to an `else` block
    |
772 |                         response_time = time.time() - start_time
773 |                         breaker._record_success(response_time)
774 |                         return result
    |                         ^^^^^^^^^^^^^ TRY300
775 |                     except expected_exceptions as e:
776 |                         response_time = time.time() - start_time
    |

src/services/errors.py:777:25: SLF001 Private member accessed: `_record_failure`
    |
775 |                     except expected_exceptions as e:
776 |                         response_time = time.time() - start_time
777 |                         breaker._record_failure(e, response_time)
    |                         ^^^^^^^^^^^^^^^^^^^^^^^ SLF001
778 |
779 |                         # Log retry attempt
    |

src/services/errors.py:788:44: PGH003 Use specific rule codes when ignoring type issues
    |
787 |         # Add circuit breaker management methods
788 |         wrapper.circuit_breaker = breaker  # type: ignore
    |                                            ^^^^^^^^^^^^^^ PGH003
789 |         wrapper.get_circuit_status = breaker.get_status  # type: ignore
790 |         wrapper.reset_circuit = breaker.reset  # type: ignore
    |

src/services/errors.py:789:58: PGH003 Use specific rule codes when ignoring type issues
    |
787 |         # Add circuit breaker management methods
788 |         wrapper.circuit_breaker = breaker  # type: ignore
789 |         wrapper.get_circuit_status = breaker.get_status  # type: ignore
    |                                                          ^^^^^^^^^^^^^^ PGH003
790 |         wrapper.reset_circuit = breaker.reset  # type: ignore
    |

src/services/errors.py:790:48: PGH003 Use specific rule codes when ignoring type issues
    |
788 |         wrapper.circuit_breaker = breaker  # type: ignore
789 |         wrapper.get_circuit_status = breaker.get_status  # type: ignore
790 |         wrapper.reset_circuit = breaker.reset  # type: ignore
    |                                                ^^^^^^^^^^^^^^ PGH003
791 |
792 |         return wrapper  # type: ignore
    |

src/services/errors.py:792:25: PGH003 Use specific rule codes when ignoring type issues
    |
790 |         wrapper.reset_circuit = breaker.reset  # type: ignore
791 |
792 |         return wrapper  # type: ignore
    |                         ^^^^^^^^^^^^^^ PGH003
793 |
794 |     return decorator
    |

src/services/errors.py:848:21: PGH003 Use specific rule codes when ignoring type issues
    |
846 |             )
847 |
848 |     return wrapper  # type: ignore
    |                     ^^^^^^^^^^^^^^ PGH003
    |

src/services/errors.py:888:25: PGH003 Use specific rule codes when ignoring type issues
    |
886 |             return await func(*bound_args.args, **bound_args.kwargs)
887 |
888 |         return wrapper  # type: ignore
    |                         ^^^^^^^^^^^^^^ PGH003
889 |
890 |     return decorator
    |

src/services/fastapi/background.py:90:13: TRY004 Prefer `TypeError` exception for invalid type
   |
88 |         if not callable(self.func):
89 |             msg = "Task function must be callable"
90 |             raise ValueError(msg)
   |             ^^^^^^^^^^^^^^^^^^^^^ TRY004
91 |         if self.max_retries < 0:
92 |             msg = "Max retries cannot be negative"
   |

src/services/fastapi/background.py:261:13: TRY300 Consider moving this statement to an `else` block
    |
259 |                 f"Task {task_id} submitted successfully"
260 |             )  # TODO: Convert f-string to logging format
261 |             return task_id
    |             ^^^^^^^^^^^^^^ TRY300
262 |         except asyncio.QueueFull as e:
263 |             # Remove from storage if queue is full
    |

src/services/fastapi/background.py:583:12: PLW0603 Using the global statement to update `_task_manager` is discouraged
    |
582 |     """
583 |     global _task_manager
    |            ^^^^^^^^^^^^^ PLW0603
584 |     if _task_manager is None:
585 |         _task_manager = BackgroundTaskManager()
    |

src/services/fastapi/background.py:599:12: PLW0603 Using the global statement to update `_task_manager` is discouraged
    |
598 |     """
599 |     global _task_manager
    |            ^^^^^^^^^^^^^ PLW0603
600 |     if _task_manager is None:
601 |         _task_manager = BackgroundTaskManager(max_workers, max_queue_size)
    |

src/services/fastapi/background.py:607:12: PLW0603 Using the global statement to update `_task_manager` is discouraged
    |
605 | async def cleanup_task_manager() -> None:
606 |     """Clean up the global background task manager."""
607 |     global _task_manager
    |            ^^^^^^^^^^^^^ PLW0603
608 |     if _task_manager:
609 |         await _task_manager.stop()
    |

src/services/fastapi/dependencies/core.py:169:12: PLW0603 Using the global statement to update `_container` is discouraged
    |
168 |     """
169 |     global _container
    |            ^^^^^^^^^^ PLW0603
170 |     if _container is None:
171 |         _container = DependencyContainer()
    |

src/services/fastapi/dependencies/core.py:177:12: PLW0603 Using the global statement to update `_container` is discouraged
    |
175 | async def cleanup_dependencies() -> None:
176 |     """Clean up the global dependency container."""
177 |     global _container
    |            ^^^^^^^^^^ PLW0603
178 |     if _container:
179 |         await _container.cleanup()
    |

src/services/fastapi/dependencies/core.py:426:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
424 |             health["services"]["embeddings"] = {"status": "healthy"}
425 |         except (
426 |             redis.RedisError if redis else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
427 |             ConnectionError,
428 |             TimeoutError,
    |

src/services/fastapi/dependencies/core.py:439:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
437 |             health["services"]["cache"] = {"status": "healthy"}
438 |         except (
439 |             redis.RedisError if redis else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
440 |             ConnectionError,
441 |             TimeoutError,
    |

src/services/fastapi/middleware/compression.py:163:13: TRY300 Consider moving this statement to an `else` block
    |
161 |             )
162 |
163 |             return compressed_response
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
164 |
165 |         except (ValueError, TypeError, UnicodeDecodeError) as e:
    |

src/services/fastapi/middleware/compression.py:317:13: TRY300 Consider moving this statement to an `else` block
    |
315 |             )
316 |
317 |             return compressed_response
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
318 |
319 |         except (ValueError, TypeError, UnicodeDecodeError) as e:
    |

src/services/fastapi/middleware/performance.py:175:13: TRY300 Consider moving this statement to an `else` block
    |
173 |                 response.headers["X-Memory-Delta"] = f"{memory_delta:.2f}"
174 |
175 |             return response
    |             ^^^^^^^^^^^^^^^ TRY300
176 |
177 |         except (
    |

src/services/fastapi/middleware/performance.py:181:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
179 |             TimeoutError,
180 |             ValueError,
181 |             httpx.RequestError if httpx else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
182 |         ):
183 |             # Record failed request metrics
    |

src/services/fastapi/middleware/performance.py:438:30: ARG001 Unused function argument: `app`
    |
437 | @asynccontextmanager
438 | async def optimized_lifespan(app):
    |                              ^^^ ARG001
439 |     """Optimized application lifespan with uvloop and service warming.
    |

src/services/fastapi/middleware/security.py:249:13: TRY300 Consider moving this statement to an `else` block
    |
247 |                 pipe.expire(rate_limit_key, self.config.rate_limit_window)
248 |                 await pipe.execute()
249 |             return True
    |             ^^^^^^^^^^^ TRY300
250 |
251 |         except (redis.RedisError, ConnectionError, TimeoutError, ValueError) as e:
    |

src/services/fastapi/middleware/security.py:308:13: TRY300 Consider moving this statement to an `else` block
    |
306 |                 logger.info("Redis connection restored")
307 |                 self._redis_healthy = True
308 |             return True
    |             ^^^^^^^^^^^ TRY300
309 |
310 |         except (redis.RedisError, ConnectionError, TimeoutError, ValueError) as e:
    |

src/services/fastapi/middleware/timeout.py:99:13: TRY300 Consider moving this statement to an `else` block
    |
 97 |                 self._record_success(endpoint)
 98 |
 99 |             return response
    |             ^^^^^^^^^^^^^^^ TRY300
100 |
101 |         except TimeoutError:
    |

src/services/fastapi/middleware/tracing.py:152:13: TRY300 Consider moving this statement to an `else` block
    |
150 |                 await self._log_response(request, response, correlation_id, duration)
151 |
152 |             return response
    |             ^^^^^^^^^^^^^^^ TRY300
153 |
154 |         except Exception as e:
    |

src/services/fastapi/middleware/tracing.py:240:17: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
238 |                     log_data["response_body"] = _safe_escape_for_logging(body)
239 |             except (
240 |                 httpx.HTTPError if httpx else Exception,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
241 |                 httpx.ResponseNotRead if httpx else Exception,
242 |                 ValueError,
    |

src/services/fastapi/middleware/tracing.py:241:17: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
239 |             except (
240 |                 httpx.HTTPError if httpx else Exception,
241 |                 httpx.ResponseNotRead if httpx else Exception,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
242 |                 ValueError,
243 |             ) as e:
    |

src/services/fastapi/middleware/tracing.py:282:17: TRY300 Consider moving this statement to an `else` block
    |
280 |                 if truncated:
281 |                     body_str += f"... (truncated at {self.max_body_size} bytes)"
282 |                 return body_str
    |                 ^^^^^^^^^^^^^^^ TRY300
283 |             except UnicodeDecodeError:
284 |                 return f"<binary data: {len(body)} bytes>"
    |

src/services/fastapi/middleware/tracing.py:319:17: TRY300 Consider moving this statement to an `else` block
    |
317 |                 if truncated:
318 |                     body_str += f"... (truncated at {self.max_body_size} bytes)"
319 |                 return body_str
    |                 ^^^^^^^^^^^^^^^ TRY300
320 |             except UnicodeDecodeError:
321 |                 return f"<binary data: {len(body)} bytes>"
    |

src/services/fastapi/middleware/tracing.py:432:17: TRY300 Consider moving this statement to an `else` block
    |
430 |                     span.set_status(self.Status(self.StatusCode.OK))
431 |
432 |                 return response
    |                 ^^^^^^^^^^^^^^^ TRY300
433 |
434 |             except Exception as e:
    |

src/services/fastapi/routers/rag.py:1:1: INP001 File `src/services/fastapi/routers/rag.py` is part of an implicit namespace package. Add an `__init__.py`.
src/services/fastapi/routers/rag.py:12:1: TID252 Prefer absolute imports over relative imports from parent modules
   |
10 |   from fastapi import APIRouter, HTTPException, status
11 |
12 | / from ...dependencies import (
13 | |     ConfigDep,
14 | |     RAGGeneratorDep,
15 | |     RAGRequest,
16 | |     RAGResponse,
17 | |     clear_rag_cache,
18 | |     generate_rag_answer,
19 | |     get_rag_metrics,
20 | | )
   | |_^ TID252
   |
   = help: Replace relative imports from parent modules with absolute imports

src/services/fastapi/routers/rag.py:12:1: TID252 Prefer absolute imports over relative imports from parent modules
   |
10 |   from fastapi import APIRouter, HTTPException, status
11 |
12 | / from ...dependencies import (
13 | |     ConfigDep,
14 | |     RAGGeneratorDep,
15 | |     RAGRequest,
16 | |     RAGResponse,
17 | |     clear_rag_cache,
18 | |     generate_rag_answer,
19 | |     get_rag_metrics,
20 | | )
   | |_^ TID252
   |
   = help: Replace relative imports from parent modules with absolute imports

src/services/fastapi/routers/rag.py:12:1: TID252 Prefer absolute imports over relative imports from parent modules
   |
10 |   from fastapi import APIRouter, HTTPException, status
11 |
12 | / from ...dependencies import (
13 | |     ConfigDep,
14 | |     RAGGeneratorDep,
15 | |     RAGRequest,
16 | |     RAGResponse,
17 | |     clear_rag_cache,
18 | |     generate_rag_answer,
19 | |     get_rag_metrics,
20 | | )
   | |_^ TID252
   |
   = help: Replace relative imports from parent modules with absolute imports

src/services/fastapi/routers/rag.py:12:1: TID252 Prefer absolute imports over relative imports from parent modules
   |
10 |   from fastapi import APIRouter, HTTPException, status
11 |
12 | / from ...dependencies import (
13 | |     ConfigDep,
14 | |     RAGGeneratorDep,
15 | |     RAGRequest,
16 | |     RAGResponse,
17 | |     clear_rag_cache,
18 | |     generate_rag_answer,
19 | |     get_rag_metrics,
20 | | )
   | |_^ TID252
   |
   = help: Replace relative imports from parent modules with absolute imports

src/services/fastapi/routers/rag.py:12:1: TID252 Prefer absolute imports over relative imports from parent modules
   |
10 |   from fastapi import APIRouter, HTTPException, status
11 |
12 | / from ...dependencies import (
13 | |     ConfigDep,
14 | |     RAGGeneratorDep,
15 | |     RAGRequest,
16 | |     RAGResponse,
17 | |     clear_rag_cache,
18 | |     generate_rag_answer,
19 | |     get_rag_metrics,
20 | | )
   | |_^ TID252
   |
   = help: Replace relative imports from parent modules with absolute imports

src/services/fastapi/routers/rag.py:12:1: TID252 Prefer absolute imports over relative imports from parent modules
   |
10 |   from fastapi import APIRouter, HTTPException, status
11 |
12 | / from ...dependencies import (
13 | |     ConfigDep,
14 | |     RAGGeneratorDep,
15 | |     RAGRequest,
16 | |     RAGResponse,
17 | |     clear_rag_cache,
18 | |     generate_rag_answer,
19 | |     get_rag_metrics,
20 | | )
   | |_^ TID252
   |
   = help: Replace relative imports from parent modules with absolute imports

src/services/fastapi/routers/rag.py:12:1: TID252 Prefer absolute imports over relative imports from parent modules
   |
10 |   from fastapi import APIRouter, HTTPException, status
11 |
12 | / from ...dependencies import (
13 | |     ConfigDep,
14 | |     RAGGeneratorDep,
15 | |     RAGRequest,
16 | |     RAGResponse,
17 | |     clear_rag_cache,
18 | |     generate_rag_answer,
19 | |     get_rag_metrics,
20 | | )
   | |_^ TID252
   |
   = help: Replace relative imports from parent modules with absolute imports

src/services/fastapi/routers/rag.py:96:9: TRY300 Consider moving this statement to an `else` block
    |
 94 |       try:
 95 |           metrics = await get_rag_metrics(rag_generator)
 96 | /         return {
 97 | |             "status": "success",
 98 | |             "metrics": metrics,
 99 | |         }
    | |_________^ TRY300
100 |       except Exception as e:
101 |           logger.exception("Failed to get RAG metrics")
    |

src/services/functional/circuit_breaker.py:195:13: TRY300 Consider moving this statement to an `else` block
    |
193 |             await self._record_success(execution_time)
194 |
195 |             return result
    |             ^^^^^^^^^^^^^ TRY300
196 |
197 |         except self.config.monitored_exceptions:
    |

src/services/functional/circuit_breaker.py:344:9: SLF001 Private member accessed: `_circuit_breaker`
    |
343 |         # Attach circuit breaker for metrics access
344 |         wrapper._circuit_breaker = breaker  # type: ignore
    |         ^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
345 |         return wrapper
    |

src/services/functional/circuit_breaker.py:344:45: PGH003 Use specific rule codes when ignoring type issues
    |
343 |         # Attach circuit breaker for metrics access
344 |         wrapper._circuit_breaker = breaker  # type: ignore
    |                                             ^^^^^^^^^^^^^^ PGH003
345 |         return wrapper
    |

src/services/hyde/cache.py:141:13: TRY300 Consider moving this statement to an `else` block
    |
139 |                 return embedding
140 |             self.cache_misses += 1
141 |             return None
    |             ^^^^^^^^^^^ TRY300
142 |
143 |         except (
    |

src/services/hyde/cache.py:144:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
143 |         except (
144 |             redis.RedisError if redis else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
145 |             ConnectionError,
146 |             TimeoutError,
    |

src/services/hyde/cache.py:210:13: TRY300 Consider moving this statement to an `else` block
    |
208 |                 )  # TODO: Convert f-string to logging format
209 |
210 |             return success
    |             ^^^^^^^^^^^^^^ TRY300
211 |
212 |         except (
    |

src/services/hyde/cache.py:213:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
212 |         except (
213 |             redis.RedisError if redis else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
214 |             ConnectionError,
215 |             TimeoutError,
    |

src/services/hyde/cache.py:253:13: TRY300 Consider moving this statement to an `else` block
    |
251 |                 return cached_docs
252 |             self.cache_misses += 1
253 |             return None
    |             ^^^^^^^^^^^ TRY300
254 |
255 |         except (
    |

src/services/hyde/cache.py:256:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
255 |         except (
256 |             redis.RedisError if redis else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
257 |             ConnectionError,
258 |             TimeoutError,
    |

src/services/hyde/cache.py:314:13: TRY300 Consider moving this statement to an `else` block
    |
312 |                 )  # TODO: Convert f-string to logging format
313 |
314 |             return success
    |             ^^^^^^^^^^^^^^ TRY300
315 |
316 |         except (
    |

src/services/hyde/cache.py:317:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
316 |         except (
317 |             redis.RedisError if redis else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
318 |             ConnectionError,
319 |             TimeoutError,
    |

src/services/hyde/cache.py:357:13: TRY300 Consider moving this statement to an `else` block
    |
355 |                 return cached_results
356 |             self.cache_misses += 1
357 |             return None
    |             ^^^^^^^^^^^ TRY300
358 |
359 |         except (
    |

src/services/hyde/cache.py:360:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
359 |         except (
360 |             redis.RedisError if redis else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
361 |             ConnectionError,
362 |             TimeoutError,
    |

src/services/hyde/cache.py:419:13: TRY300 Consider moving this statement to an `else` block
    |
417 |                 )  # TODO: Convert f-string to logging format
418 |
419 |             return success
    |             ^^^^^^^^^^^^^^ TRY300
420 |
421 |         except (
    |

src/services/hyde/cache.py:422:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
421 |         except (
422 |             redis.RedisError if redis else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
423 |             ConnectionError,
424 |             TimeoutError,
    |

src/services/hyde/cache.py:461:17: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
460 |             except (
461 |                 redis.RedisError if redis else Exception,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
462 |                 ConnectionError,
463 |                 TimeoutError,
    |

src/services/hyde/cache.py:509:13: TRY300 Consider moving this statement to an `else` block
    |
507 |             )
508 |
509 |             return success_count > 0
    |             ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
510 |
511 |         except (
    |

src/services/hyde/cache.py:512:13: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
511 |         except (
512 |             redis.RedisError if redis else Exception,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
513 |             ConnectionError,
514 |             TimeoutError,
    |

src/services/hyde/engine.py:210:13: TRY300 Consider moving this statement to an `else` block
    |
208 |                 logger.debug("HyDE search completed in {search_time:.2f}s for query")
209 |
210 |             return results
    |             ^^^^^^^^^^^^^^ TRY300
211 |
212 |         except Exception as e:
    |

src/services/hyde/engine.py:326:13: TRY300 Consider moving this statement to an `else` block
    |
324 |             # Basic reranking fallback (could implement BGE reranking here)
325 |             logger.debug("Reranking not available, returning original results")
326 |             return results
    |             ^^^^^^^^^^^^^^ TRY300
327 |
328 |         except (TimeoutError, AttributeError, RuntimeError, ValueError):
    |

src/services/hyde/generator.py:187:13: TRY300 Consider moving this statement to an `else` block
    |
185 |                 )
186 |
187 |             return result
    |             ^^^^^^^^^^^^^ TRY300
188 |
189 |         except Exception as e:
    |

src/services/integration/modern_examples.py:1:1: INP001 File `src/services/integration/modern_examples.py` is part of an implicit namespace package. Add an `__init__.py`.
src/services/integration/modern_examples.py:168:13: TRY300 Consider moving this statement to an `else` block
    |
166 |             count = await self.cache_manager.invalidate_pattern(pattern)
167 |             logger.info("Invalidated %s search cache entries", count)
168 |             return True
    |             ^^^^^^^^^^^ TRY300
169 |         except Exception:
170 |             logger.exception("Failed to invalidate search cache")
    |

src/services/integration/modern_examples.py:225:13: TRY300 Consider moving this statement to an `else` block
    |
223 |         try:
224 |             embedding = await service.embedding_service.generate_embedding(text, model)
225 |             return {"embedding": embedding, "model": model}
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
226 |         except Exception as e:
227 |             logger.exception("Embedding generation failed")
    |

src/services/integration/modern_examples.py:228:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
226 |         except Exception as e:
227 |             logger.exception("Embedding generation failed")
228 |             raise HTTPException(status_code=500, detail=str(e))
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
229 |
230 |     @app.get("/search")
    |

src/services/integration/modern_examples.py:243:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
241 |         except Exception as e:
242 |             logger.exception("Search failed")
243 |             raise HTTPException(status_code=500, detail=str(e))
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
244 |
245 |     @app.get("/health/modern")
    |

src/services/integration/modern_examples.py:273:13: TRY300 Consider moving this statement to an `else` block
    |
271 |         try:
272 |             success = await service.cache_manager.clear()
273 |             return {"success": success, "message": "Cache cleared"}
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
274 |         except Exception as e:
275 |             logger.exception("Cache clear failed")
    |

src/services/integration/modern_examples.py:276:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
274 |         except Exception as e:
275 |             logger.exception("Cache clear failed")
276 |             raise HTTPException(status_code=500, detail=str(e))
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
277 |
278 |     @app.post("/admin/circuit-breaker/{service_name}/reset")
    |

src/services/integration/modern_examples.py:288:13: TRY300 Consider moving this statement to an `else` block
    |
286 |         try:
287 |             success = await service.circuit_breaker_manager.reset_breaker(service_name)
288 |             return {"success": success, "service": service_name}
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
289 |         except Exception as e:
290 |             logger.exception("Circuit breaker reset failed")
    |

src/services/integration/modern_examples.py:291:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
289 |         except Exception as e:
290 |             logger.exception("Circuit breaker reset failed")
291 |             raise HTTPException(status_code=500, detail=str(e))
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
292 |
293 |     return app
    |

src/services/integration/modern_examples.py:304:31: ARG001 Unused function argument: `text`
    |
302 |     # Declarative caching with decorator
303 |     @cache_manager.cache_embeddings(ttl=3600)
304 |     async def cached_function(text: str) -> list[float]:
    |                               ^^^^ ARG001
305 |         # Expensive operation
306 |         await asyncio.sleep(1)
    |

src/services/integration/modern_examples.py:326:5: PLC0415 `import` should be at the top-level of a file
    |
325 |       # Example 3: Migration manager usage
326 | /     from src.services.migration.library_migration import (
327 | |         MigrationMode,
328 | |         create_migration_manager,
329 | |     )
    | |_____^ PLC0415
330 |
331 |       config = Config()  # Your config instance
    |

src/services/managers/crawling_manager.py:46:13: PLC0415 `import` should be at the top-level of a file
   |
45 |         try:
46 |             from src.services.crawling.manager import CrawlManager as CoreManager
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
47 |
48 |             self._core_manager = CoreManager(
   |

src/services/managers/crawling_manager.py:363:13: TRY300 Consider moving this statement to an `else` block
    |
361 |                 }
362 |
363 |             return extracted
    |             ^^^^^^^^^^^^^^^^ TRY300
364 |
365 |         except Exception as e:
    |

src/services/managers/crawling_manager.py:397:9: PLC0415 `import` should be at the top-level of a file
    |
395 |             raise CrawlServiceError(msg)
396 |
397 |         import asyncio
    |         ^^^^^^^^^^^^^^ PLC0415
398 |
399 |         semaphore = asyncio.Semaphore(max_concurrent)
    |

src/services/managers/crawling_manager.py:425:13: TRY300 Consider moving this statement to an `else` block
    |
423 |                     processed_results.append(result)
424 |
425 |             return processed_results
    |             ^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
426 |
427 |         except Exception as e:
    |

src/services/managers/database_manager.py:14:12: TC004 Move import `redis` out of type-checking block. Import is used for more than type hinting.
   |
13 | if TYPE_CHECKING:
14 |     import redis
   |            ^^^^^ TC004
15 |     from qdrant_client.async_qdrant_client import AsyncQdrantClient
   |
   = help: Move out of type-checking block

src/services/managers/database_manager.py:35:11: TRY003 Avoid specifying long messages outside the exception class
   |
33 | def _raise_required_services_not_available() -> None:
34 |     """Raise ImportError for required services not available."""
35 |     raise ImportError("Required services not available")
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
   |

src/services/managers/database_manager.py:35:23: EM101 Exception must not use a string literal, assign to variable first
   |
33 | def _raise_required_services_not_available() -> None:
34 |     """Raise ImportError for required services not available."""
35 |     raise ImportError("Required services not available")
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
   |
   = help: Assign to variable; remove string literal

src/services/managers/database_manager.py:75:19: TRY003 Avoid specifying long messages outside the exception class
   |
73 |         # Initialize cache manager
74 |         if CacheManager is None:
75 |             raise ImportError("CacheManager not available")
   |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
76 |
77 |         self._cache_manager = CacheManager(
   |

src/services/managers/database_manager.py:75:31: EM101 Exception must not use a string literal, assign to variable first
   |
73 |         # Initialize cache manager
74 |         if CacheManager is None:
75 |             raise ImportError("CacheManager not available")
   |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
76 |
77 |         self._cache_manager = CacheManager(
   |
   = help: Assign to variable; remove string literal

src/services/managers/database_manager.py:130:60: TRY401 Redundant exception object included in `logging.exception` call
    |
128 |             return [col.name for col in collections.collections]
129 |         except Exception as e:
130 |             logger.exception(f"Failed to get collections: {e}")
    |                                                            ^ TRY401
131 |             msg = f"Failed to get collections: {e}"
132 |             raise APIError(msg) from e
    |

src/services/managers/database_manager.py:155:13: TRY300 Consider moving this statement to an `else` block
    |
153 |         try:
154 |             await self._qdrant_service.upsert_points(collection_name, points)
155 |             return True
    |             ^^^^^^^^^^^ TRY300
156 |         except Exception as e:
157 |             logger.exception(f"Failed to store embeddings: {e}")
    |

src/services/managers/database_manager.py:157:61: TRY401 Redundant exception object included in `logging.exception` call
    |
155 |             return True
156 |         except Exception as e:
157 |             logger.exception(f"Failed to store embeddings: {e}")
    |                                                             ^ TRY401
158 |             msg = f"Failed to store embeddings: {e}"
159 |             raise APIError(msg) from e
    |

src/services/managers/database_manager.py:194:59: TRY401 Redundant exception object included in `logging.exception` call
    |
192 |             )
193 |         except Exception as e:
194 |             logger.exception(f"Failed to search vectors: {e}")
    |                                                           ^ TRY401
195 |             msg = f"Failed to search vectors: {e}"
196 |             raise APIError(msg) from e
    |

src/services/managers/database_manager.py:281:13: TRY300 Consider moving this statement to an `else` block
    |
279 |         try:
280 |             await self._redis_client.ping()
281 |             return True
    |             ^^^^^^^^^^^ TRY300
282 |         except (redis.RedisError, ConnectionError, TimeoutError, ValueError) as e:
283 |             logger.warning(
    |

src/services/managers/database_manager.py:304:13: TRY300 Consider moving this statement to an `else` block
    |
302 |         try:
303 |             await self._redis_client.set(key, value, ex=ex)
304 |             return True
    |             ^^^^^^^^^^^ TRY300
305 |         except (redis.RedisError, ConnectionError, TimeoutError, ValueError) as e:
306 |             logger.warning(
    |

src/services/managers/embedding_manager.py:34:11: TRY003 Avoid specifying long messages outside the exception class
   |
32 | def _raise_core_manager_not_available() -> None:
33 |     """Raise ImportError for CoreManager not available."""
34 |     raise ImportError("CoreManager not available")
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
   |

src/services/managers/embedding_manager.py:34:23: EM101 Exception must not use a string literal, assign to variable first
   |
32 | def _raise_core_manager_not_available() -> None:
33 |     """Raise ImportError for CoreManager not available."""
34 |     raise ImportError("CoreManager not available")
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
   |
   = help: Assign to variable; remove string literal

src/services/managers/embedding_manager.py:39:11: TRY003 Avoid specifying long messages outside the exception class
   |
37 | def _raise_quality_tier_not_available() -> None:
38 |     """Raise ImportError for QualityTier not available."""
39 |     raise ImportError("QualityTier not available")
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
   |

src/services/managers/embedding_manager.py:39:23: EM101 Exception must not use a string literal, assign to variable first
   |
37 | def _raise_quality_tier_not_available() -> None:
38 |     """Raise ImportError for QualityTier not available."""
39 |     raise ImportError("QualityTier not available")
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
   |
   = help: Assign to variable; remove string literal

src/services/managers/embedding_manager.py:308:19: TRY003 Avoid specifying long messages outside the exception class
    |
306 |         # Convert dict back to TextAnalysis for core manager
307 |         if QualityTier is None or TextAnalysis is None:
308 |             raise ImportError("Required classes not available")
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY003
309 |
310 |         analysis = TextAnalysis(
    |

src/services/managers/embedding_manager.py:308:31: EM101 Exception must not use a string literal, assign to variable first
    |
306 |         # Convert dict back to TextAnalysis for core manager
307 |         if QualityTier is None or TextAnalysis is None:
308 |             raise ImportError("Required classes not available")
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ EM101
309 |
310 |         analysis = TextAnalysis(
    |
    = help: Assign to variable; remove string literal

src/services/managers/monitoring_manager.py:54:13: PLC0415 `import` should be at the top-level of a file
   |
52 |         # Initialize metrics registry
53 |         try:
54 |             from src.services.monitoring.metrics import get_metrics_registry
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
55 |
56 |             self._metrics_registry = get_metrics_registry()
   |

src/services/managers/monitoring_manager.py:63:13: PLC0415 `import` should be at the top-level of a file
   |
61 |         # Initialize performance monitor
62 |         try:
63 |             from src.services.monitoring.performance_monitor import PerformanceMonitor
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
64 |
65 |             self._performance_monitor = PerformanceMonitor()
   |

src/services/managers/monitoring_manager.py:312:13: TRY300 Consider moving this statement to an `else` block
    |
310 |             self.increment_counter(f"{operation_name}_total", {"status": "success"})
311 |
312 |             return result
    |             ^^^^^^^^^^^^^ TRY300
313 |
314 |         except Exception:
    |

src/services/middleware/rate_limiting.py:1:1: INP001 File `src/services/middleware/rate_limiting.py` is part of an implicit namespace package. Add an `__init__.py`.
src/services/middleware/rate_limiting.py:167:13: TRY300 Consider moving this statement to an `else` block
    |
165 |               # This would require extending slowapi or accessing internal state
166 |               # For now, return basic information
167 | /             return {
168 | |                 "key": key,
169 | |                 "limiter_storage": self.redis_url,
170 | |                 "default_limits": self.limiter.default_limits,
171 | |             }
    | |_____________^ TRY300
172 |           except Exception as e:
173 |               logger.exception("Error getting current limits")
    |

src/services/middleware/rate_limiting.py:188:27: SLF001 Private member accessed: `_storage`
    |
186 |             # This would require accessing the limiter's storage directly
187 |             if hasattr(self.limiter, "_storage"):
188 |                 storage = self.limiter._storage
    |                           ^^^^^^^^^^^^^^^^^^^^^ SLF001
189 |                 if hasattr(storage, "clear"):
190 |                     await storage.clear(key)
    |

src/services/middleware/rate_limiting.py:197:13: TRY300 Consider moving this statement to an `else` block
    |
196 |             logger.warning("Rate limit reset not supported")
197 |             return False
    |             ^^^^^^^^^^^^ TRY300
198 |         except Exception:
199 |             logger.exception("Error resetting limits for {key}")
    |

src/services/migration/library_migration.py:1:1: INP001 File `src/services/migration/library_migration.py` is part of an implicit namespace package. Add an `__init__.py`.
src/services/migration/library_migration.py:133:13: PLC0415 `import` should be at the top-level of a file
    |
131 |         try:
132 |             # Import legacy services
133 |             from src.services.cache.manager import CacheManager
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
134 |             from src.services.functional.circuit_breaker import CircuitBreaker
    |

src/services/migration/library_migration.py:134:13: PLC0415 `import` should be at the top-level of a file
    |
132 |             # Import legacy services
133 |             from src.services.cache.manager import CacheManager
134 |             from src.services.functional.circuit_breaker import CircuitBreaker
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
135 |
136 |             # Create legacy instances
    |

src/services/migration/library_migration.py:168:13: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
166 |         if self.migration_config.performance_monitoring:
167 |             # Start background monitoring task
168 |             asyncio.create_task(self._monitoring_loop())
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
169 |             logger.info("Performance monitoring enabled")
    |

src/services/migration/library_migration.py:274:9: SIM103 Return the condition directly
    |
272 |           legacy_latency = legacy_metrics.get("avg_latency", float("inf"))
273 |
274 | /         if modern_latency <= legacy_latency * 1.2:  # Allow 20% performance degradation
275 | |             return True
276 | |
277 | |         return False
    | |____________________^ SIM103
278 |
279 |       async def _track_parallel_performance(self, service: str, operation: str) -> None:
    |
    = help: Inline condition

src/services/migration/library_migration.py:367:13: TRY300 Consider moving this statement to an `else` block
    |
365 |                 f"Unknown service for migration: {service}"
366 |             )  # TODO: Convert f-string to logging format
367 |             return False
    |             ^^^^^^^^^^^^ TRY300
368 |         except Exception:
369 |             logger.exception("Error forcing migration of {service}")
    |

src/services/monitoring/health.py:117:13: TRY300 Consider moving this statement to an `else` block
    |
115 |             duration_ms = (time.time() - start_time) * 1000
116 |             result.duration_ms = duration_ms
117 |             return result
    |             ^^^^^^^^^^^^^ TRY300
118 |
119 |         except TimeoutError:
    |

src/services/monitoring/health.py:365:17: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
364 |             except (
365 |                 httpx.HTTPError if httpx else Exception,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
366 |                 httpx.TimeoutException if httpx else Exception,
367 |                 ConnectionError,
    |

src/services/monitoring/health.py:366:17: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
364 |             except (
365 |                 httpx.HTTPError if httpx else Exception,
366 |                 httpx.TimeoutException if httpx else Exception,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
367 |                 ConnectionError,
368 |             ) as e:
    |

src/services/monitoring/initialization.py:20:26: PGH003 Use specific rule codes when ignoring type issues
   |
18 |     from fastapi.responses import JSONResponse
19 | except ImportError:
20 |     JSONResponse = None  # type: ignore
   |                          ^^^^^^^^^^^^^^ PGH003
   |

src/services/monitoring/metrics.py:417:21: TRY300 Consider moving this statement to an `else` block
    |
415 |                         ).observe(len(result))
416 |
417 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
418 |
419 |                 except (
    |

src/services/monitoring/metrics.py:445:21: TRY300 Consider moving this statement to an `else` block
    |
443 |                         provider=provider, model=model, status="success"
444 |                     ).inc()
445 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
446 |
447 |                 except (
    |

src/services/monitoring/metrics.py:495:21: TRY300 Consider moving this statement to an `else` block
    |
493 |                             cache_type=cache_type, cache_name=cache_name
494 |                         ).inc()
495 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
496 |                 except (ConnectionError, RuntimeError, TimeoutError):
497 |                     self._metrics["cache_misses"].labels(
    |

src/services/monitoring/metrics.py:514:21: TRY300 Consider moving this statement to an `else` block
    |
512 |                             cache_type=cache_type, cache_name=cache_name
513 |                         ).inc()
514 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
515 |                 except (ConnectionError, RuntimeError, TimeoutError):
516 |                     self._metrics["cache_misses"].labels(
    |

src/services/monitoring/metrics.py:549:21: TRY300 Consider moving this statement to an `else` block
    |
547 |                         cache_type=cache_type, operation=operation, result="success"
548 |                     ).inc()
549 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
550 |
551 |                 except (ConnectionError, OSError, PermissionError):
    |

src/services/monitoring/metrics.py:572:21: TRY300 Consider moving this statement to an `else` block
    |
570 |                         cache_type=cache_type, operation=operation, result="success"
571 |                     ).inc()
572 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
573 |
574 |                 except (ConnectionError, OSError, PermissionError):
    |

src/services/monitoring/metrics.py:843:12: PLW0603 Using the global statement to update `_global_registry` is discouraged
    |
842 |     """
843 |     global _global_registry
    |            ^^^^^^^^^^^^^^^^ PLW0603
844 |     _global_registry = MetricsRegistry(config)
845 |     return _global_registry
    |

src/services/monitoring/middleware.py:276:46: SLF001 Private member accessed: `_metrics`
    |
274 |             self.metrics_registry
275 |             and hasattr(self.metrics_registry, "_metrics")
276 |             and "custom_request_duration" in self.metrics_registry._metrics
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
277 |         ):
278 |             # Record request duration by endpoint
    |

src/services/monitoring/middleware.py:279:13: SLF001 Private member accessed: `_metrics`
    |
277 |         ):
278 |             # Record request duration by endpoint
279 |             self.metrics_registry._metrics["custom_request_duration"].labels(
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
280 |                 method=method, endpoint=path, status_code=response.status_code
281 |             ).observe(duration)
    |

src/services/observability/config_instrumentation.py:169:21: TRY300 Consider moving this statement to an `else` block
    |
167 |                     )
168 |
169 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
170 |
171 |                 except Exception as e:
    |

src/services/observability/config_instrumentation.py:235:21: TRY300 Consider moving this statement to an `else` block
    |
233 |                     )
234 |
235 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
236 |
237 |                 except Exception as e:
    |

src/services/observability/config_instrumentation.py:324:21: TRY300 Consider moving this statement to an `else` block
    |
323 |                     span.set_status(Status(StatusCode.OK))
324 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
325 |
326 |                 except Exception as e:
    |

src/services/observability/config_instrumentation.py:378:21: TRY300 Consider moving this statement to an `else` block
    |
377 |                     span.set_status(Status(StatusCode.OK))
378 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
379 |
380 |                 except Exception as e:
    |

src/services/observability/config_instrumentation.py:460:21: TRY300 Consider moving this statement to an `else` block
    |
459 |                     span.set_status(Status(StatusCode.OK))
460 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
461 |
462 |                 except Exception as e:
    |

src/services/observability/config_instrumentation.py:503:21: TRY300 Consider moving this statement to an `else` block
    |
502 |                     span.set_status(Status(StatusCode.OK))
503 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
504 |
505 |                 except Exception as e:
    |

src/services/observability/dependencies.py:209:9: TRY300 Consider moving this statement to an `else` block
    |
207 |           enabled = observability_service["enabled"]
208 |
209 | /         return {
210 | |             "enabled": enabled,
211 | |             "service_name": config.service_name,
212 | |             "otlp_endpoint": config.otlp_endpoint if enabled else None,
213 | |             "instrumentation": {
214 | |                 "fastapi": config.instrument_fastapi if enabled else False,
215 | |                 "httpx": config.instrument_httpx if enabled else False,
216 | |                 "redis": config.instrument_redis if enabled else False,
217 | |                 "sqlalchemy": config.instrument_sqlalchemy if enabled else False,
218 | |             },
219 | |             "ai_tracking": {
220 | |                 "operations": config.track_ai_operations if enabled else False,
221 | |                 "costs": config.track_costs if enabled else False,
222 | |             },
223 | |             "status": "healthy" if enabled else "disabled",
224 | |         }
    | |_________^ TRY300
225 |
226 |       except Exception as e:
    |

src/services/observability/enterprise.py:27:38: F401 `src.config.Config` imported but unused
   |
26 | if TYPE_CHECKING:
27 |     from src.config import Config as EnterpriseConfigType
   |                                      ^^^^^^^^^^^^^^^^^^^^ F401
   |
   = help: Remove unused import: `src.config.Config`

src/services/observability/enterprise.py:724:9: SIM102 Use a single `if` statement instead of nested `if` statements
    |
722 |           self.distributed_tracer.finish_span(span, status)
723 |
724 | /         if status == TraceStatus.SUCCESS:
725 | |             # Record performance metrics
726 | |             if span.duration_ms:
    | |________________________________^ SIM102
727 |                   self.record_metric(
728 |                       "span.duration",
    |
    = help: Combine `if` statements using `and`

src/services/observability/init.py:38:21: ARG004 Unused static method argument: `args`
   |
36 |     class Resource:
37 |         @staticmethod
38 |         def create(*args, **kwargs):
   |                     ^^^^ ARG004
39 |             return None
   |

src/services/observability/init.py:38:29: ARG004 Unused static method argument: `kwargs`
   |
36 |     class Resource:
37 |         @staticmethod
38 |         def create(*args, **kwargs):
   |                             ^^^^^^ ARG004
39 |             return None
   |

src/services/observability/init.py:227:38: B025 try-except block with duplicate exception `ImportError`
    |
225 |         logger.warning("OpenTelemetry packages not available")
226 |         return False
227 |     except (OSError, AttributeError, ImportError, ModuleNotFoundError):
    |                                      ^^^^^^^^^^^ B025
228 |         logger.exception("Failed to initialize OpenTelemetry")
229 |         return False
    |

src/services/observability/metrics_bridge.py:218:17: SLF001 Private member accessed: `_metrics`
    |
216 |             try:
217 |                 status = "success" if success else "error"
218 |                 self.prometheus_registry._metrics["search_requests"].labels(
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
219 |                     collection=collection, status=status
220 |                 ).inc()
    |

src/services/observability/metrics_bridge.py:221:17: SLF001 Private member accessed: `_metrics`
    |
219 |                     collection=collection, status=status
220 |                 ).inc()
221 |                 self.prometheus_registry._metrics["search_duration"].labels(
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
222 |                     collection=collection, query_type=query_type
223 |                 ).observe(duration_ms / 1000)  # Convert to seconds for Prometheus
    |

src/services/observability/middleware.py:145:17: TRY300 Consider moving this statement to an `else` block
    |
143 |                     self._record_request_metrics(request, response, start_time)
144 |
145 |                 return response
    |                 ^^^^^^^^^^^^^^^ TRY300
146 |
147 |             except Exception as e:
    |

src/services/observability/performance.py:104:13: TRY300 Consider moving this statement to an `else` block
    |
102 |               net_recv_mb = net_io.bytes_recv / (1024 * 1024) if net_io else 0
103 |
104 | /             return {
105 | |                 "cpu_percent": cpu_percent,
106 | |                 "memory_used_mb": memory_used_mb,
107 | |                 "memory_percent": memory_percent,
108 | |                 "disk_read_mb": disk_read_mb,
109 | |                 "disk_write_mb": disk_write_mb,
110 | |                 "network_sent_mb": net_sent_mb,
111 | |                 "network_recv_mb": net_recv_mb,
112 | |             }
    | |_____________^ TRY300
113 |
114 |           except (ConnectionError, OSError, TimeoutError) as e:
    |

src/services/observability/tracking.py:182:21: TRY300 Consider moving this statement to an `else` block
    |
180 |                         span.set_attribute("function.result", str(result)[:100])
181 |
182 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
183 |
184 |                 except Exception as e:
    |

src/services/observability/tracking.py:226:21: TRY300 Consider moving this statement to an `else` block
    |
224 |                         span.set_attribute("function.result", str(result)[:100])
225 |
226 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
227 |
228 |                 except Exception as e:
    |

src/services/processing/algorithms.py:170:5: B019 Use of `functools.lru_cache` or `functools.cache` on methods can lead to memory leaks
    |
168 |         }
169 |
170 |     @functools.lru_cache(maxsize=1000)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B019
171 |     def analyze_text_optimized(self, text: str) -> TextAnalysisResult:
172 |         """Optimized O(n) text analysis replacing O(n²) implementation.
    |

src/services/processing/algorithms.py:180:9: PLC0415 `import` should be at the top-level of a file
    |
178 |             Comprehensive analysis results
179 |         """
180 |         import time
    |         ^^^^^^^^^^^ PLC0415
181 |
182 |         start_time = time.time()
    |

src/services/processing/algorithms.py:384:5: B019 Use of `functools.lru_cache` or `functools.cache` on methods can lead to memory leaks
    |
382 |         return min(1.0, english_indicators / total_words)
383 |
384 |     @functools.lru_cache(maxsize=500)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B019
385 |     def calculate_document_similarity_optimized(
386 |         self, text_a: str, text_b: str
    |

src/services/processing/algorithms.py:467:9: PLC0415 `import` should be at the top-level of a file
    |
465 |             Performance benchmark results
466 |         """
467 |         import time
    |         ^^^^^^^^^^^ PLC0415
468 |
469 |         results = {
    |

src/services/processing/batch_optimizer.py:32:22: UP046 Generic class `BatchProcessor` uses `Generic` subclass instead of type parameters
   |
32 | class BatchProcessor(Generic[T, R]):
   |                      ^^^^^^^^^^^^^ UP046
33 |     """Intelligent batch processing for optimal throughput."""
   |
   = help: Use type parameters

src/services/processing/batch_optimizer.py:82:13: RUF006 Store a reference to the return value of `asyncio.create_task`
   |
80 |         # Schedule delayed batch processing if not already processed
81 |         if not should_process:
82 |             asyncio.create_task(self._delayed_batch_processing())
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
83 |
84 |         return await future
   |

src/services/processing/parallel_integration.py:262:13: TRY300 Consider moving this statement to an `else` block
    |
260 |             await self._update_system_metrics(processing_time_ms, success=True)
261 |
262 |             return results
    |             ^^^^^^^^^^^^^^ TRY300
263 |
264 |         except Exception:
    |

src/services/query_processing/expansion.py:284:13: TRY300 Consider moving this statement to an `else` block
    |
282 |             )
283 |
284 |             return result
    |             ^^^^^^^^^^^^^ TRY300
285 |
286 |         except Exception as e:
    |

src/services/query_processing/expansion.py:658:29: RUF005 Consider `[original_term, *related_terms[:3]]` instead of concatenation
    |
656 |               if original_term in expanded_query:
657 |                   # Add related terms as OR alternatives
658 |                   all_terms = [original_term] + related_terms[
    |  _____________________________^
659 | |                     :3
660 | |                 ]  # Limit to avoid overly complex queries
    | |_________________^ RUF005
661 |                   term_expansion = f"({' OR '.join(all_terms)})"
662 |                   expanded_query = expanded_query.replace(
    |
    = help: Replace with `[original_term, *related_terms[:3]]`

src/services/query_processing/federated.py:447:13: TRY300 Consider moving this statement to an `else` block
    |
445 |             )
446 |
447 |             return result
    |             ^^^^^^^^^^^^^ TRY300
448 |
449 |         except Exception as e:
    |

src/services/query_processing/federated.py:699:13: TRY300 Consider moving this statement to an `else` block
    |
697 |                     collection_results.append(result)
698 |
699 |             return collection_results
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
700 |
701 |         except TimeoutError:
    |

src/services/query_processing/intent_classifier.py:703:13: TRY300 Consider moving this statement to an `else` block
    |
701 |                 scores[intent] = max(0.0, similarity)  # Ensure non-negative
702 |
703 |             return scores
    |             ^^^^^^^^^^^^^ TRY300
704 |
705 |         except (OSError, PermissionError):
    |

src/services/query_processing/orchestrator.py:352:32: SLF001 Private member accessed: `_initialized`
    |
351 |                         # Initialize RAG generator if needed
352 |                         if not self._rag_generator._initialized:
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
353 |                             await self.rag_generator.initialize()
    |

src/services/query_processing/orchestrator.py:415:13: TRY300 Consider moving this statement to an `else` block
    |
413 |             ) / self.stats["total_searches"]
414 |
415 |             return result
    |             ^^^^^^^^^^^^^ TRY300
416 |
417 |         except (OSError, PermissionError, RuntimeError):
    |

src/services/query_processing/orchestrator.py:497:17: TRY300 Consider moving this statement to an `else` block
    |
495 |                     )
496 |
497 |                 return results
    |                 ^^^^^^^^^^^^^^ TRY300
498 |
499 |             except (AttributeError, OSError, PermissionError):
    |

src/services/query_processing/orchestrator.py:610:36: SLF001 Private member accessed: `_initialized`
    |
609 |         # Cleanup RAG generator if initialized
610 |         if self._rag_generator and self._rag_generator._initialized:
    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
611 |             await self._rag_generator.cleanup()
    |

src/services/query_processing/preprocessor.py:228:29: ISC001 Implicitly concatenated string literals on one line
    |
227 |         # Normalize quotation marks
228 |         normalized = re.sub(r'[""' ",„]", '"', normalized)
    |                             ^^^^^^^^^^^^ ISC001
229 |
230 |         # Normalize hyphens and dashes
    |
    = help: Combine string literals

src/services/query_processing/ranking.py:419:13: TRY300 Consider moving this statement to an `else` block
    |
417 |             )
418 |
419 |             return result
    |             ^^^^^^^^^^^^^ TRY300
420 |
421 |         except Exception as e:
    |

src/services/query_processing/ranking.py:1005:13: TRY300 Consider moving this statement to an `else` block
     |
1003 |             if age_days <= 90:
1004 |                 return 0.02
1005 |             return 0.0
     |             ^^^^^^^^^^ TRY300
1006 |         except (ValueError, TypeError):
1007 |             return 0.0
     |

src/services/rag/generator.py:188:13: TRY300 Consider moving this statement to an `else` block
    |
186 |             self._update_metrics(metrics)
187 |
188 |             return result
    |             ^^^^^^^^^^^^^ TRY300
189 |
190 |         except Exception as e:
    |

src/services/rag/generator.py:352:13: TRY300 Consider moving this statement to an `else` block
    |
350 |                     reasoning_trace = [parts[1].strip()]
351 |
352 |             return answer, reasoning_trace
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
353 |
354 |         except TimeoutError:
    |

src/services/security/ai_security.py:64:33: RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
    |
 63 |       # Prompt injection patterns - comprehensive list covering various attack vectors
 64 |       PROMPT_INJECTION_PATTERNS = [
    |  _________________________________^
 65 | |         # Direct instruction override attempts
 66 | |         r"ignore\s+(?:all\s+)?previous\s+instructions?",
 67 | |         r"forget\s+(?:all\s+)?(?:previous\s+)?(?:instructions?|context|everything)",
 68 | |         r"disregard\s+(?:all\s+)?previous\s+instructions?",
 69 | |         r"override\s+(?:all\s+)?previous\s+instructions?",
 70 | |         # Role manipulation
 71 | |         r"act\s+as\s+(?:a\s+)?(?:different|new|another)\s+(?:ai|assistant|model|system)",
 72 | |         r"pretend\s+(?:you\s+are|to\s+be)\s+(?:a\s+)?(?:different|evil|malicious)",
 73 | |         r"roleplay\s+as\s+(?:a\s+)?(?:different|evil|malicious)",
 74 | |         r"you\s+are\s+now\s+(?:a\s+)?(?:different|evil|malicious|jailbroken)",
 75 | |         # System prompt manipulation
 76 | |         r"system\s*[:\-]\s*",
 77 | |         r"assistant\s*[:\-]\s*",
 78 | |         r"user\s*[:\-]\s*",
 79 | |         r"human\s*[:\-]\s*",
 80 | |         r"ai\s*[:\-]\s*",
 81 | |         # Root/admin privilege escalation
 82 | |         r"\broot\b.*\bprompt\b",
 83 | |         r"\badmin\b.*\bmode\b",
 84 | |         r"developer\s+mode",
 85 | |         r"debug\s+mode",
 86 | |         r"maintenance\s+mode",
 87 | |         # Popular jailbreak techniques
 88 | |         r"\bdan\b.*\bmode\b",
 89 | |         r"jailbreak",
 90 | |         r"unrestricted\s+mode",
 91 | |         r"god\s+mode",
 92 | |         r"bypass\s+(?:all\s+)?(?:restrictions?|limitations?|filters?)",
 93 | |         # Prompt structure manipulation
 94 | |         r"</?\s*prompt\s*>",
 95 | |         r"</?\s*system\s*>",
 96 | |         r"</?\s*instruction\s*>",
 97 | |         r"\[\s*system\s*\]",
 98 | |         r"\[\s*instruction\s*\]",
 99 | |         # Token manipulation attempts
100 | |         r"repeat\s+(?:the\s+)?(?:above|previous)\s+(?:\d+\s+)?(?:words?|tokens?)",
101 | |         r"output\s+(?:the\s+)?(?:above|previous)\s+(?:prompt|instruction|system)",
102 | |         r"what\s+(?:was|were)\s+(?:your|the)\s+(?:previous\s+)?instructions?",
103 | |         # Encoding/obfuscation attempts
104 | |         r"base64\s*[:\-]",
105 | |         r"rot13\s*[:\-]",
106 | |         r"hex\s*[:\-]",
107 | |         r"unicode\s*[:\-]",
108 | |         # Meta-prompt attacks
109 | |         r"print\s+(?:your|the)\s+(?:prompt|instructions?|system\s+message)",
110 | |         r"reveal\s+(?:your|the)\s+(?:prompt|instructions?|system\s+message)",
111 | |         r"show\s+(?:me\s+)?(?:your|the)\s+(?:prompt|instructions?|system\s+message)",
112 | |         # Conversation reset attempts
113 | |         r"start\s+(?:over|again|fresh|new)",
114 | |         r"reset\s+(?:conversation|chat|context)",
115 | |         r"new\s+(?:conversation|chat|session)",
116 | |         # Hypothetical scenario exploitation
117 | |         r"hypothetically",
118 | |         r"imagine\s+if",
119 | |         r"what\s+if\s+you\s+(?:were|could)",
120 | |         r"in\s+a\s+hypothetical\s+scenario",
121 | |         # Multiple language attempts
122 | |         r"en\s+español",
123 | |         r"auf\s+deutsch",
124 | |         r"en\s+français",
125 | |         # Chain of thought manipulation
126 | |         r"step\s+by\s+step",
127 | |         r"think\s+(?:step\s+by\s+step|aloud|through\s+this)",
128 | |         r"let'?s\s+think\s+about\s+this",
129 | |         # Function calling attempts
130 | |         r"function\s*\(",
131 | |         r"execute\s*\(",
132 | |         r"eval\s*\(",
133 | |         r"run\s*\(",
134 | |     ]
    | |_____^ RUF012
135 |
136 |       # Dangerous content patterns
    |

src/services/security/ai_security.py:137:34: RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
    |
136 |       # Dangerous content patterns
137 |       DANGEROUS_CONTENT_PATTERNS = [
    |  __________________________________^
138 | |         # Script injection
139 | |         r"<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>",
140 | |         r"javascript\s*:",
141 | |         r"vbscript\s*:",
142 | |         r"data\s*:\s*text\/html",
143 | |         r"data\s*:\s*application\/javascript",
144 | |         # Event handlers
145 | |         r"on\w+\s*=",
146 | |         r"onclick\s*=",
147 | |         r"onload\s*=",
148 | |         r"onerror\s*=",
149 | |         # URL schemes
150 | |         r"file\s*:\/\/",
151 | |         r"ftp\s*:\/\/",
152 | |         r"mailto\s*:",
153 | |         # HTML injection
154 | |         r"<\s*iframe\b",
155 | |         r"<\s*object\b",
156 | |         r"<\s*embed\b",
157 | |         r"<\s*form\b",
158 | |         # CSS injection
159 | |         r"expression\s*\(",
160 | |         r"@import\s+url",
161 | |         r"behavior\s*:",
162 | |         # Command injection
163 | |         r"&&\s*[a-zA-Z]",
164 | |         r"\|\|\s*[a-zA-Z]",
165 | |         r";\s*[a-zA-Z]",
166 | |         r"`[^`]*`",
167 | |         r"\$\([^)]*\)",
168 | |         # Path traversal
169 | |         r"\.\.\/+",
170 | |         r"\.\.\\+",
171 | |         r"%2e%2e%2f",
172 | |         r"%2e%2e%5c",
173 | |     ]
    | |_____^ RUF012
174 |
175 |       # Suspicious metadata keys/values
    |

src/services/security/ai_security.py:176:36: RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
    |
175 |       # Suspicious metadata keys/values
176 |       SUSPICIOUS_METADATA_PATTERNS = [
    |  ____________________________________^
177 | |         r"__proto__",
178 | |         r"constructor",
179 | |         r"prototype",
180 | |         r"eval",
181 | |         r"function",
182 | |         r"script",
183 | |         r"document",
184 | |         r"window",
185 | |         r"location",
186 | |         r"cookie",
187 | |         r"localStorage",
188 | |         r"sessionStorage",
189 | |     ]
    | |_____^ RUF012
190 |
191 |       def __init__(self, security_config: SecurityConfig | None = None):
    |

src/services/security/ai_security.py:279:17: PERF401 Use a list comprehension to create a transformed list
    |
277 |           for pattern in self.PROMPT_INJECTION_PATTERNS:
278 |               if re.search(pattern, text_lower, re.IGNORECASE | re.MULTILINE):
279 | /                 threats.append(
280 | |                     SecurityThreat(
281 | |                         threat_type="prompt_injection",
282 | |                         level=ThreatLevel.CRITICAL,
283 | |                         description="Potential prompt injection attempt detected",
284 | |                         pattern_matched=pattern,
285 | |                         suggested_action="Block request and log incident",
286 | |                     )
287 | |                 )
    | |_________________^ PERF401
288 |
289 |           # Check for dangerous content patterns
    |
    = help: Replace for loop with list comprehension

src/services/security/ai_security.py:292:17: PERF401 Use `list.extend` to create a transformed list
    |
290 |           for pattern in self.DANGEROUS_CONTENT_PATTERNS:
291 |               if re.search(pattern, text, re.IGNORECASE | re.MULTILINE):
292 | /                 threats.append(
293 | |                     SecurityThreat(
294 | |                         threat_type="content_injection",
295 | |                         level=ThreatLevel.HIGH,
296 | |                         description="Potentially dangerous content pattern detected",
297 | |                         pattern_matched=pattern,
298 | |                         suggested_action="Sanitize content or block request",
299 | |                     )
300 | |                 )
    | |_________________^ PERF401
301 |
302 |           # Check for excessive repetition (potential token flooding)
    |
    = help: Replace for loop with list.extend

src/services/security/ai_security.py:417:21: G101 Logging statement uses an `extra` field that clashes with a `LogRecord` field: `filename`
    |
415 |                 f"Document validation failed: {len(critical_threats)} critical threats",
416 |                 extra={
417 |                     "filename": filename,
    |                     ^^^^^^^^^^ G101
418 |                     "threats": [t.__dict__ for t in critical_threats],
419 |                 },
    |

src/services/security/ai_security.py:460:17: PERF401 Use `list.extend` to create a transformed list
    |
458 |           for ext in dangerous_extensions:
459 |               if filename.lower().endswith(ext):
460 | /                 threats.append(
461 | |                     SecurityThreat(
462 | |                         threat_type="dangerous_extension",
463 | |                         level=ThreatLevel.HIGH,
464 | |                         description=f"Potentially dangerous file extension: {ext}",
465 | |                         pattern_matched=ext,
466 | |                         suggested_action="Block file upload",
467 | |                     )
468 | |                 )
    | |_________________^ PERF401
469 |
470 |           return threats
    |
    = help: Replace for loop with list.extend

src/services/security/integration.py:304:12: PLW0603 Using the global statement to update `security_manager` is discouraged
    |
302 |         Configured security manager
303 |     """
304 |     global security_manager
    |            ^^^^^^^^^^^^^^^^ PLW0603
305 |
306 |     # Initialize security manager with config
    |

src/services/security/integration.py:351:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
349 |           except Exception as e:
350 |               logger.exception("Security health check failed")
351 | /             raise HTTPException(
352 | |                 status_code=503, detail=f"Security health check failed: {e!s}"
353 | |             )
    | |_____________^ B904
354 |
355 |       @app.get("/security/metrics")
    |

src/services/security/integration.py:384:60: B008 Do not perform function call `Depends` in argument defaults; instead, perform the call within the function, or read the default from a module-level singleton variable
    |
383 |     async def validate_api_key_dependency(
384 |         credentials: HTTPAuthorizationCredentials | None = Depends(security_scheme),
    |                                                            ^^^^^^^^^^^^^^^^^^^^^^^^ B008
385 |     ) -> bool:
386 |         """Dependency for API key validation."""
    |

src/services/security/middleware.py:199:17: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
197 |                       )
198 |               except ValueError:
199 | /                 raise HTTPException(
200 | |                     status_code=400, detail="Invalid content-length header"
201 | |                 )
    | |_________________^ B904
202 |
203 |           # Validate HTTP method
    |

src/services/security/middleware.py:406:55: S104 Possible binding to all interfaces
    |
405 |         # Check for suspicious patterns
406 |         suspicious_hosts = ["localhost", "127.0.0.1", "0.0.0.0"]
    |                                                       ^^^^^^^^^ S104
407 |         return host.lower() not in suspicious_hosts
    |

src/services/security/middleware.py:431:21: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
429 |                         self._validate_json_data(data)
430 |                 except json.JSONDecodeError:
431 |                     raise HTTPException(status_code=400, detail="Invalid JSON format")
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
432 |
433 |             # Handle form data
    |

src/services/security/middleware.py:439:13: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
438 |         except UnicodeDecodeError:
439 |             raise HTTPException(status_code=400, detail="Invalid request encoding")
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
440 |
441 |     def _validate_json_data(self, data: Any, depth: int = 0) -> None:
    |

src/services/security/middleware.py:490:21: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
488 |                   except HTTPException:
489 |                       # Re-raise with more context
490 | /                     raise HTTPException(
491 | |                         status_code=400, detail="Request contains prohibited content"
492 | |                     )
    | |_____________________^ B904
493 |
494 |       def _get_client_identifier(self, request: Request) -> str:
    |

src/services/security/monitoring.py:455:9: SIM102 Use a single `if` statement instead of nested `if` statements
    |
453 |           """
454 |           # Auto-block IPs with critical threats
455 | /         if event.severity == SecuritySeverity.CRITICAL:
456 | |             if event.event_type in (
457 | |                 SecurityEventType.AI_THREAT_DETECTED,
458 | |                 SecurityEventType.SUSPICIOUS_ACTIVITY,
459 | |             ):
    | |______________^ SIM102
460 |                   logger.critical(
461 |                       f"Critical event - consider blocking IP: {event.client_ip}",
    |
    = help: Combine `if` statements using `and`

src/services/security/monitoring.py:669:17: PERF401 Use `list.extend` to create a transformed list
    |
667 |               lines = ["timestamp,event_type,severity,client_ip,endpoint,method"]
668 |               for event in relevant_events:
669 | /                 lines.append(
670 | |                     f"{event.timestamp.isoformat()},{event.event_type.value},"
671 | |                     f"{event.severity.value},{event.client_ip},{event.endpoint},{event.method}"
672 | |                 )
    | |_________________^ PERF401
673 |               return "\n".join(lines)
674 |           msg = f"Unsupported export format: {file_format}"
    |
    = help: Replace for loop with list.extend

src/services/simple/search.py:44:13: PLC0415 `import` should be at the top-level of a file
   |
42 |         # Initialize basic vector search only
43 |         try:
44 |             from src.services.vector_db.service import VectorDBService
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
45 |
46 |             self.vector_db = VectorDBService()
   |

src/services/simple/search.py:103:13: TRY300 Consider moving this statement to an `else` block
    |
101 |             self._cache_result(cache_key, response)
102 |
103 |             return response
    |             ^^^^^^^^^^^^^^^ TRY300
104 |
105 |         except Exception as e:
    |

src/services/simple/search.py:121:9: PLC0415 `import` should be at the top-level of a file
    |
119 |         """Perform basic vector search without advanced features."""
120 |         # Generate embedding for query
121 |         from src.config import Config
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
122 |         from src.infrastructure.client_manager import ClientManager
123 |         from src.services.embeddings.manager import EmbeddingManager
    |

src/services/simple/search.py:122:9: PLC0415 `import` should be at the top-level of a file
    |
120 |         # Generate embedding for query
121 |         from src.config import Config
122 |         from src.infrastructure.client_manager import ClientManager
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
123 |         from src.services.embeddings.manager import EmbeddingManager
    |

src/services/simple/search.py:123:9: PLC0415 `import` should be at the top-level of a file
    |
121 |         from src.config import Config
122 |         from src.infrastructure.client_manager import ClientManager
123 |         from src.services.embeddings.manager import EmbeddingManager
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
124 |
125 |         config = Config()
    |

src/services/task_queue/manager.py:3:8: F401 `asyncio` imported but unused
  |
1 | """Task queue manager for ARQ integration."""
2 |
3 | import asyncio
  |        ^^^^^^^ F401
4 | import logging
5 | from typing import Any
  |
  = help: Remove unused import: `asyncio`

src/services/task_queue/manager.py:152:13: TRY300 Consider moving this statement to an `else` block
    |
150 |                 self.metrics_registry.record_task_execution(task_name, 0.0, False)
151 |
152 |             return None
    |             ^^^^^^^^^^^ TRY300
153 |
154 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/task_queue/manager.py:216:13: TRY300 Consider moving this statement to an `else` block
    |
214 |                 )  # TODO: Convert f-string to logging format
215 |                 return True
216 |             return False
    |             ^^^^^^^^^^^^ TRY300
217 |
218 |         except (TimeoutError, OSError, PermissionError):
    |

src/services/task_queue/tasks.py:237:9: PLC0415 `import` should be at the top-level of a file
    |
235 |     try:
236 |         # Use dynamic import to avoid circular dependency
237 |         import importlib
    |         ^^^^^^^^^^^^^^^^ PLC0415
238 |
239 |         config_drift_module = importlib.import_module(
    |

src/services/task_queue/tasks.py:260:9: TRY300 Consider moving this statement to an `else` block
    |
258 |         )
259 |
260 |         return result
    |         ^^^^^^^^^^^^^ TRY300
261 |
262 |     except Exception as e:
    |

src/services/task_queue/tasks.py:286:9: PLC0415 `import` should be at the top-level of a file
    |
284 |     try:
285 |         # Use dynamic import to avoid circular dependency
286 |         import importlib
    |         ^^^^^^^^^^^^^^^^ PLC0415
287 |
288 |         config_drift_module = importlib.import_module(
    |

src/services/task_queue/tasks.py:310:9: TRY300 Consider moving this statement to an `else` block
    |
308 |         )
309 |
310 |         return result
    |         ^^^^^^^^^^^^^ TRY300
311 |
312 |     except Exception as e:
    |

src/services/task_queue/worker.py:50:13: PLC0415 `import` should be at the top-level of a file
   |
48 |         else:
49 |             # Fallback to default TaskQueueConfig if not available
50 |             from src.config.task_queue import TaskQueueConfig
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
51 |
52 |             tq_config = TaskQueueConfig()
   |

src/services/utilities/hnsw_optimizer.py:43:16: SLF001 Private member accessed: `_initialized`
   |
42 |         # Validate that qdrant service is initialized
43 |         if not self.qdrant_service._initialized:
   |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
44 |             msg = "QdrantService must be initialized before HNSWOptimizer"
45 |             raise QdrantServiceError(msg)
   |

src/services/utilities/hnsw_optimizer.py:86:29: SLF001 Private member accessed: `_client`
   |
84 |             # Use cached ef directly
85 |             start_time = time.time()
86 |             results = await self.qdrant_service._client.query_points(
   |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
87 |                 collection_name=collection_name,
88 |                 query=query_vector,
   |

src/services/utilities/hnsw_optimizer.py:121:33: SLF001 Private member accessed: `_client`
    |
120 |             try:
121 |                 results = await self.qdrant_service._client.query_points(
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
122 |                     collection_name=collection_name,
123 |                     query=query_vector,
    |

src/services/utilities/hnsw_optimizer.py:298:33: SLF001 Private member accessed: `_client`
    |
297 |         # Check if collection needs HNSW updates
298 |         collection_info = await self.qdrant_service._client.get_collection(
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
299 |             collection_name
300 |         )
    |

src/services/utilities/hnsw_optimizer.py:469:23: SLF001 Private member accessed: `_client`
    |
468 |             try:
469 |                 await self.qdrant_service._client.query_points(
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^ SLF001
470 |                     collection_name=collection_name,
471 |                     query=query_vector,
    |

src/services/utilities/hnsw_optimizer.py:489:13: PLC0415 `import` should be at the top-level of a file
    |
488 |         if search_times:
489 |             import numpy as np
    |             ^^^^^^^^^^^^^^^^^^ PLC0415
490 |
491 |             return {
    |

src/services/vector_db/agentic_manager.py:220:17: SIM105 Use `contextlib.suppress(asyncio.CancelledError)` instead of `try`-`except`-`pass`
    |
218 |               # Wait for tasks to complete cleanup
219 |               if self._health_check_task:
220 | /                 try:
221 | |                     await self._health_check_task
222 | |                 except asyncio.CancelledError:
223 | |                     pass
    | |________________________^ SIM105
224 |
225 |               if self._optimization_task:
    |
    = help: Replace with `contextlib.suppress(asyncio.CancelledError)`

src/services/vector_db/agentic_manager.py:226:17: SIM105 Use `contextlib.suppress(asyncio.CancelledError)` instead of `try`-`except`-`pass`
    |
225 |               if self._optimization_task:
226 | /                 try:
227 | |                     await self._optimization_task
228 | |                 except asyncio.CancelledError:
229 | |                     pass
    | |________________________^ SIM105
230 |
231 |               # Clear internal state
    |
    = help: Replace with `contextlib.suppress(asyncio.CancelledError)`

src/services/vector_db/filters/base.py:255:13: TRY004 Prefer `TypeError` exception for invalid type
    |
253 |         if not issubclass(filter_class, BaseFilter):
254 |             msg = "Filter class must inherit from BaseFilter"
255 |             raise ValueError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY004
256 |
257 |         filter_name = filter_class.__name__
    |

src/services/vector_db/filters/metadata.py:8:8: F401 `asyncio` imported but unused
   |
 6 | """
 7 |
 8 | import asyncio
   |        ^^^^^^^ F401
 9 | import logging
10 | from enum import Enum
   |
   = help: Remove unused import: `asyncio`

src/services/vector_db/filters/metadata.py:628:17: TRY004 Prefer `TypeError` exception for invalid type
    |
626 |             else:
627 |                 msg = "Invalid condition format"
628 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY004
629 |
630 |         return BooleanExpressionModel(operator=operator, conditions=parsed_conditions)
    |

src/services/vector_db/filters/similarity.py:8:8: F401 `asyncio` imported but unused
   |
 6 | """
 7 |
 8 | import asyncio
   |        ^^^^^^^ F401
 9 | import logging
10 | import statistics
   |
   = help: Remove unused import: `asyncio`

src/services/vector_db/hybrid_search.py:217:13: TRY300 Consider moving this statement to an `else` block
    |
215 |             await self._store_search_for_learning(query_id, request, response)
216 |
217 |             return response
    |             ^^^^^^^^^^^^^^^ TRY300
218 |
219 |         except Exception as e:
    |

src/services/vector_db/hybrid_search.py:262:41: B025 try-except block with duplicate exception `TimeoutError`
    |
260 |             )
261 |             return None
262 |         except (asyncio.CancelledError, TimeoutError, RuntimeError) as e:
    |                                         ^^^^^^^^^^^^ B025
263 |             logger.warning(f"Query classification failed: {e}")
264 |             return None
    |

src/services/vector_db/hybrid_search.py:280:46: B025 try-except block with duplicate exception `TimeoutError`
    |
278 |             logger.warning("Model selection timed out, using default model")
279 |             return None
280 |         except (ValueError, ConnectionError, TimeoutError, RuntimeError) as e:
    |                                              ^^^^^^^^^^^^ B025
281 |             logger.warning(f"Model selection failed: {e}")
282 |             return None
    |

src/services/vector_db/hybrid_search.py:296:46: B025 try-except block with duplicate exception `TimeoutError`
    |
294 |             logger.warning("SPLADE generation timed out, skipping sparse vector")
295 |             return None
296 |         except (ValueError, ConnectionError, TimeoutError, RuntimeError) as e:
    |                                              ^^^^^^^^^^^^ B025
297 |             logger.warning(f"SPLADE generation failed: {e}")
298 |             return None
    |

src/services/vector_db/indexing.py:161:13: TRY300 Consider moving this statement to an `else` block
    |
159 |                 f"Found {len(indexed_fields)} indexed fields in {collection_name}"
160 |             )
161 |             return indexed_fields
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY300
162 |
163 |         except Exception as e:
    |

src/services/vector_db/indexing.py:261:13: TRY300 Consider moving this statement to an `else` block
    |
259 |                     }
260 |
261 |             return stats
    |             ^^^^^^^^^^^^ TRY300
262 |
263 |         except Exception as e:
    |

src/services/vector_db/indexing.py:364:13: TRY300 Consider moving this statement to an `else` block
    |
362 |                 health_score,
363 |             )
364 |             return health_report
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
365 |
366 |         except Exception as e:
    |

src/services/vector_db/indexing.py:491:13: TRY300 Consider moving this statement to an `else` block
    |
489 |             usage_stats["generated_at"] = int(time.time())
490 |
491 |             return usage_stats
    |             ^^^^^^^^^^^^^^^^^^ TRY300
492 |
493 |         except Exception as e:
    |

src/services/vector_db/optimization.py:16:1: E402 Module level import not at top of file
   |
14 | # Initialize numpy random generator
15 | rng = np.random.default_rng()
16 | from qdrant_client import QdrantClient
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ E402
17 | from qdrant_client.models import (
18 |     Distance,
   |

src/services/vector_db/optimization.py:17:1: E402 Module level import not at top of file
   |
15 |   rng = np.random.default_rng()
16 |   from qdrant_client import QdrantClient
17 | / from qdrant_client.models import (
18 | |     Distance,
19 | |     OptimizersConfigDiff,
20 | |     QuantizationConfig,
21 | |     ScalarQuantization,
22 | |     VectorParams,
23 | | )
   | |_^ E402
   |

src/services/vector_db/optimization.py:126:13: TRY300 Consider moving this statement to an `else` block
    |
124 |                 f"with vector size {vector_size} and quantization enabled"
125 |             )
126 |             return True
    |             ^^^^^^^^^^^ TRY300
127 |
128 |         except Exception:
    |

src/services/vector_db/optimization.py:337:13: TRY300 Consider moving this statement to an `else` block
    |
336 |             logger.info("Enabled quantization for collection '%s'", collection_name)
337 |             return {"status": "success", "quantization_enabled": True}
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
338 |
339 |         except Exception as e:
    |

src/services/vector_db/optimization.py:357:13: TRY300 Consider moving this statement to an `else` block
    |
355 |               config = collection_info.config
356 |
357 | /             return {
358 | |                 "collection_name": collection_name,
359 | |                 "vector_count": collection_info.vectors_count,
360 | |                 "indexed_vectors": collection_info.indexed_vectors_count,
361 | |                 "optimization_status": collection_info.optimizer_status,
362 | |                 "hnsw_config": {
363 | |                     "m": config.params.vectors.hnsw_config.m
364 | |                     if config.params.vectors.hnsw_config
365 | |                     else None,
366 | |                     "ef_construct": config.params.vectors.hnsw_config.ef_construct
367 | |                     if config.params.vectors.hnsw_config
368 | |                     else None,
369 | |                 },
370 | |                 "quantization_enabled": config.params.vectors.quantization_config
371 | |                 is not None,
372 | |                 "distance_metric": config.params.vectors.distance.value,
373 | |             }
    | |_____________^ TRY300
374 |
375 |           except Exception as e:
    |

src/services/vector_db/query_classifier.py:200:13: TRY300 Consider moving this statement to an `else` block
    |
199 |               # TODO: Replace with proper QueryClassification type
200 | /             return {
201 | |                 "query_type": query_type,
202 | |                 "complexity_level": complexity,
203 | |                 "domain": domain,
204 | |                 "programming_language": programming_language,
205 | |                 "is_multimodal": is_multimodal,
206 | |                 "confidence": confidence,
207 | |                 "features": features,
208 | |             }
    | |_____________^ TRY300
209 |
210 |           except Exception:
    |

src/services/vector_db/search.py:276:13: TRY004 Prefer `TypeError` exception for invalid type
    |
274 |         if not isinstance(stages, list):
275 |             msg = "Stages must be a list"
276 |             raise ValueError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY004
277 |
278 |         for i, stage in enumerate(stages):
    |

src/services/vector_db/search.py:281:17: TRY004 Prefer `TypeError` exception for invalid type
    |
279 |             if not isinstance(stage, dict):
280 |                 msg = f"Stage {i} must be a dictionary"
281 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY004
282 |             if "query_vector" not in stage:
283 |                 msg = f"Stage {i} must contain 'query_vector'"
    |

src/services/vector_db/search.py:527:13: TRY004 Prefer `TypeError` exception for invalid type
    |
525 |         if not isinstance(query_vector, list):
526 |             msg = "query_vector must be a list"
527 |             raise ValueError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY004
528 |
529 |         if not query_vector:
    |

src/services/vector_db/search.py:535:13: TRY004 Prefer `TypeError` exception for invalid type
    |
533 |         if not isinstance(filters, dict):
534 |             msg = "filters must be a dictionary"
535 |             raise ValueError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^ TRY004
536 |
537 |         # Validate vector dimensions (assuming 1536 for OpenAI embeddings)
    |

src/services/vector_db/service.py:367:58: TRY401 Redundant exception object included in `logging.exception` call
    |
365 |             )
366 |         except Exception as e:
367 |             logger.exception(f"Search operation failed: {e}")
    |                                                          ^ TRY401
368 |             msg = f"Search operation failed: {e}"
369 |             raise QdrantServiceError(msg) from e
    |

src/services/vector_db/splade_provider.py:111:13: TRY300 Consider moving this statement to an `else` block
    |
109 |                 self._cache[cache_key] = sparse_vector
110 |
111 |             return sparse_vector
    |             ^^^^^^^^^^^^^^^^^^^^ TRY300
112 |
113 |         except (OSError, AttributeError, ConnectionError, ImportError):
    |

tests/benchmarks/performance_suite.py:657:9: PLC0415 `import` should be at the top-level of a file
    |
655 |     async def real_embedding_manager(self):
656 |         """Create real embedding manager with test configuration."""
657 |         from src.config.settings import get_settings
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
658 |         from src.services.embeddings.manager import EmbeddingManager
    |

tests/benchmarks/performance_suite.py:658:9: PLC0415 `import` should be at the top-level of a file
    |
656 |         """Create real embedding manager with test configuration."""
657 |         from src.config.settings import get_settings
658 |         from src.services.embeddings.manager import EmbeddingManager
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
659 |
660 |         settings = get_settings()
    |

tests/benchmarks/performance_suite.py:669:9: PLC0415 `import` should be at the top-level of a file
    |
667 |     async def real_qdrant_service(self):
668 |         """Create real Qdrant service for vector operations."""
669 |         from src.config.settings import get_settings
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
670 |         from src.services.vector_db.service import QdrantService
    |

tests/benchmarks/performance_suite.py:670:9: PLC0415 `import` should be at the top-level of a file
    |
668 |         """Create real Qdrant service for vector operations."""
669 |         from src.config.settings import get_settings
670 |         from src.services.vector_db.service import QdrantService
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
671 |
672 |         settings = get_settings()
    |

tests/benchmarks/performance_suite.py:997:13: PLC0415 `import` should be at the top-level of a file
    |
995 |         def memory_usage_sync():
996 |             """Test memory efficiency of embedding operations."""
997 |             import os
    |             ^^^^^^^^^ PLC0415
998 |
999 |             import psutil
    |

tests/benchmarks/performance_suite.py:999:13: PLC0415 `import` should be at the top-level of a file
     |
 997 |             import os
 998 |
 999 |             import psutil
     |             ^^^^^^^^^^^^^ PLC0415
1000 |
1001 |             async def memory_usage():
     |

tests/benchmarks/test_config_performance.py:203:9: PLC0415 `import` should be at the top-level of a file
    |
201 |     def test_real_settings_instantiation_performance(self, benchmark, real_config_data):
202 |         """Benchmark real Settings class instantiation with validation."""
203 |         from src.config.settings import Settings
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
204 |
205 |         def create_settings():
    |

tests/benchmarks/test_config_performance.py:219:9: PLC0415 `import` should be at the top-level of a file
    |
217 |     def test_real_settings_from_environment(self, benchmark):
218 |         """Benchmark Settings creation from environment variables."""
219 |         import os
    |         ^^^^^^^^^ PLC0415
220 |
221 |         from src.config.settings import create_settings_from_env
    |

tests/benchmarks/test_config_performance.py:221:9: PLC0415 `import` should be at the top-level of a file
    |
219 |         import os
220 |
221 |         from src.config.settings import create_settings_from_env
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
222 |
223 |         # Set test environment variables
    |

tests/benchmarks/test_config_performance.py:260:9: PLC0415 `import` should be at the top-level of a file
    |
258 |       def test_real_config_caching_performance(self, benchmark, real_config_data):
259 |           """Benchmark configuration caching with real Settings."""
260 | /         from src.config.settings import (
261 | |             Settings,
262 | |             get_settings,
263 | |             reset_settings,
264 | |             set_settings,
265 | |         )
    | |_________^ PLC0415
266 |
267 |           def cached_config_access():
    |

tests/benchmarks/test_config_performance.py:293:9: PLC0415 `import` should be at the top-level of a file
    |
291 |     def test_real_config_validation_performance(self, benchmark, complex_config_data):
292 |         """Benchmark configuration validation with complex data."""
293 |         from pydantic import ValidationError
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
294 |
295 |         from src.config.settings import Settings
    |

tests/benchmarks/test_config_performance.py:295:9: PLC0415 `import` should be at the top-level of a file
    |
293 |         from pydantic import ValidationError
294 |
295 |         from src.config.settings import Settings
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
296 |
297 |         def validate_complex_config():
    |

tests/benchmarks/test_config_performance.py:308:17: TRY300 Consider moving this statement to an `else` block
    |
306 |             try:
307 |                 settings = Settings(**config_with_base)
308 |                 return {"success": True, "settings": settings}
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
309 |             except ValidationError as e:
310 |                 return {"success": False, "errors": len(e.errors())}
    |

tests/benchmarks/test_config_performance.py:322:9: PLC0415 `import` should be at the top-level of a file
    |
320 |     def test_real_config_hot_reload_performance(self, benchmark, real_config_data):
321 |         """Benchmark configuration hot reload capabilities."""
322 |         import json
    |         ^^^^^^^^^^^ PLC0415
323 |         import tempfile
    |

tests/benchmarks/test_config_performance.py:323:9: PLC0415 `import` should be at the top-level of a file
    |
321 |         """Benchmark configuration hot reload capabilities."""
322 |         import json
323 |         import tempfile
    |         ^^^^^^^^^^^^^^^ PLC0415
324 |
325 |         from src.config.settings import Settings, get_settings, set_settings
    |

tests/benchmarks/test_config_performance.py:325:9: PLC0415 `import` should be at the top-level of a file
    |
323 |         import tempfile
324 |
325 |         from src.config.settings import Settings, get_settings, set_settings
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
326 |
327 |         def config_hot_reload():
    |

tests/benchmarks/test_config_performance.py:340:22: PTH123 `open()` should be replaced by `Path.open()`
    |
338 |             try:
339 |                 # Initial load
340 |                 with open(config_file) as f:
    |                      ^^^^ PTH123
341 |                     config_data = json.load(f)
    |

tests/benchmarks/test_config_performance.py:353:26: PTH123 `open()` should be replaced by `Path.open()`
    |
352 |                     # Save changes
353 |                     with open(config_file, "w") as f:
    |                          ^^^^ PTH123
354 |                         json.dump(config_data, f)
    |

tests/benchmarks/test_config_performance.py:364:17: PLC0415 `import` should be at the top-level of a file
    |
362 |             finally:
363 |                 # Clean up
364 |                 import os
    |                 ^^^^^^^^^ PLC0415
365 |
366 |                 os.unlink(config_file)
    |

tests/benchmarks/test_config_performance.py:366:17: PTH108 `os.unlink()` should be replaced by `Path.unlink()`
    |
364 |                 import os
365 |
366 |                 os.unlink(config_file)
    |                 ^^^^^^^^^ PTH108
367 |
368 |             return results
    |

tests/benchmarks/test_config_performance.py:380:9: PLC0415 `import` should be at the top-level of a file
    |
378 |     def test_real_config_serialization_performance(self, benchmark, real_config_data):
379 |         """Benchmark configuration serialization/deserialization."""
380 |         import json
    |         ^^^^^^^^^^^ PLC0415
381 |
382 |         from src.config.settings import Settings
    |

tests/benchmarks/test_config_performance.py:382:9: PLC0415 `import` should be at the top-level of a file
    |
380 |         import json
381 |
382 |         from src.config.settings import Settings
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
383 |
384 |         def config_serialization():
    |

tests/benchmarks/test_config_performance.py:418:9: PLC0415 `import` should be at the top-level of a file
    |
416 |     def test_real_config_memory_optimization(self, benchmark, complex_config_data):
417 |         """Benchmark memory usage of configuration objects."""
418 |         import sys
    |         ^^^^^^^^^^ PLC0415
419 |
420 |         from src.config.settings import Settings
    |

tests/benchmarks/test_config_performance.py:420:9: PLC0415 `import` should be at the top-level of a file
    |
418 |         import sys
419 |
420 |         from src.config.settings import Settings
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
421 |
422 |         def config_memory_usage():
    |

tests/benchmarks/test_database_performance.py:90:9: PLC0415 `import` should be at the top-level of a file
   |
89 |         # Wait for Qdrant to be ready
90 |         import asyncio
   |         ^^^^^^^^^^^^^^ PLC0415
91 |
92 |         max_retries = 30
   |

tests/benchmarks/test_database_performance.py:120:9: PLC0415 `import` should be at the top-level of a file
    |
118 |     async def get_current_load(self):
119 |         """Get real system load metrics."""
120 |         import psutil
    |         ^^^^^^^^^^^^^ PLC0415
121 |
122 |         return psutil.cpu_percent(interval=0.1) / 100.0
    |

tests/benchmarks/test_database_performance.py:312:9: PLC0415 `import` should be at the top-level of a file
    |
310 |     async def real_qdrant_service(self):
311 |         """Create real Qdrant service using containerized Qdrant instance."""
312 |         import asyncio
    |         ^^^^^^^^^^^^^^ PLC0415
313 |
314 |         from qdrant_client import AsyncQdrantClient
    |

tests/benchmarks/test_database_performance.py:314:9: PLC0415 `import` should be at the top-level of a file
    |
312 |         import asyncio
313 |
314 |         from qdrant_client import AsyncQdrantClient
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
315 |         from testcontainers.core.container import DockerContainer
    |

tests/benchmarks/test_database_performance.py:315:9: PLC0415 `import` should be at the top-level of a file
    |
314 |         from qdrant_client import AsyncQdrantClient
315 |         from testcontainers.core.container import DockerContainer
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
316 |
317 |         from src.config import get_config
    |

tests/benchmarks/test_database_performance.py:317:9: PLC0415 `import` should be at the top-level of a file
    |
315 |         from testcontainers.core.container import DockerContainer
316 |
317 |         from src.config import get_config
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
318 |         from src.services.vector_db.collections import QdrantCollections
319 |         from src.services.vector_db.documents import QdrantDocuments
    |

tests/benchmarks/test_database_performance.py:318:9: PLC0415 `import` should be at the top-level of a file
    |
317 |         from src.config import get_config
318 |         from src.services.vector_db.collections import QdrantCollections
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
319 |         from src.services.vector_db.documents import QdrantDocuments
320 |         from src.services.vector_db.indexing import QdrantIndexing
    |

tests/benchmarks/test_database_performance.py:319:9: PLC0415 `import` should be at the top-level of a file
    |
317 |         from src.config import get_config
318 |         from src.services.vector_db.collections import QdrantCollections
319 |         from src.services.vector_db.documents import QdrantDocuments
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
320 |         from src.services.vector_db.indexing import QdrantIndexing
321 |         from src.services.vector_db.search import QdrantSearch
    |

tests/benchmarks/test_database_performance.py:320:9: PLC0415 `import` should be at the top-level of a file
    |
318 |         from src.services.vector_db.collections import QdrantCollections
319 |         from src.services.vector_db.documents import QdrantDocuments
320 |         from src.services.vector_db.indexing import QdrantIndexing
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
321 |         from src.services.vector_db.search import QdrantSearch
    |

tests/benchmarks/test_database_performance.py:321:9: PLC0415 `import` should be at the top-level of a file
    |
319 |         from src.services.vector_db.documents import QdrantDocuments
320 |         from src.services.vector_db.indexing import QdrantIndexing
321 |         from src.services.vector_db.search import QdrantSearch
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
322 |
323 |         # Get config
    |

tests/benchmarks/test_database_performance.py:381:9: PLC0415 `import` should be at the top-level of a file
    |
379 |     def sample_vectors(self):
380 |         """Generate sample vectors for database operations."""
381 |         import random
    |         ^^^^^^^^^^^^^ PLC0415
382 |
383 |         vectors = []
    |

tests/benchmarks/test_database_performance.py:721:17: PLC0415 `import` should be at the top-level of a file
    |
720 |                 # Create collection using direct client
721 |                 from qdrant_client.models import FieldCondition, Filter
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
722 |
723 |                 await client.create_collection(
    |

tests/chaos/failure_scenarios/test_disaster_recovery.py:815:17: TRY300 Consider moving this statement to an `else` block
    |
813 |                   recovery_metrics["last_recovery_test"] = test_start
814 |
815 | /                 return {
816 | |                     "test_successful": restored_data == test_data,
817 | |                     "test_duration": test_duration,
818 | |                     "timestamp": test_start,
819 | |                 }
    | |_________________^ TRY300
820 |               except (ConnectionError, RuntimeError, ValueError, OSError) as e:
821 |                   return {
    |

tests/chaos/network_chaos/test_network_partitions.py:237:21: SIM113 Use `enumerate()` for index variable `_total_nodes` in `for` loop
    |
235 |                 # Count votes from reachable nodes
236 |                 for node_id in reachable_nodes:
237 |                     _total_nodes += 1
    |                     ^^^^^^^^^^^^^^^^^ SIM113
238 |                     try:
239 |                         # Simulate vote request
    |

tests/chaos/network_chaos/test_network_partitions.py:529:21: TRY300 Consider moving this statement to an `else` block
    |
527 |                         {"type": "ping", "timestamp": time.time()},
528 |                     )
529 |                     return False  # Node is reachable, no partition
    |                     ^^^^^^^^^^^^ TRY300
530 |                 except ConnectionError:
531 |                     return True  # Node is unreachable, partition confirmed
    |

tests/chaos/network_chaos/test_network_partitions.py:612:21: PERF403 Use a dictionary comprehension instead of a for-loop
    |
610 |                 resolved_operations = {}
611 |                 for op_id, op_data in all_operations.items():
612 |                     resolved_operations[op_id] = op_data
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PERF403
613 |
614 |                 # Merge vector clocks
    |
    = help: Replace for loop with dict comprehension

tests/chaos/resilience/test_recovery_validation.py:266:21: TRY300 Consider moving this statement to an `else` block
    |
264 |                     )
265 |
266 |                     return metrics
    |                     ^^^^^^^^^^^^^^ TRY300
267 |
268 |                 except Exception as e:
    |

tests/chaos/test_chaos_runner.py:102:25: TRY301 Abstract `raise` to an inner function
    |
100 |                     def _raise_safety_error():
101 |                         msg = f"Safety check failed: {safety_check['reason']}"
102 |                         raise TestError(msg)
    |                         ^^^^^^^^^^^^^^^^^^^^ TRY301
103 |
104 |                     _raise_safety_error()
    |

tests/conftest.py:7:8: F401 `asyncio` imported but unused
  |
5 | """
6 |
7 | import asyncio
  |        ^^^^^^^ F401
8 | import math
9 | import os
  |
  = help: Remove unused import: `asyncio`

tests/conftest.py:11:8: F401 `subprocess` imported but unused
   |
 9 | import os
10 | import random
11 | import subprocess
   |        ^^^^^^^^^^ F401
12 | import sys
13 | import tempfile
   |
   = help: Remove unused import: `subprocess`

tests/conftest.py:14:8: F401 `time` imported but unused
   |
12 | import sys
13 | import tempfile
14 | import time
   |        ^^^^ F401
15 | from collections.abc import Generator
16 | from pathlib import Path
   |
   = help: Remove unused import: `time`

tests/conftest.py:17:20: F401 `typing.Any` imported but unused
   |
15 | from collections.abc import Generator
16 | from pathlib import Path
17 | from typing import Any
   |                    ^^^ F401
18 | from unittest.mock import AsyncMock, MagicMock, Mock
   |
   = help: Remove unused import: `typing.Any`

tests/conftest.py:18:49: F401 `unittest.mock.Mock` imported but unused
   |
16 | from pathlib import Path
17 | from typing import Any
18 | from unittest.mock import AsyncMock, MagicMock, Mock
   |                                                 ^^^^ F401
19 |
20 | import pytest
   |
   = help: Remove unused import: `unittest.mock.Mock`

tests/data_quality/conftest.py:202:21: SIM102 Use a single `if` statement instead of nested `if` statements
    |
201 |                       # Pattern validation
202 | /                     if rule.pattern and isinstance(value, str):
203 | |                         if not re.match(rule.pattern, value):
    | |_____________________________________________________________^ SIM102
204 |                               failed_records += 1
205 |                               validation_errors.append(
    |
    = help: Combine `if` statements using `and`

tests/deployment/conftest.py:264:38: ASYNC109 Async function definition with a `timeout` parameter
    |
262 |             }
263 |
264 |     async def check_all_health(self, timeout: int = 30) -> dict[str, dict[str, Any]]:
    |                                      ^^^^^^^^^^^^^^^^^ ASYNC109
265 |         """Check health of all registered endpoints."""
266 |         results = {}
    |
    = help: Use `asyncio.timeout` instead

tests/deployment/conftest.py:274:9: ASYNC109 Async function definition with a `timeout` parameter
    |
272 |         self,
273 |         endpoint: str,
274 |         timeout: int = 60,
    |         ^^^^^^^^^^^^^^^^^ ASYNC109
275 |         interval: int = 5,
276 |     ) -> bool:
    |
    = help: Use `asyncio.timeout` instead

tests/deployment/environment/test_environment_validation.py:529:17: PERF401 Use a list comprehension to create a transformed list
    |
527 |         for var in required_vars:
528 |             if not os.getenv(var):
529 |                 missing_vars.append(var)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^ PERF401
530 |
531 |         return missing_vars
    |
    = help: Replace for loop with list comprehension

tests/deployment/environment/test_environment_validation.py:558:17: SIM102 Use a single `if` statement instead of nested `if` statements
    |
557 |                   # Check pattern
558 | /                 if "pattern" in requirements:
559 | |                     if not re.match(requirements["pattern"], value):
    | |____________________________________________________________________^ SIM102
560 |                           errors.append(
561 |                               f"Value does not match required pattern: {requirements['pattern']}"
    |
    = help: Combine `if` statements using `and`

tests/deployment/infrastructure/test_infrastructure_validation.py:645:17: PERF402 Use `list` or `list.copy` to create a copy of a list
    |
643 |         if has_resources:
644 |             for resource_type in config["resource"]:
645 |                 resources.append(resource_type)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PERF402
646 |
647 |         return {
    |

tests/deployment/pipeline/test_cicd_pipeline.py:669:17: PERF401 Use a list comprehension to create a transformed list
    |
667 |         for field in required_fields:
668 |             if field not in config:
669 |                 errors.append(f"Missing required field: {field}")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PERF401
670 |
671 |         # Validate stages
    |
    = help: Replace for loop with list comprehension

tests/deployment/pipeline/test_cicd_pipeline.py:697:17: PERF401 Use a list comprehension to create a transformed list
    |
695 |         for field in required_fields:
696 |             if field not in stage:
697 |                 errors.append(f"Stage {index}: Missing required field '{field}'")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PERF401
698 |
699 |         # Valid stage types
    |
    = help: Replace for loop with list comprehension

tests/deployment/pipeline/test_cicd_pipeline.py:750:13: TRY300 Consider moving this statement to an `else` block
    |
748 |                 }
749 |
750 |             return result
    |             ^^^^^^^^^^^^^ TRY300
751 |
752 |         except (RuntimeError, OSError, subprocess.CalledProcessError) as e:
    |

tests/deployment/pipeline/test_cicd_pipeline.py:819:13: TRY300 Consider moving this statement to an `else` block
    |
817 |               duration = (end_time - start_time)._total_seconds()
818 |
819 | /             return {
820 | |                 "success": True,
821 | |                 "test_type": test_type,
822 | |                 "duration_seconds": duration,
823 | |                 **result,
824 | |             }
    | |_____________^ TRY300
825 |
826 |           except (RuntimeError, OSError, subprocess.CalledProcessError) as e:
    |

tests/examples/test_modern_patterns.py:193:9: SIM105 Use `contextlib.suppress(NameError)` instead of `try`-`except`-`pass`
    |
192 |           # Check validation errors if they occurred
193 | /         try:
194 | |             assert (
195 | |                 "chunk_overlap must be less than chunk_size" in error_message
196 | |                 or "max_chunk_size must be >= chunk_size" in error_message
197 | |             )
198 | |         except NameError:
199 | |             # No error occurred, which is fine
200 | |             pass
    | |________________^ SIM105
    |
    = help: Replace with `contextlib.suppress(NameError)`

tests/examples/test_modern_patterns.py:273:13: PERF401 Use an async list comprehension to create a transformed list
    |
271 |         results = []
272 |         async for value in self.async_range(5):
273 |             results.append(value)
    |             ^^^^^^^^^^^^^^^^^^^^^ PERF401
274 |
275 |         assert results == [0, 1, 2, 3, 4]
    |
    = help: Replace for loop with list comprehension

tests/integration/end_to_end/api_flows/test_api_workflow_validation.py:300:52: S105 Possible hardcoded password assigned to: "token_type"
    |
299 |             assert "access_token" in login_response, "Login should return access token"
300 |             assert login_response["token_type"] == "bearer", (  # nosec
    |                                                    ^^^^^^^^ S105
301 |                 "Token type should be bearer"
302 |             )
    |

tests/integration/end_to_end/system_integration/test_end_to_end_integration.py:62:13: TRY300 Consider moving this statement to an `else` block
   |
60 |             scenario_result["overall_success"] = True
61 |
62 |             return scenario_result
   |             ^^^^^^^^^^^^^^^^^^^^^^ TRY300
63 |
64 |         except (TimeoutError, ConnectionError, RuntimeError, ValueError) as e:
   |

tests/integration/end_to_end/user_journeys/conftest.py:1:1: INP001 File `tests/integration/end_to_end/user_journeys/conftest.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/integration/end_to_end/user_journeys/conftest.py:240:33: TRY301 Abstract `raise` to an inner function
    |
238 |                             def _raise_validation_error():
239 |                                 msg = f"Step validation failed: {step.name}"
240 |                                 raise ValueError(msg)
    |                                 ^^^^^^^^^^^^^^^^^^^^^ TRY301
241 |
242 |                             _raise_validation_error()
    |

tests/integration/end_to_end/user_journeys/conftest.py:245:21: SIM102 Use a single `if` statement instead of nested `if` statements
    |
244 |                       # Check against expected result
245 | /                     if step.expected_result:
246 | |                         if not self._validate_expected_result(
247 | |                             result, step.expected_result
248 | |                         ):
    | |__________________________^ SIM102
249 |
250 |                               def _raise_expected_result_error():
    |
    = help: Combine `if` statements using `and`

tests/integration/end_to_end/user_journeys/conftest.py:252:33: TRY301 Abstract `raise` to an inner function
    |
250 |                             def _raise_expected_result_error():
251 |                                 msg = f"Result doesn't match expected: {step.name}"
252 |                                 raise ValueError(msg)
    |                                 ^^^^^^^^^^^^^^^^^^^^^ TRY301
253 |
254 |                             _raise_expected_result_error()
    |

tests/integration/end_to_end/user_journeys/conftest.py:279:13: ASYNC109 Async function definition with a `timeout` parameter
    |
277 |             params: dict[str, Any],
278 |             context: dict[str, Any],
279 |             timeout: float,
    |             ^^^^^^^^^^^^^^ ASYNC109
280 |         ) -> dict[str, Any]:
281 |             """Perform the specified action."""
    |
    = help: Use `asyncio.timeout` instead

tests/integration/end_to_end/user_journeys/test_complete_user_journeys.py:1:1: INP001 File `tests/integration/end_to_end/user_journeys/test_complete_user_journeys.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/integration/end_to_end/user_journeys/test_complete_user_journeys.py:168:17: PERF401 Use a list comprehension to create a transformed list
    |
166 |                 )
167 |             ):
168 |                 validated_endpoints.append(step["result"]["result"]["endpoint"])
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PERF401
169 |
170 |         assert len(validated_endpoints) >= 3, "Not enough API endpoints validated"
    |
    = help: Replace for loop with list comprehension

tests/integration/multi_agent/test_distributed_workflows.py:116:21: TRY301 Abstract `raise` to an inner function
    |
114 |                 if not ready_nodes:
115 |                     msg = "Circular dependency or deadlock detected"
116 |                     raise RuntimeError(msg)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^ TRY301
117 |
118 |                 # Execute ready nodes in parallel
    |

tests/integration/multi_agent/test_distributed_workflows.py:163:17: PERF401 Use a list comprehension to create a transformed list
    |
161 |                 and dependency_graph[node.node_id].issubset(executed_nodes)
162 |             ):
163 |                 ready.append(node)
    |                 ^^^^^^^^^^^^^^^^^^ PERF401
164 |         return ready
    |
    = help: Replace for loop with list comprehension

tests/integration/multi_agent/test_distributed_workflows.py:181:17: TRY301 Abstract `raise` to an inner function
    |
179 |             if not agent_id:
180 |                 msg = f"No suitable agent found for node {node.node_id}"
181 |                 raise RuntimeError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^ TRY301
182 |
183 |             agent_info = self.agent_pool[agent_id]
    |

tests/integration/multi_agent/test_distributed_workflows.py:543:23: TRY002 Create your own exception
    |
541 |             if "fail_task" in task:
542 |                 msg = "Simulated agent failure"
543 |                 raise Exception(msg)
    |                       ^^^^^^^^^^^^^^ TRY002
544 |             return await original_orchestrate(task, constraints, deps)
    |

tests/integration/multi_agent/test_distributed_workflows.py:750:13: PERF401 Use a list comprehension to create a transformed list
    |
748 |           parallel_tasks = []
749 |           for i in range(9):  # 9 tasks, 3 agents = 3 tasks per agent
750 | /             parallel_tasks.append(
751 | |                 WorkflowNode(
752 | |                     node_id=f"parallel_task_{i}",
753 | |                     agent_role=AgentRole.COORDINATOR,
754 | |                     task_description=f"load balanced task {i}",
755 | |                     constraints={"task_id": i, "load_test": True},
756 | |                 )
757 | |             )
    | |_____________^ PERF401
758 |
759 |           # Add aggregation task
    |
    = help: Replace for loop with list comprehension

tests/integration/multi_agent/test_distributed_workflows.py:888:23: TRY002 Create your own exception
    |
886 |             if call_count > 1:  # Fail after first successful call
887 |                 msg = "Primary agent failure - triggering self-healing"
888 |                 raise Exception(msg)
    |                       ^^^^^^^^^^^^^^ TRY002
889 |             return await original_orchestrate(task, constraints, deps)
    |

tests/integration/multi_agent/test_distributed_workflows.py:1214:27: TRY002 Create your own exception
     |
1212 |                     # Simulate failure
1213 |                     msg = "Simulated critical failure"
1214 |                     raise Exception(msg)
     |                           ^^^^^^^^^^^^^^ TRY002
1215 |
1216 |                 return await original_execute_node(node, workflow, deps)
     |

tests/integration/multi_agent/test_state_synchronization.py:101:17: TRY301 Abstract `raise` to an inner function
    |
 99 |             if state_id not in self.shared_states:
100 |                 msg = f"State {state_id} does not exist"
101 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY301
102 |
103 |             state = self.shared_states[state_id]
    |

tests/integration/multi_agent/test_state_synchronization.py:118:13: TRY300 Consider moving this statement to an `else` block
    |
117 |             update.success = True
118 |             return update.old_value
    |             ^^^^^^^^^^^^^^^^^^^^^^^ TRY300
119 |
120 |         except Exception:
    |

tests/integration/multi_agent/test_state_synchronization.py:147:17: TRY301 Abstract `raise` to an inner function
    |
145 |             if state_id not in self.shared_states:
146 |                 msg = f"State {state_id} does not exist"
147 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY301
148 |
149 |             # Check for lock requirement
    |

tests/integration/multi_agent/test_state_synchronization.py:189:13: TRY300 Consider moving this statement to an `else` block
    |
188 |             update.success = True
189 |             return True
    |             ^^^^^^^^^^^ TRY300
190 |
191 |         except Exception:
    |

tests/integration/multi_agent/test_state_synchronization.py:217:17: TRY301 Abstract `raise` to an inner function
    |
215 |             if state_id not in self.shared_states:
216 |                 msg = f"State {state_id} does not exist"
217 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY301
218 |
219 |             state = self.shared_states[state_id]
    |

tests/integration/multi_agent/test_state_synchronization.py:229:17: TRY301 Abstract `raise` to an inner function
    |
227 |             else:
228 |                 msg = f"Unknown merge strategy: {merge_strategy}"
229 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY301
230 |
231 |             # Update metadata
    |

tests/integration/multi_agent/test_state_synchronization.py:237:13: TRY300 Consider moving this statement to an `else` block
    |
236 |             update.success = True
237 |             return True
    |             ^^^^^^^^^^^ TRY300
238 |
239 |         except Exception:
    |

tests/integration/multi_agent/test_state_synchronization.py:246:45: ASYNC109 Async function definition with a `timeout` parameter
    |
245 |     async def acquire_lock(
246 |         self, state_id: str, agent_id: str, timeout: float = 5.0
    |                                             ^^^^^^^^^^^^^^^^^^^^ ASYNC109
247 |     ) -> bool:
248 |         """Acquire exclusive lock on shared state."""
    |
    = help: Use `asyncio.timeout` instead

tests/integration/services/test_distributed_system_resilience.py:289:13: ASYNC109 Async function definition with a `timeout` parameter
    |
287 |         async def perform_cache_operation_with_timeout(
288 |             operation: str,
289 |             timeout: float = 1.0,
    |             ^^^^^^^^^^^^^^^^^^^^ ASYNC109
290 |         ):
291 |             """Perform cache operation with timeout."""
    |
    = help: Use `asyncio.timeout` instead

tests/integration/services/test_distributed_system_resilience.py:310:17: TRY300 Consider moving this statement to an `else` block
    |
308 |                     }
309 |                 )
310 |                 return result
    |                 ^^^^^^^^^^^^^ TRY300
311 |
312 |             except TimeoutError:
    |

tests/integration/services/test_distributed_system_resilience.py:759:17: TRY300 Consider moving this statement to an `else` block
    |
757 |             try:
758 |                 backup_result = backup_registry.get(service_name, [])
759 |                 return {"source": "backup", "services": backup_result}
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
760 |             except (TimeoutError, ConnectionError, RuntimeError, ValueError):
761 |                 return {"source": "none", "services": []}
    |

tests/integration/services/test_distributed_system_resilience.py:911:21: PERF401 Use `list.extend` to create a transformed list
    |
909 |                   ]
910 |                   for service in all_services:
911 | /                     notified_services.append(
912 | |                         {
913 | |                             "service": service,
914 | |                             "change_id": change["change_id"],
915 | |                             "config_path": change["config_path"],
916 | |                             "notification_time": time.time(),
917 | |                         }
918 | |                     )
    | |_____________________^ PERF401
919 |               else:
920 |                   # Notify specific services
    |
    = help: Replace for loop with list.extend

tests/integration/services/test_distributed_system_resilience.py:922:21: PERF401 Use `list.extend` to create a transformed list
    |
920 |                   # Notify specific services
921 |                   for service in affected_services:
922 | /                     notified_services.append(
923 | |                         {
924 | |                             "service": service,
925 | |                             "change_id": change["change_id"],
926 | |                             "config_path": change["config_path"],
927 | |                             "notification_time": time.time(),
928 | |                         }
929 | |                     )
    | |_____________________^ PERF401
930 |
931 |           # Process configuration changes
    |
    = help: Replace for loop with list.extend

tests/integration/services/test_distributed_system_resilience.py:1217:21: SIM102 Use a single `if` statement instead of nested `if` statements
     |
1216 |                       # Check if role has permission for operation
1217 | /                     if operation in role["permissions"]:
1218 | |                         # Check if role can access target service
1219 | |                         if (
1220 | |                             "all" in role["services"]
1221 | |                             or service_name in role["services"]
1222 | |                         ):
     | |__________________________^ SIM102
1223 |                               return True
     |
     = help: Combine `if` statements using `and`

tests/integration/services/test_enhanced_orchestrator_integration.py:358:17: PERF401 Use `list.extend` to create a transformed list
    |
356 |           for result in all_results:
357 |               for doc in result.results:
358 | /                 all_documents.append(
359 | |                     {
360 | |                         "id": doc["id"],
361 | |                         "text": doc.get("content", ""),
362 | |                         "metadata": doc.get("metadata", {}),
363 | |                     }
364 | |                 )
    | |_________________^ PERF401
365 |
366 |           if len(all_documents) > 0:
    |
    = help: Replace for loop with list.extend

tests/integration/services/test_service_interactions.py:819:9: PLC0415 `import` should be at the top-level of a file
    |
818 |         # Now embedding circuit should be open
819 |         from src.services.functional.circuit_breaker import CircuitBreakerError
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
820 |
821 |         try:
    |

tests/integration/test_concurrent_config.py:130:17: TRY300 Consider moving this statement to an `else` block
    |
128 |                     reload_results.append((version_idx, result))
129 |
130 |                 return result
    |                 ^^^^^^^^^^^^^ TRY300
131 |             except (TimeoutError, ConnectionError, RuntimeError, ValueError) as e:
132 |                 pytest.fail(f"Reload failed: {e}")
    |

tests/integration/test_config_error_scenarios.py:336:9: PLC0415 `import` should be at the top-level of a file
    |
334 |             pytest.skip("SIGHUP not available on this platform")
335 |
336 |         from src.config.reload import ConfigReloader
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
337 |
338 |         config_file = config_dir / "config.json"
    |

tests/integration/test_enhanced_security_config.py:37:18: S105 Possible hardcoded password assigned to: "SECRET"
   |
35 |         INTERNAL = "internal"
36 |         CONFIDENTIAL = "confidential"
37 |         SECRET = "secret"  # nosec
   |                  ^^^^^^^^ S105
38 |
39 |     class ConfigOperationType:
   |

tests/integration/test_enhanced_security_config.py:497:51: S105 Possible hardcoded password assigned to: "SECRET"
    |
495 |         assert ConfigDataClassification.INTERNAL == "internal"
496 |         assert ConfigDataClassification.CONFIDENTIAL == "confidential"
497 |         assert ConfigDataClassification.SECRET == "secret"  # nosec
    |                                                   ^^^^^^^^ S105
498 |
499 |         # Test enum ordering (more sensitive = higher value)
    |

tests/integration/test_mcp_edge_cases.py:118:13: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
116 |         except (TimeoutError, ConnectionError, RuntimeError, ValueError) as e:
117 |             # If it rejects, should be a meaningful error
118 |             assert "too long" in str(e).lower() or "size" in str(e).lower()
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
119 |
120 |     async def test_special_characters_in_inputs(self, edge_case_server):
    |

tests/integration/test_mcp_edge_cases.py:118:13: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
116 |         except (TimeoutError, ConnectionError, RuntimeError, ValueError) as e:
117 |             # If it rejects, should be a meaningful error
118 |             assert "too long" in str(e).lower() or "size" in str(e).lower()
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
119 |
120 |     async def test_special_characters_in_inputs(self, edge_case_server):
    |

tests/integration/test_mcp_edge_cases.py:560:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
558 |             except (TimeoutError, ConnectionError, RuntimeError, ValueError) as e:
559 |                 # If it raises, should be a meaningful error
560 |                 assert "invalid" in str(e).lower() or "corrupt" in str(e).lower()
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
561 |
562 |     async def test_partial_failure_handling(self, edge_case_server):
    |

tests/integration/test_mcp_edge_cases.py:560:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
558 |             except (TimeoutError, ConnectionError, RuntimeError, ValueError) as e:
559 |                 # If it raises, should be a meaningful error
560 |                 assert "invalid" in str(e).lower() or "corrupt" in str(e).lower()
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
561 |
562 |     async def test_partial_failure_handling(self, edge_case_server):
    |

tests/integration/test_mcp_performance_benchmarks.py:47:23: PTH109 `os.getcwd()` should be replaced by `Path.cwd()`
   |
45 |             "pytest" in os.getenv("_", ""),  # Running under pytest
46 |             os.getenv("PYTEST_CURRENT_TEST") is not None,  # Pytest environment
47 |             "test" in os.getcwd().lower(),  # Working directory contains "test"
   |                       ^^^^^^^^^ PTH109
48 |         ]
49 |     )
   |

tests/integration/test_mcp_performance_benchmarks.py:195:25: TRY300 Consider moving this statement to an `else` block
    |
193 |                         result = await operation_func(idx)
194 |                         op_time = time.time() - op_start
195 |                         return op_time, result
    |                         ^^^^^^^^^^^^^^^^^^^^^^ TRY300
196 |                     except (
197 |                         TimeoutError,
    |

tests/integration/test_parallel_processing_integration.py:245:13: PLC0415 `import` should be at the top-level of a file
    |
243 |             )
244 |
245 |             from src.services.cache.intelligent import CacheConfig
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
246 |             from src.services.embeddings.parallel import ParallelConfig
247 |             from src.services.processing.parallel_integration import (
    |

tests/integration/test_parallel_processing_integration.py:246:13: PLC0415 `import` should be at the top-level of a file
    |
245 |             from src.services.cache.intelligent import CacheConfig
246 |             from src.services.embeddings.parallel import ParallelConfig
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
247 |             from src.services.processing.parallel_integration import (
248 |                 OptimizationConfig,
    |

tests/integration/test_parallel_processing_integration.py:247:13: PLC0415 `import` should be at the top-level of a file
    |
245 |               from src.services.cache.intelligent import CacheConfig
246 |               from src.services.embeddings.parallel import ParallelConfig
247 | /             from src.services.processing.parallel_integration import (
248 | |                 OptimizationConfig,
249 | |                 ParallelProcessingSystem,
250 | |             )
    | |_____________^ PLC0415
251 |
252 |               # Create custom configuration
    |

tests/integration/test_parallel_processing_integration.py:311:13: PLC0415 `import` should be at the top-level of a file
    |
310 |           async def process_documents():
311 | /             from src.services.processing.parallel_integration import (
312 | |                 create_optimized_system,
313 | |             )
    | |_____________^ PLC0415
314 |
315 |               # Create optimized system
    |

tests/integration/test_security_config.py:34:18: S105 Possible hardcoded password assigned to: "SECRET"
   |
32 |         INTERNAL = "internal"
33 |         CONFIDENTIAL = "confidential"
34 |         SECRET = "secret"  # nosec
   |                  ^^^^^^^^ S105
35 |
36 |     class ConfigOperationType:
   |

tests/integration/test_security_config.py:494:51: S105 Possible hardcoded password assigned to: "SECRET"
    |
492 |         assert ConfigDataClassification.INTERNAL == "internal"
493 |         assert ConfigDataClassification.CONFIDENTIAL == "confidential"
494 |         assert ConfigDataClassification.SECRET == "secret"  # nosec
    |                                                   ^^^^^^^^ S105
495 |
496 |         # Test enum ordering (more sensitive = higher value)
    |

tests/load/load_testing/test_concurrent_users.py:287:21: PLC0415 `import` should be at the top-level of a file
    |
285 |                 if response_times:
286 |                     # Check for response time stability (coefficient of variation)
287 |                     import statistics
    |                     ^^^^^^^^^^^^^^^^^ PLC0415
288 |
289 |                     mean_rt = statistics.mean(response_times)
    |

tests/load/run_load_tests.py:1014:13: PLC0415 `import` should be at the top-level of a file
     |
1012 |         logger.exception("Test execution failed")
1013 |         if args.verbose:
1014 |             import traceback
     |             ^^^^^^^^^^^^^^^^ PLC0415
1015 |
1016 |             traceback.print_exc()
     |

tests/load/spike_testing/test_spike_load.py:262:17: SIM102 Use a single `if` statement instead of nested `if` statements
    |
260 |                   current_time = time.time()
261 |
262 | /                 if self.state == "OPEN":
263 | |                     if current_time - self.last_failure_time > self.timeout_duration:
    | |_____________________________________________________________________________________^ SIM102
264 |                           self.state = "HALF_OPEN"
265 |                           self.events.append(
    |
    = help: Combine `if` statements using `and`

tests/load/spike_testing/test_spike_load.py:278:25: TRY301 Abstract `raise` to an inner function
    |
276 |                     if current_time % 1.0 < failure_rate:
277 |                         msg = "Service temporarily unavailable"
278 |                         raise TestError(msg)
    |                         ^^^^^^^^^^^^^^^^^^^^ TRY301
279 |
280 |                     # Success
    |

tests/load/spike_testing/test_spike_load.py:292:21: TRY300 Consider moving this statement to an `else` block
    |
291 |                     await asyncio.sleep(0.05)  # Simulate processing time
292 |                     return {"status": "success", "circuit_state": self.state}
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
293 |
294 |                 except Exception:
    |

tests/load/stress_testing/conftest.py:302:33: SIM115 Use a context manager for opening files
    |
300 |                 try:
301 |                     # Create temporary file
302 |                     temp_file = tempfile.NamedTemporaryFile(delete=False)
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ SIM115
303 |                     temp_files.append(temp_file.name)
    |

tests/load/stress_testing/test_circuit_breakers.py:98:13: SIM102 Use a single `if` statement instead of nested `if` statements
    |
 97 |               # Check if we should close the circuit (from half-open)
 98 | /             if self.state == CircuitBreakerState.HALF_OPEN:
 99 | |                 if self.success_count >= self.config.success_threshold:
    | |_______________________________________________________________________^ SIM102
100 |                       self._transition_to_closed()
    |
    = help: Combine `if` statements using `and`

tests/load/stress_testing/test_circuit_breakers.py:102:13: TRY300 Consider moving this statement to an `else` block
    |
100 |                     self._transition_to_closed()
101 |
102 |             return result
    |             ^^^^^^^^^^^^^ TRY300
103 |
104 |         except Exception:
    |

tests/load/stress_testing/test_resource_exhaustion.py:727:21: TRY300 Consider moving this statement to an `else` block
    |
725 |                               self._raise_system_overload()
726 |
727 | /                     return {
728 | |                         "status": "multi_resource_complete",
729 | |                         "memory_mb": memory_mb,
730 | |                         "cpu_percent": cpu_percent,
731 | |                         "active_failures": active_failures,
732 | |                         "cpu_result": cpu_result,
733 | |                     }
    | |_____________________^ TRY300
734 |
735 |                   except TimeoutError as e:
    |

tests/load/stress_testing/test_stress_scenarios.py:163:21: TRY300 Consider moving this statement to an `else` block
    |
161 |                             del self.memory_pressure[key]
162 |
163 |                     return result
    |                     ^^^^^^^^^^^^^ TRY300
164 |
165 |                 except Exception:
    |

tests/mocks/mock_tools.py:92:13: TRY004 Prefer `TypeError` exception for invalid type
   |
90 |         if not isinstance(result, list):
91 |             msg = f"Invalid response: expected list, got {type(result).__name__}"
92 |             raise ValueError(msg)
   |             ^^^^^^^^^^^^^^^^^^^^^ TRY004
93 |
94 |         return result
   |

tests/mutation/test_service_mutation_testing.py:1:1: INP001 File `tests/mutation/test_service_mutation_testing.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/mutation/test_service_mutation_testing.py:158:9: SIM105 Use `contextlib.suppress(ConnectionError)` instead of `try`-`except`-`pass`
    |
157 |           # Test normal behavior - ConnectionError should be caught
158 | /         try:
159 | |             await circuit_breaker.call(operation_with_specific_error)
160 | |         except ConnectionError:
161 | |             pass  # Expected
    | |________________^ SIM105
162 |
163 |           assert circuit_breaker.failure_count == 1
    |
    = help: Replace with `contextlib.suppress(ConnectionError)`

tests/mutation/test_service_mutation_testing.py:400:17: TRY004 Prefer `TypeError` exception for invalid type
    |
398 |             if not isinstance(config_dict, dict):
399 |                 msg = "Config must be a dictionary"
400 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY004
401 |
402 |             required_fields = ["database_url", "cache_url"]
    |

tests/performance/conftest.py:1:1: INP001 File `tests/performance/conftest.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/performance/conftest.py:764:13: TRY300 Consider moving this statement to an `else` block
    |
762 |             client = redis.from_url(redis_url)
763 |             client.ping()
764 |             return redis_url
    |             ^^^^^^^^^^^^^^^^ TRY300
765 |         except (ImportError, AttributeError, RuntimeError):
766 |             # Fall back to fakeredis for testing
    |

tests/performance/test_performance_fixtures.py:1:1: INP001 File `tests/performance/test_performance_fixtures.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/performance/test_performance_targets.py:1:1: INP001 File `tests/performance/test_performance_targets.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/performance/test_performance_targets.py:77:17: TRY300 Consider moving this statement to an `else` block
   |
75 |                     f"concurrent test query {query_id}"
76 |                 )
77 |                 return {"success": True, "result": result}
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
78 |             except (TimeoutError, ConnectionError, RuntimeError) as e:
79 |                 return {"success": False, "error": str(e)}
   |

tests/performance/test_search_performance.py:1:1: INP001 File `tests/performance/test_search_performance.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/property/strategies.py:120:5: PLC0415 `import` should be at the top-level of a file
    |
118 | def file_paths(draw, relative: bool = False) -> Path:
119 |     """Generate valid file paths."""
120 |     import tempfile
    |     ^^^^^^^^^^^^^^^ PLC0415
121 |
122 |     components = draw(
    |

tests/security/authentication/test_jwt_security.py:518:51: S105 Possible hardcoded password assigned to: "token_type"
    |
517 |         assert result["valid"] is True
518 |         assert result["payload"]["token_type"] == "refresh"
    |                                                   ^^^^^^^^^ S105
519 |         assert result["payload"]["user_id"] == "test_user"
    |

tests/security/authorization/test_access_control.py:333:17: SIM102 Use a single `if` statement instead of nested `if` statements
    |
332 |                   # Time-based restrictions
333 | /                 if context.get("time_restricted") and not context.get("business_hours"):
334 | |                     if user_role not in ["admin", "api_service"]:
    | |_________________________________________________________________^ SIM102
335 |                           return False
    |
    = help: Combine `if` statements using `and`

tests/security/authorization/test_access_control.py:338:17: SIM102 Use a single `if` statement instead of nested `if` statements
    |
337 |                   # Location-based restrictions
338 | /                 if context.get("ip_restricted") and not context.get("trusted_ip"):
339 | |                     if permission in ["admin", "delete", "system_config"]:
    | |__________________________________________________________________________^ SIM102
340 |                           return False
    |
    = help: Combine `if` statements using `and`

tests/security/authorization/test_access_control.py:487:17: SIM102 Use a single `if` statement instead of nested `if` statements
    |
486 |                   # Check ownership for user resources
487 | /                 if acl.get("ownership_check") and user_role == "user":
488 | |                     if not user_id or not resource_owner or user_id != resource_owner:
    | |______________________________________________________________________________________^ SIM102
489 |                           return False
    |
    = help: Combine `if` statements using `and`

tests/security/penetration/test_api_security.py:25:9: PLC0415 `import` should be at the top-level of a file
   |
23 |     def api_client(self):
24 |         """Real API client for penetration testing against actual endpoints."""
25 |         import httpx
   |         ^^^^^^^^^^^^ PLC0415
26 |         from fastapi.testclient import TestClient
   |

tests/security/penetration/test_api_security.py:26:9: PLC0415 `import` should be at the top-level of a file
   |
24 |         """Real API client for penetration testing against actual endpoints."""
25 |         import httpx
26 |         from fastapi.testclient import TestClient
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
27 |
28 |         from src.api.main import app
   |

tests/security/penetration/test_api_security.py:28:9: PLC0415 `import` should be at the top-level of a file
   |
26 |         from fastapi.testclient import TestClient
27 |
28 |         from src.api.main import app
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
29 |
30 |         class RealPenetrationClient:
   |

tests/security/penetration/test_api_security.py:740:17: ASYNC109 Async function definition with a `timeout` parameter
    |
738 |                 command: str | list[str],
739 |                 env_vars: dict | None = None,
740 |                 timeout: int = 30,
    |                 ^^^^^^^^^^^^^^^^^ ASYNC109
741 |             ) -> dict[str, Any]:
742 |                 """Mock command execution for testing."""
    |
    = help: Use `asyncio.timeout` instead

tests/security/penetration/test_api_security.py:858:22: RUF001 String contains ambiguous `＆` (FULLWIDTH AMPERSAND). Did you mean `&` (AMPERSAND)?
    |
856 |             ],
857 |             "unicode_bypass": [
858 |                 "test＆＆echo injected",  # Fullwidth ampersand
    |                      ^^ RUF001
859 |                 "test；cat /etc/passwd",  # Fullwidth semicolon
860 |                 "test｜whoami",  # Fullwidth pipe
    |

tests/security/penetration/test_api_security.py:858:23: RUF001 String contains ambiguous `＆` (FULLWIDTH AMPERSAND). Did you mean `&` (AMPERSAND)?
    |
856 |             ],
857 |             "unicode_bypass": [
858 |                 "test＆＆echo injected",  # Fullwidth ampersand
    |                        ^^ RUF001
859 |                 "test；cat /etc/passwd",  # Fullwidth semicolon
860 |                 "test｜whoami",  # Fullwidth pipe
    |

tests/security/penetration/test_api_security.py:859:22: RUF001 String contains ambiguous `；` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
    |
857 |             "unicode_bypass": [
858 |                 "test＆＆echo injected",  # Fullwidth ampersand
859 |                 "test；cat /etc/passwd",  # Fullwidth semicolon
    |                      ^^ RUF001
860 |                 "test｜whoami",  # Fullwidth pipe
861 |             ],
    |

tests/security/penetration/test_api_security.py:860:22: RUF001 String contains ambiguous `｜` (FULLWIDTH VERTICAL LINE). Did you mean `|` (VERTICAL LINE)?
    |
858 |                 "test＆＆echo injected",  # Fullwidth ampersand
859 |                 "test；cat /etc/passwd",  # Fullwidth semicolon
860 |                 "test｜whoami",  # Fullwidth pipe
    |                      ^^ RUF001
861 |             ],
862 |         }
    |

tests/security/penetration/test_vector_penetration.py:140:17: TRY300 Consider moving this statement to an `else` block
    |
138 |                     query_vector=SecureVectorModel(values=vector),
139 |                 )
140 |                 return (attack_id, "success", True)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
141 |             except (ValueError, DimensionError) as e:
142 |                 return (attack_id, str(e), "security:" in str(e))
    |

tests/security/penetration/test_vector_penetration.py:143:21: B025 try-except block with duplicate exception `ValueError`
    |
141 |             except (ValueError, DimensionError) as e:
142 |                 return (attack_id, str(e), "security:" in str(e))
143 |             except (ValueError, ConnectionError, TimeoutError, RuntimeError) as e:
    |                     ^^^^^^^^^^ B025
144 |                 return (attack_id, str(e), False)
    |

tests/security/penetration/test_vector_penetration.py:179:17: SIM105 Use `contextlib.suppress(ValueError, TypeError)` instead of `try`-`except`-`pass`
    |
177 |               for _ in range(100):  # Multiple runs for statistical significance
178 |                   start = time.perf_counter()
179 | /                 try:
180 | |                     SearchStage(
181 | |                         stage_name=f"timing-test-{case_name}",
182 | |                         query_vector=SecureVectorModel(values=vector),
183 | |                     )
184 | |                 except (ValueError, TypeError):
185 | |                     pass  # Expected for invalid cases
    | |________________________^ SIM105
186 |                   end = time.perf_counter()
187 |                   times.append((end - start) * 1000)  # Convert to ms
    |
    = help: Replace with `contextlib.suppress(ValueError, TypeError)`

tests/security/penetration/test_vector_penetration.py:305:17: B025 try-except block with duplicate exception `ValueError`
    |
303 |             assert len(error_msg) > 0
304 |             # Should not crash or raise unexpected exceptions
305 |         except (ValueError, ConnectionError, TimeoutError, RuntimeError) as e:
    |                 ^^^^^^^^^^ B025
306 |             # Unexpected exceptions indicate a problem
307 |             pytest.fail(f"Unexpected exception with input {fuzz_vector[:5]}...: {e}")
    |

tests/security/penetration/test_vector_penetration.py:463:9: PLC0415 `import` should be at the top-level of a file
    |
461 |     def test_memory_leak_resistance(self) -> None:
462 |         """Test that repeated validation doesn't leak memory."""
463 |         import gc
    |         ^^^^^^^^^ PLC0415
464 |
465 |         # Force garbage collection
    |

tests/security/run_security_tests.py:175:42: PTH113 `os.path.isfile()` should be replaced by `Path.is_file()`
    |
173 |         try:
174 |             # Validate Python executable for security
175 |             if not sys.executable or not os.path.isfile(sys.executable):
    |                                          ^^^^^^^^^^^^^^ PTH113
176 |                 self.logger.warning(
177 |                     "Python executable not found or invalid, skipping Bandit"
    |

tests/security/run_security_tests.py:235:13: TRY300 Consider moving this statement to an `else` block
    |
233 |                     "report_file": str(bandit_report_file),
234 |                 }
235 |             return {"status": "failed", "error": "No report generated"}
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
236 |
237 |         except subprocess.TimeoutExpired:
    |

tests/security/run_security_tests.py:248:42: PTH113 `os.path.isfile()` should be replaced by `Path.is_file()`
    |
246 |         try:
247 |             # Validate Python executable for security
248 |             if not sys.executable or not os.path.isfile(sys.executable):
    |                                          ^^^^^^^^^^^^^^ PTH113
249 |                 self.logger.warning(
250 |                     "Python executable not found or invalid, skipping Safety"
    |

tests/security/run_security_tests.py:292:13: TRY300 Consider moving this statement to an `else` block
    |
290 |                   }
291 |               # No vulnerabilities found (Safety returns 0 exit code)
292 | /             return {
293 | |                 "status": "completed",
294 | |                 "tool": "safety",
295 | |                 "vulnerabilities_found": 0,
296 | |                 "message": "No vulnerabilities detected",
297 | |             }
    | |_____________^ TRY300
298 |
299 |           except subprocess.TimeoutExpired:
    |

tests/security/run_security_tests.py:353:38: PTH113 `os.path.isfile()` should be replaced by `Path.is_file()`
    |
352 |         # Validate Python executable for security
353 |         if not sys.executable or not os.path.isfile(sys.executable):
    |                                      ^^^^^^^^^^^^^^ PTH113
354 |             self.logger.warning(
355 |                 "Python executable not found or invalid, skipping pytest"
    |

tests/security/test_api_security.py:37:9: PLC0415 `import` should be at the top-level of a file
   |
35 |     def real_api_client(self):
36 |         """Real API client that tests actual FastAPI endpoints."""
37 |         from fastapi.testclient import TestClient
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
38 |
39 |         from src.api.main import app
   |

tests/security/test_api_security.py:39:9: PLC0415 `import` should be at the top-level of a file
   |
37 |         from fastapi.testclient import TestClient
38 |
39 |         from src.api.main import app
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
40 |
41 |         # Use the actual FastAPI application
   |

tests/security/test_api_security.py:74:25: SIM102 Use a single `if` statement instead of nested `if` statements
   |
72 |                               if not any(exp in header_value for exp in expected):
73 |                                   violations[header] = f"Invalid value: {header_value}"
74 | /                         elif isinstance(expected, str):
75 | |                             if expected not in header_value:
   | |____________________________________________________________^ SIM102
76 |                                   violations[header] = f"Invalid value: {header_value}"
   |
   = help: Combine `if` statements using `and`

tests/security/test_api_security.py:275:9: PLC0415 `import` should be at the top-level of a file
    |
273 |     async def test_real_rate_limiting_effectiveness(self, real_api_client):
274 |         """Test rate limiting on real API endpoints."""
275 |         from concurrent.futures import ThreadPoolExecutor
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
276 |
277 |         def make_request(endpoint: str, request_id: int):
    |

tests/security/test_api_security.py:585:9: PLC0415 `import` should be at the top-level of a file
    |
583 |     async def test_security_manager_integration(self):
584 |         """Test integrated security manager functionality."""
585 |         from src.services.security.integration import SecurityManager
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
586 |
587 |         security_manager = SecurityManager()
    |

tests/security/test_api_security.py:602:9: PLC0415 `import` should be at the top-level of a file
    |
600 |     async def test_security_monitoring_integration(self):
601 |         """Test security monitoring and alerting."""
602 |         from src.services.security.monitoring import SecurityEventType, SecurityMonitor
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
603 |
604 |         monitor = SecurityMonitor()
    |

tests/security/test_api_security.py:622:7: N818 Exception name `SecurityException` should be named with an Error suffix
    |
621 | # Custom security exception for testing
622 | class SecurityException(Exception):
    |       ^^^^^^^^^^^^^^^^^ N818
623 |     """Custom exception for security violations."""
    |

tests/security/test_api_security.py:656:5: PLC0415 `import` should be at the top-level of a file
    |
654 | async def mock_api_client(mock_security_validator):
655 |     """Mock API client with security middleware."""
656 |     from fastapi import FastAPI
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
657 |
658 |     app = FastAPI()
    |

tests/security/test_vector_security.py:21:5: PLC0415 `import` should be at the top-level of a file
   |
20 |       # Import all the models with vector fields
21 | /     from src.models.vector_search import (
22 | |         AdvancedHybridSearchRequest,
23 | |         BasicSearchRequest,
24 | |         SearchStage,
25 | |         SecureVectorModel,
26 | |     )
   | |_____^ PLC0415
27 |
28 |       print("🔒 Testing Vector Security Validation Fixes")
   |

tests/security/validate_security_framework.py:85:13: PLC0415 `import` should be at the top-level of a file
   |
83 |         # Test 1: Command injection prevention
84 |         try:
85 |             from tests.load.run_load_tests import LoadTestRunner
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
86 |
87 |             runner = LoadTestRunner()
   |

tests/security/validate_security_framework.py:177:13: PLC0415 `import` should be at the top-level of a file
    |
176 |         try:
177 |             from tests.load.run_load_tests import LoadTestRunner
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
178 |
179 |             runner = LoadTestRunner()
    |

tests/security/validate_security_framework.py:223:17: S607 Starting a process with a partial executable path
    |
221 |           try:
222 |               result = subprocess.run(
223 | /                 [
224 | |                     "python",
225 | |                     str(project_root / "tests/load/run_load_tests.py"),
226 | |                     "--mode",
227 | |                     "pytest",
228 | |                     "--test-type",
229 | |                     "load",
230 | |                 ],
    | |_________________^ S607
231 |                   capture_output=True,
232 |                   text=True,
    |

tests/security/vulnerability/test_dependency_scanning.py:104:29: PERF401 Use `list.extend` to create a transformed list
    |
102 |                               version, vuln["versions"]
103 |                           ):
104 | /                             vulnerabilities.append(
105 | |                                 {
106 | |                                     "package": package_name,
107 | |                                     "installed_version": version,
108 | |                                     "vulnerability": vuln,
109 | |                                 }
110 | |                             )
    | |_____________________________^ PERF401
111 |
112 |                   return vulnerabilities
    |
    = help: Replace for loop with list.extend

tests/security/vulnerability/test_dependency_scanning.py:342:9: PLC0415 `import` should be at the top-level of a file
    |
340 |     async def _create_real_safety_scanner(self):
341 |         """Create real Safety scanner with API integration."""
342 |         import httpx
    |         ^^^^^^^^^^^^ PLC0415
343 |
344 |         class RealSafetyScanner:
    |

tests/security/vulnerability/test_dependency_scanning.py:362:38: ASYNC221 Async functions should not run processes with blocking methods
    |
360 |                     if req_file.exists():
361 |                         try:
362 |                             result = subprocess.run(
    |                                      ^^^^^^^^^^^^^^ ASYNC221
363 |                                 [
364 |                                     sys.executable,
    |

tests/security/vulnerability/test_dependency_scanning.py:392:9: PLC0415 `import` should be at the top-level of a file
    |
390 |     async def _create_osvi_scanner(self):
391 |         """Create real OSVI scanner integration."""
392 |         import httpx
    |         ^^^^^^^^^^^^ PLC0415
393 |
394 |         class OSVIScanner:
    |

tests/security/vulnerability/test_dependency_scanning.py:435:25: B030 `except` handlers should only be exception classes or tuples of exception classes
    |
434 |                     except (
435 |                         asyncpg.PostgresError if asyncpg else Exception,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B030
436 |                         ConnectionError,
437 |                         TimeoutError,
    |

tests/security/vulnerability/test_dependency_scanning.py:453:30: ASYNC221 Async functions should not run processes with blocking methods
    |
451 |                 """Extract installed packages and versions."""
452 |                 try:
453 |                     result = subprocess.run(
    |                              ^^^^^^^^^^^^^^ ASYNC221
454 |                         [sys.executable, "-m", "pip", "list", "--format=json"],
455 |                         cwd=project_root,
    |

tests/security/vulnerability/test_dependency_scanning.py:475:9: PLC0415 `import` should be at the top-level of a file
    |
473 |     async def _create_github_advisory_scanner(self):
474 |         """Create GitHub Security Advisory scanner."""
475 |         import httpx
    |         ^^^^^^^^^^^^ PLC0415
476 |
477 |         class GitHubAdvisoryScanner:
    |

tests/security/vulnerability/test_dependency_scanning.py:522:33: PLW2901 `for` loop variable `line` overwritten by assignment target
    |
520 |                         with req_file.open() as f:
521 |                             for line in f:
522 |                                 line = line.strip()
    |                                 ^^^^ PLW2901
523 |                                 if line and not line.startswith("#"):
524 |                                     package_name = (
    |

tests/security/vulnerability/test_dependency_scanning.py:537:9: PLC0415 `import` should be at the top-level of a file
    |
535 |     async def _create_snyk_scanner(self):
536 |         """Create Snyk scanner integration."""
537 |         import httpx
    |         ^^^^^^^^^^^^ PLC0415
538 |
539 |         class SnykScanner:
    |

tests/security/vulnerability/test_dependency_scanning.py:641:21: DTZ005 `datetime.datetime.now()` called without a `tz` argument
    |
639 |         results_dir.mkdir(exist_ok=True)
640 |
641 |         timestamp = datetime.now().isoformat()
    |                     ^^^^^^^^^^^^^^ DTZ005
642 |         results_file = results_dir / f"scan-{timestamp}.json"
    |
    = help: Pass a `datetime.timezone` object to the `tz` parameter

tests/security/vulnerability/test_dependency_scanning.py:1044:25: S607 Starting a process with a partial executable path
     |
1042 |                 try:
1043 |                     result = subprocess.run(
1044 |                         ["semgrep", "--version"],
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^ S607
1045 |                         capture_output=True,
1046 |                         timeout=10,
     |

tests/security/vulnerability/test_dependency_scanning.py:1056:25: S607 Starting a process with a partial executable path
     |
1054 |                 try:
1055 |                     result = subprocess.run(
1056 |                         ["trivy", "--version"],
     |                         ^^^^^^^^^^^^^^^^^^^^^^ S607
1057 |                         capture_output=True,
1058 |                         timeout=10,
     |

tests/security/vulnerability/test_dependency_scanning.py:1214:26: DTZ005 `datetime.datetime.now()` called without a `tz` argument
     |
1212 |         """Comprehensive security audit using multiple real scanners."""
1213 |         audit_results = {
1214 |             "timestamp": datetime.now().isoformat(),
     |                          ^^^^^^^^^^^^^^ DTZ005
1215 |             "scanners": {},
1216 |             "summary": {"total_issues": 0, "critical_issues": 0, "high_issues": 0},
     |
     = help: Pass a `datetime.timezone` object to the `tz` parameter

tests/security/vulnerability/test_dependency_scanning.py:1413:13: TRY300 Consider moving this statement to an `else` block
     |
1411 |             if result.stdout:
1412 |                 return json.loads(result.stdout)
1413 |             return {"results": [], "metrics": {}}
     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ TRY300
1414 |
1415 |         except (json.JSONDecodeError, ValueError, TypeError) as e:
     |

tests/security/vulnerability/test_dependency_scanning.py:1445:13: TRY300 Consider moving this statement to an `else` block
     |
1443 |             if result.stdout:
1444 |                 return json.loads(result.stdout)
1445 |             return {"results": []}
     |             ^^^^^^^^^^^^^^^^^^^^^^ TRY300
1446 |
1447 |         except (json.JSONDecodeError, ValueError, TypeError) as e:
     |

tests/security/vulnerability/test_dependency_scanning.py:1479:13: TRY300 Consider moving this statement to an `else` block
     |
1477 |             if result.stdout:
1478 |                 return json.loads(result.stdout)
1479 |             return {"Results": []}
     |             ^^^^^^^^^^^^^^^^^^^^^^ TRY300
1480 |
1481 |         except (json.JSONDecodeError, ValueError, TypeError) as e:
     |

tests/unit/cli/commands/test_config.py:18:21: S105 Possible hardcoded password assigned to: "TEST_SECRET_VALUE"
   |
17 | # Test constants to avoid hardcoded sensitive values
18 | TEST_SECRET_VALUE = "test_secret"  # nosec
   |                     ^^^^^^^^^^^^^ S105
19 | TEST_PASS_VALUE = "test_password"  # nosec
20 | TEST_TOKEN_VALUE = "test_secret_token"  # nosec
   |

tests/unit/cli/commands/test_config.py:19:19: S105 Possible hardcoded password assigned to: "TEST_PASS_VALUE"
   |
17 | # Test constants to avoid hardcoded sensitive values
18 | TEST_SECRET_VALUE = "test_secret"  # nosec
19 | TEST_PASS_VALUE = "test_password"  # nosec
   |                   ^^^^^^^^^^^^^^^ S105
20 | TEST_TOKEN_VALUE = "test_secret_token"  # nosec
   |

tests/unit/cli/commands/test_config.py:20:20: S105 Possible hardcoded password assigned to: "TEST_TOKEN_VALUE"
   |
18 | TEST_SECRET_VALUE = "test_secret"  # nosec
19 | TEST_PASS_VALUE = "test_password"  # nosec
20 | TEST_TOKEN_VALUE = "test_secret_token"  # nosec
   |                    ^^^^^^^^^^^^^^^^^^^ S105
   |

tests/unit/cli/commands/test_setup_modernized.py:725:13: PLC0415 `import` should be at the top-level of a file
    |
723 |         """Test that ConfigurationWizard imports safely."""
724 |         try:
725 |             from src.cli.commands.setup import ConfigurationWizard
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
726 |
727 |             wizard = ConfigurationWizard()
    |

tests/unit/cli/commands/test_setup_modernized.py:738:13: PLC0415 `import` should be at the top-level of a file
    |
736 |         """Test that setup command imports safely."""
737 |         try:
738 |             from src.cli.commands.setup import setup
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
739 |
740 |             assert setup is not None
    |

tests/unit/config/test_config.py:554:1: E402 Module level import not at top of file
    |
552 | """
553 |
554 | from collections.abc import Generator
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ E402
555 | from typing import Any
    |

tests/unit/config/test_config.py:555:1: E402 Module level import not at top of file
    |
554 | from collections.abc import Generator
555 | from typing import Any
    | ^^^^^^^^^^^^^^^^^^^^^^ E402
556 |
557 | import pytest
    |

tests/unit/config/test_config.py:557:1: E402 Module level import not at top of file
    |
555 | from typing import Any
556 |
557 | import pytest
    | ^^^^^^^^^^^^^ E402
558 | from hypothesis import strategies as st
    |

tests/unit/config/test_config.py:558:1: E402 Module level import not at top of file
    |
557 | import pytest
558 | from hypothesis import strategies as st
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ E402
    |

tests/unit/config/test_config.py:715:9: TRY300 Consider moving this statement to an `else` block
    |
713 |     try:
714 |         config_class(**invalid_params)
715 |         return []
    |         ^^^^^^^^^ TRY300
716 |     except (ValueError, KeyError, TypeError, AttributeError) as e:
717 |         return [str(e)]
    |

tests/unit/config/test_config_async_validation.py:79:17: TRY300 Consider moving this statement to an `else` block
   |
77 |             try:
78 |                 config = Config.model_validate(config_data)
79 |                 return config, None
   |                 ^^^^^^^^^^^^^^^^^^^ TRY300
80 |             except (ConnectionError, RuntimeError, ValueError) as e:
81 |                 return None, str(e)
   |

tests/unit/config/test_config_error_handling.py:87:9: PT012 `pytest.raises()` block should contain a single simple statement
   |
85 |       def test_error_context_with_exception(self, _caplog):
86 |           """Test ErrorContext when exception occurs."""
87 | /         with pytest.raises(ValueError), ErrorContext("failing_operation", test_id=123):
88 | |             msg = "test error"
89 | |             raise ValueError(msg)
   | |_________________________________^ PT012
90 |
91 |           # Check that error was logged with context
   |

tests/unit/config/test_config_error_handling.py:98:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
 96 |       async def test_async_error_context(self, _caplog):
 97 |           """Test async error context manager."""
 98 | /         with pytest.raises(RuntimeError):
 99 | |             async with async_error_context("async_operation", async_id=456):
100 | |                 msg = "async error"
101 | |                 raise RuntimeError(msg)
    | |_______________________________________^ PT012
102 |
103 |           assert "Error in async_operation" in _caplog.text
    |

tests/unit/config/test_config_error_handling.py:129:9: SIM105 Use `contextlib.suppress(ValidationError)` instead of `try`-`except`-`pass`
    |
127 |       def test_handle_validation_error_masks_sensitive_data(self):
128 |           """Test that sensitive data is masked in validation errors."""
129 | /         try:
130 | |             # Create error with sensitive field
131 | |             TestConfig(api_key="", port=8080)
132 | |         except ValidationError:
133 | |             pass  # This won't actually fail, so simulate
    | |________________^ SIM105
134 |
135 |           # Simulate validation error with sensitive data
    |
    = help: Replace with `contextlib.suppress(ValidationError)`

tests/unit/config/test_config_models_complete.py:29:23: S105 Possible hardcoded password assigned to: "TEST_REDIS_PASSWORD"
   |
28 | # Test constants to avoid hardcoded sensitive values
29 | TEST_REDIS_PASSWORD = "test_redis_secret"
   |                       ^^^^^^^^^^^^^^^^^^^ S105
   |

tests/unit/config/test_migration.py:166:9: PLC0415 `import` should be at the top-level of a file
    |
165 |         # Invalid: overlap >= chunk_size should fail
166 |         from src.config.settings import ChunkingConfig
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
167 |
168 |         with pytest.raises(
    |

tests/unit/config/test_migration.py:179:9: PLC0415 `import` should be at the top-level of a file
    |
177 |     def test_get_settings_singleton(self):
178 |         """Test that get_settings returns the same instance."""
179 |         from src.config.settings import get_settings, reset_settings
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
180 |
181 |         # Reset to ensure clean state
    |

tests/unit/config/test_migration.py:192:9: PLC0415 `import` should be at the top-level of a file
    |
190 |     def test_set_and_reset_settings(self):
191 |         """Test setting and resetting global settings."""
192 |         from src.config.settings import get_settings, reset_settings, set_settings
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
193 |
194 |         # Create custom settings
    |

tests/unit/config/test_migration.py:210:9: PLC0415 `import` should be at the top-level of a file
    |
208 |       def test_convenience_config_functions(self):
209 |           """Test convenience functions for accessing config sections."""
210 | /         from src.config.settings import (
211 | |             get_cache_config,
212 | |             get_embedding_config,
213 | |             get_openai_config,
214 | |             get_performance_config,
215 | |             get_qdrant_config,
216 | |             get_security_config,
217 | |             reset_settings,
218 | |         )
    | |_________^ PLC0415
219 |
220 |           # Reset to ensure clean state
    |

tests/unit/framework/test_framework_validation.py:1:1: INP001 File `tests/unit/framework/test_framework_validation.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/unit/infrastructure/test_http_mocking_patterns.py:93:13: TRY300 Consider moving this statement to an `else` block
   |
91 |                 return "BROWSER_REQUIRED"
92 |
93 |             return "LIGHTWEIGHT_OK"
   |             ^^^^^^^^^^^^^^^^^^^^^^^ TRY300
94 |
95 |         except (httpx.HTTPError, ValueError, KeyError):
   |

tests/unit/infrastructure/test_http_mocking_patterns.py:397:17: TRY300 Consider moving this statement to an `else` block
    |
395 |             try:
396 |                 await failing_operation()
397 |                 return "success"
    |                 ^^^^^^^^^^^^^^^^ TRY300
398 |             except ValueError as e:
399 |                 return f"handled_error: {e}"
    |

tests/unit/infrastructure/test_pydantic_settings_patterns.py:298:13: S106 Possible hardcoded password assigned to argument: "secret_key"
    |
296 |             app_name="my-app",
297 |             version="2.0.0",
298 |             secret_key="super-secret",  # Test data
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^ S106
299 |         )
    |

tests/unit/infrastructure/test_pydantic_settings_patterns.py:370:40: S106 Possible hardcoded password assigned to argument: "password"
    |
368 |         with pytest.raises(ValidationError) as exc_info:
369 |             CustomValidatedSettings(
370 |                 email="invalid-email", password="SecurePass123"
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^ S106
371 |             )  # Test data
372 |         assert "Invalid email format" in str(exc_info.value)
    |

tests/unit/infrastructure/test_pydantic_settings_patterns.py:376:43: S106 Possible hardcoded password assigned to argument: "password"
    |
374 |         with pytest.raises(ValidationError) as exc_info:
375 |             CustomValidatedSettings(
376 |                 email="user@example.com", password="weakpass"
    |                                           ^^^^^^^^^^^^^^^^^^^ S106
377 |             )  # Test data
378 |         assert "uppercase" in str(exc_info.value)
    |

tests/unit/infrastructure/test_watchdog_integration.py:164:17: TRY301 Abstract `raise` to an inner function
    |
162 |                 # Simulate config reload that fails
163 |                 msg = "Invalid configuration format"
164 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY301
165 |             except (TimeoutError, ConnectionError, RuntimeError, ValueError):
166 |                 error_count += 1
    |

tests/unit/infrastructure/test_watchdog_integration.py:217:46: ASYNC109 Async function definition with a `timeout` parameter
    |
215 |         mock_observer.is_alive.return_value = True
216 |
217 |         async def shutdown_watcher(observer, timeout=5.0):
    |                                              ^^^^^^^^^^^ ASYNC109
218 |             """Gracefully shutdown file watcher."""
219 |             observer.stop()
    |
    = help: Use `asyncio.timeout` instead

tests/unit/infrastructure/test_watchdog_integration.py:239:21: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
238 |               # Simulate the observer stopping after a short time
239 |               _task = asyncio.create_task(
    |  _____________________^
240 | |                 _simulate_observer_stop(observer, shutdown_event)
241 | |             )
    | |_____________^ RUF006
242 |               await shutdown_event.wait()
    |

tests/unit/infrastructure/test_watchdog_integration.py:269:17: TRY004 Prefer `TypeError` exception for invalid type
    |
267 |             if not isinstance(config_data, dict):
268 |                 msg = "Config must be a dictionary"
269 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY004
270 |
271 |             for key in required_keys:
    |

tests/unit/infrastructure/test_watchdog_integration.py:332:25: TRY004 Prefer `TypeError` exception for invalid type
    |
330 |                     if not isinstance(new_config, dict):
331 |                         msg = "Invalid config format"
332 |                         raise ValueError(msg)
    |                         ^^^^^^^^^^^^^^^^^^^^^ TRY004
333 |
334 |                     # Apply atomically
    |

tests/unit/mcp_services/test_document_service.py:335:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
333 |           mock_projects.register_tools = Mock()
334 |
335 | /         with patch("src.mcp_services.document_service.projects", mock_projects):
336 | |             with patch.multiple(
337 | |                 "src.mcp_services.document_service",
338 | |                 document_management=Mock(register_tools=Mock()),
339 | |                 collections=Mock(register_tools=Mock()),
340 | |                 crawling=Mock(register_tools=Mock()),
341 | |                 content_intelligence=Mock(register_tools=Mock()),
342 | |             ):
    | |______________^ SIM117
343 |                   await service._register_document_tools()
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_document_service.py:436:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
434 |           )
435 |
436 | /         with (
437 | |             patch(
438 | |                 "src.mcp_services.document_service.document_management",
439 | |                 mock_failing_tool,
440 | |             ),
441 | |             patch.multiple(
442 | |                 "src.mcp_services.document_service",
443 | |                 collections=Mock(register_tools=Mock()),
444 | |                 projects=Mock(register_tools=Mock()),
445 | |                 crawling=Mock(register_tools=Mock()),
446 | |                 content_intelligence=Mock(register_tools=Mock()),
447 | |             ),
448 | |         ):
449 | |             # Tool registration should raise the exception
450 | |             with pytest.raises(Exception, match="Tool registration failed"):
    | |____________________________________________________________________________^ SIM117
451 |                   await service._register_document_tools()
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_document_service.py:466:18: B017 Do not assert blind exception: `Exception`
    |
464 |             mock_tool.register_tools.side_effect = Exception("Registration failed")
465 |
466 |             with pytest.raises(Exception):
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^ B017
467 |                 await service._register_document_tools()
    |

tests/unit/mcp_services/test_orchestrator_service.py:101:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
 99 |           service = OrchestratorService()
100 |
101 | /         with patch.object(
102 | |             service, "_initialize_domain_services", new_callable=AsyncMock
103 | |         ):
104 | |             with patch.object(
105 | |                 service, "_initialize_agentic_orchestration", new_callable=AsyncMock
106 | |             ):
    | |______________^ SIM117
107 |                   with patch.object(
108 |                       service, "_register_orchestrator_tools", new_callable=AsyncMock
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_search_service.py:67:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   |
65 |           service = SearchService()
66 |
67 | /         with patch.object(service, "_register_search_tools", new_callable=AsyncMock):
68 | |             with caplog.at_level(logging.INFO):
   | |_______________________________________________^ SIM117
69 |                   await service.initialize(mock_client_manager)
   |
   = help: Combine `with` statements

tests/unit/mcp_services/test_search_service.py:245:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
243 |           mock_web_search.register_tools = Mock()
244 |
245 | /         with patch("src.mcp_services.search_service.web_search", mock_web_search):
246 | |             with patch.multiple(
247 | |                 "src.mcp_services.search_service",
248 | |                 hybrid_search=Mock(register_tools=Mock()),
249 | |                 hyde_search=Mock(register_tools=Mock()),
250 | |                 multi_stage_search=Mock(register_tools=Mock()),
251 | |                 search_with_reranking=Mock(register_tools=Mock()),
252 | |             ):
    | |______________^ SIM117
253 |                   await service._register_search_tools()
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_search_service.py:284:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
282 |           )
283 |
284 | /         with patch("src.mcp_services.search_service.hybrid_search", mock_failing_tool):
285 | |             with patch.multiple(
286 | |                 "src.mcp_services.search_service",
287 | |                 hyde_search=Mock(register_tools=Mock()),
288 | |                 multi_stage_search=Mock(register_tools=Mock()),
289 | |                 search_with_reranking=Mock(register_tools=Mock()),
290 | |                 web_search=Mock(register_tools=Mock()),
291 | |             ):
    | |______________^ SIM117
292 |                   # Tool registration should raise the exception
293 |                   with pytest.raises(Exception, match="Tool registration failed"):
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_search_service.py:394:18: B017 Do not assert blind exception: `Exception`
    |
392 |             mock_tool.register_tools.side_effect = Exception("Registration failed")
393 |
394 |             with pytest.raises(Exception):
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^ B017
395 |                 await service._register_search_tools()
    |

tests/unit/mcp_services/test_system_service.py:79:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
   |
77 |           service = SystemService()
78 |
79 | /         with patch.object(service, "_register_system_tools", new_callable=AsyncMock):
80 | |             with caplog.at_level(logging.INFO):
   | |_______________________________________________^ SIM117
81 |                   await service.initialize(mock_client_manager)
   |
   = help: Combine `with` statements

tests/unit/mcp_services/test_system_service.py:211:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
209 |           mock_system_health.register_tools = Mock()
210 |
211 | /         with patch("src.mcp_services.system_service.system_health", mock_system_health):
212 | |             with patch.multiple(
213 | |                 "src.mcp_services.system_service",
214 | |                 configuration=Mock(register_tools=Mock()),
215 | |                 cost_estimation=Mock(register_tools=Mock()),
216 | |                 embeddings=Mock(register_tools=Mock()),
217 | |                 filtering=Mock(register_tools=Mock()),
218 | |             ):
    | |______________^ SIM117
219 |                   await service._register_system_tools()
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_system_service.py:268:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
266 |           mock_configuration.register_tools = Mock()
267 |
268 | /         with patch("src.mcp_services.system_service.configuration", mock_configuration):
269 | |             with patch.multiple(
270 | |                 "src.mcp_services.system_service",
271 | |                 system_health=Mock(register_tools=Mock()),
272 | |                 cost_estimation=Mock(register_tools=Mock()),
273 | |                 embeddings=Mock(register_tools=Mock()),
274 | |                 filtering=Mock(register_tools=Mock()),
275 | |             ):
    | |______________^ SIM117
276 |                   await service._register_system_tools()
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_system_service.py:374:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
372 |           mock_embeddings.register_tools = Mock()
373 |
374 | /         with patch("src.mcp_services.system_service.embeddings", mock_embeddings):
375 | |             with patch.multiple(
376 | |                 "src.mcp_services.system_service",
377 | |                 system_health=Mock(register_tools=Mock()),
378 | |                 configuration=Mock(register_tools=Mock()),
379 | |                 cost_estimation=Mock(register_tools=Mock()),
380 | |                 filtering=Mock(register_tools=Mock()),
381 | |             ):
    | |______________^ SIM117
382 |                   await service._register_system_tools()
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_system_service.py:398:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
396 |           mock_filtering.register_tools = Mock()
397 |
398 | /         with patch("src.mcp_services.system_service.filtering", mock_filtering):
399 | |             with patch.multiple(
400 | |                 "src.mcp_services.system_service",
401 | |                 system_health=Mock(register_tools=Mock()),
402 | |                 configuration=Mock(register_tools=Mock()),
403 | |                 cost_estimation=Mock(register_tools=Mock()),
404 | |                 embeddings=Mock(register_tools=Mock()),
405 | |             ):
    | |______________^ SIM117
406 |                   await service._register_system_tools()
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_system_service.py:475:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
473 |           )
474 |
475 | /         with patch("src.mcp_services.system_service.system_health", mock_failing_tool):
476 | |             with patch.multiple(
477 | |                 "src.mcp_services.system_service",
478 | |                 configuration=Mock(register_tools=Mock()),
479 | |                 cost_estimation=Mock(register_tools=Mock()),
480 | |                 embeddings=Mock(register_tools=Mock()),
481 | |                 filtering=Mock(register_tools=Mock()),
482 | |             ):
    | |______________^ SIM117
483 |                   # Tool registration should raise the exception
484 |                   with pytest.raises(Exception, match="Tool registration failed"):
    |
    = help: Combine `with` statements

tests/unit/mcp_services/test_system_service.py:498:18: B017 Do not assert blind exception: `Exception`
    |
496 |             mock_tool.register_tools.side_effect = Exception("Registration failed")
497 |
498 |             with pytest.raises(Exception):
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^ B017
499 |                 await service._register_system_tools()
    |

tests/unit/mcp_services/test_unified_mcp_server.py:466:17: TRY301 Abstract `raise` to an inner function
    |
464 |                 # Simulate an exception during operation
465 |                 msg = "Operation failed"
466 |                 raise RuntimeError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^ TRY301
467 |         except RuntimeError:
468 |             pass
    |

tests/unit/mcp_tools/test_tool_registry.py:412:13: PLC0415 `import` should be at the top-level of a file
    |
411 |         if TYPE_CHECKING:
412 |             from fastmcp import FastMCP
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
413 |             from src.infrastructure.client_manager import ClientManager
    |

tests/unit/mcp_tools/test_tool_registry.py:413:13: PLC0415 `import` should be at the top-level of a file
    |
411 |         if TYPE_CHECKING:
412 |             from fastmcp import FastMCP
413 |             from src.infrastructure.client_manager import ClientManager
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
414 |
415 |             # This should not raise type errors
    |

tests/unit/mcp_tools/tools/test_collections.py:217:9: PLC0415 `import` should be at the top-level of a file
    |
215 |     def test_tool_registration(self, mock_client_manager):
216 |         """Test that collection tools are properly registered."""
217 |         from src.mcp_tools.tools.collections import register_tools
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
218 |
219 |         mock_mcp = MagicMock()
    |

tests/unit/mcp_tools/tools/test_documents.py:237:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
235 |             except (ConnectionError, RuntimeError, ValueError) as e:
236 |                 # Verify error is propagated correctly
237 |                 assert "URL not allowed" in str(e)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
238 |
239 |             # Verify error logging
    |

tests/unit/mcp_tools/tools/test_documents.py:264:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
262 |             except AttributeError as e:
263 |                 # Verify error is related to None crawl manager
264 |                 assert "'NoneType' object has no attribute 'scrape_url'" in str(e)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
265 |
266 |             # Verify error logging
    |

tests/unit/mcp_tools/tools/test_documents.py:301:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
299 |             except ValueError as e:
300 |                 # Verify error relates to scraping failure
301 |                 assert "Failed to scrape" in str(e)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
302 |
303 |             # Verify error logging
    |

tests/unit/mcp_tools/tools/test_documents.py:338:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
336 |             except (ConnectionError, RuntimeError, ValueError) as e:
337 |                 # Verify error relates to embedding failure
338 |                 assert "Embedding service error" in str(e)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
339 |
340 |             # Verify error logging
    |

tests/unit/mcp_tools/tools/test_documents.py:382:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
380 |             except (ConnectionError, RuntimeError, ValueError) as e:
381 |                 # Verify error relates to vector DB failure
382 |                 assert "Vector DB storage error" in str(e)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
383 |
384 |             # Verify error logging
    |

tests/unit/mcp_tools/tools/test_documents.py:545:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
543 |             except ValueError as e:
544 |                 # Should handle minimal data gracefully even when URL validation fails
545 |                 assert "URL not allowed" in str(e)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
546 |
547 |     async def test_comprehensive_document_workflow(
    |

tests/unit/mcp_tools/tools/test_projects.py:721:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
720 |           # Test that exception is propagated
721 | /         with pytest.raises(Exception, match="Collection creation failed"):
722 | |             request = ProjectRequest(name="Test Project", quality_tier="balanced")
723 | |
724 | |             await registered_tools["create_project"](request, mock_context)
    | |___________________________________________________________________________^ PT012
725 |
726 |           # Verify cleanup was attempted
    |

tests/unit/processing/test_chunking.py:1:1: INP001 File `tests/unit/processing/test_chunking.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/unit/processing/test_chunking_performance.py:1:1: INP001 File `tests/unit/processing/test_chunking_performance.py` is part of an implicit namespace package. Add an `__init__.py`.
tests/unit/processing/test_chunking_performance.py:217:17: PLC0415 `import` should be at the top-level of a file
    |
215 |             with patch("builtins.__import__", side_effect=mock_import):
216 |                 # This should trigger the import and handle the error
217 |                 from src.chunking import DocumentChunker
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
218 |
219 |                 config = ChunkingConfig()
    |

tests/unit/services/agents/test_agentic_orchestrator.py:494:23: TRY002 Create your own exception
    |
492 |             if tool_name == "failing_tool":
493 |                 msg = "Tool execution failed"
494 |                 raise Exception(msg)
    |                       ^^^^^^^^^^^^^^ TRY002
495 |             return {
496 |                 "tool": tool_name,
    |

tests/unit/services/agents/test_agentic_orchestrator.py:891:9: PLC0415 `import` should be at the top-level of a file
    |
889 |         """Test get_orchestrator returns singleton instance."""
890 |         # Clear any existing instance
891 |         import src.services.agents.agentic_orchestrator as orchestrator_module
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
892 |
893 |         orchestrator_module._orchestrator_instance = None
    |

tests/unit/services/agents/test_agentic_orchestrator.py:907:9: PLC0415 `import` should be at the top-level of a file
    |
905 |     def test_get_orchestrator_creates_new_when_none(self):
906 |         """Test get_orchestrator creates new instance when none exists."""
907 |         import src.services.agents.agentic_orchestrator as orchestrator_module
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
908 |
909 |         orchestrator_module._orchestrator_instance = None
    |

tests/unit/services/agents/test_agentic_orchestrator.py:919:9: PLC0415 `import` should be at the top-level of a file
    |
917 |     async def test_orchestrate_tools_convenience_function(self):
918 |         """Test orchestrate_tools convenience function."""
919 |         import src.services.agents.agentic_orchestrator as orchestrator_module
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
920 |
921 |         orchestrator_module._orchestrator_instance = None
    |

tests/unit/services/agents/test_agentic_orchestrator.py:1004:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
     |
1002 |             except (ConnectionError, RuntimeError, ValueError) as e:
1003 |                 # If it does raise an exception, it should be handled gracefully
1004 |                 assert "error" in str(e).lower() or "invalid" in str(e).lower()
     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
1005 |
1006 |     @pytest.mark.asyncio
     |

tests/unit/services/agents/test_agentic_orchestrator.py:1004:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
     |
1002 |             except (ConnectionError, RuntimeError, ValueError) as e:
1003 |                 # If it does raise an exception, it should be handled gracefully
1004 |                 assert "error" in str(e).lower() or "invalid" in str(e).lower()
     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
1005 |
1006 |     @pytest.mark.asyncio
     |

tests/unit/services/agents/test_agentic_rag.py:744:17: PT017 Found assertion on exception `e` in `except` block, use `pytest.raises()` instead
    |
742 |             except (ConnectionError, RuntimeError, ValueError) as e:
743 |                 # If exceptions occur, they should be handled gracefully
744 |                 assert isinstance(e, ValueError | RuntimeError)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT017
745 |
746 |     def test_orchestrator_state_management(self):
    |

tests/unit/services/agents/test_dynamic_tool_discovery.py:1288:9: PLC0415 `import` should be at the top-level of a file
     |
1286 |         """Test discovery engine global state management."""
1287 |         # Access global variable to test singleton behavior
1288 |         from src.services.agents.dynamic_tool_discovery import _discovery_engine
     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLC0415
1289 |
1290 |         # Get engine instances
     |

tests/unit/services/functional/test_browser_automation_monitoring.py:187:17: TRY300 Consider moving this statement to an `else` block
    |
185 |                 result["failover_tier"] = tier_name
186 |                 result["attempts"] = tier_order.index(tier_name) + 1
187 |                 return result
    |                 ^^^^^^^^^^^^^ TRY300
188 |
189 |             except (ConnectionError, RuntimeError, OSError) as e:
    |

tests/unit/services/functional/test_browser_automation_monitoring.py:319:18: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
318 |         # First two requests should succeed
319 |         _task1 = asyncio.create_task(lightweight_tier.execute_request("test1"))
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
320 |         _task2 = asyncio.create_task(lightweight_tier.execute_request("test2"))
    |

tests/unit/services/functional/test_browser_automation_monitoring.py:320:18: RUF006 Store a reference to the return value of `asyncio.create_task`
    |
318 |         # First two requests should succeed
319 |         _task1 = asyncio.create_task(lightweight_tier.execute_request("test1"))
320 |         _task2 = asyncio.create_task(lightweight_tier.execute_request("test2"))
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF006
321 |
322 |         # Third request should fail due to capacity
    |

tests/unit/services/functional/test_database_connection_pooling.py:117:13: TRY300 Consider moving this statement to an `else` block
    |
115 |             if self.failure_count > 0:
116 |                 self.failure_count = max(0, self.failure_count - 1)
117 |             return result
    |             ^^^^^^^^^^^^^ TRY300
118 |         except Exception:
119 |             self.failure_count += 1
    |

tests/unit/services/functional/test_embeddings.py:285:13: SIM105 Use `contextlib.suppress(HTTPException)` instead of `try`-`except`-`pass`
    |
283 |           # Multiple attempts should trigger circuit breaker
284 |           for _i in range(5):
285 | /             try:
286 | |                 await generate_embeddings(
287 | |                     texts=["test"],
288 | |                     embedding_client=mock_client,
289 | |                 )
290 | |             except HTTPException:
291 | |                 pass  # Expected
    | |____________________^ SIM105
292 |
293 |           # Circuit breaker should be triggered by now
    |
    = help: Replace with `contextlib.suppress(HTTPException)`

tests/unit/services/observability/test_init.py:154:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
152 |           ].OTLPMetricExporter = MagicMock()
153 |
154 | /         with patch.dict("sys.modules", mock_modules):
155 | |             with patch("src.services.observability.init._setup_auto_instrumentation"):
    | |______________________________________________________________________________________^ SIM117
156 |                   result = initialize_observability(config)
    |
    = help: Combine `with` statements

tests/unit/services/observability/test_observability_ai_tracking.py:142:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
140 |           tracker = AIOperationTracker()
141 |
142 | /         with (
143 | |             pytest.raises(ValueError),
144 | |             tracker.track_embedding_generation(
145 | |                 provider="openai",
146 | |                 model="text-embedding-ada-002",
147 | |                 input_texts="Test text",
148 | |             ),
149 | |         ):
150 | |             msg = "API rate limit exceeded"
151 | |             raise ValueError(msg)
    | |_________________________________^ PT012
152 |
153 |       def test_track_embedding_generation_cache_hit(self):
    |

tests/unit/services/observability/test_observability_ai_tracking.py:215:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
213 |           tracker = AIOperationTracker()
214 |
215 | /         with (
216 | |             pytest.raises(ConnectionError),
217 | |             tracker.track_llm_call(
218 | |                 provider="openai", model="gpt-4", operation="completion"
219 | |             ),
220 | |         ):
221 | |             msg = "API service unavailable"
222 | |             raise ConnectionError(msg)
    | |______________________________________^ PT012
223 |
224 |       def test_track_llm_call_multiple_choices(self):
    |

tests/unit/services/observability/test_observability_ai_tracking.py:275:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
273 |           tracker = AIOperationTracker()
274 |
275 | /         with (
276 | |             pytest.raises(ConnectionError),
277 | |             tracker.track_vector_search(
278 | |                 collection_name="documents", query_type="semantic"
279 | |             ),
280 | |         ):
281 | |             msg = "Qdrant connection failed"
282 | |             raise ConnectionError(msg)
    | |______________________________________^ PT012
283 |
284 |       def test_track_vector_search_empty_results(self):
    |

tests/unit/services/observability/test_observability_ai_tracking.py:337:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
335 |           tracker = AIOperationTracker()
336 |
337 | /         with (
338 | |             pytest.raises(ValueError),
339 | |             tracker.track_rag_pipeline(
340 | |                 query="Test query", retrieval_method="hybrid", generation_model="gpt-4"
341 | |             ),
342 | |         ):
343 | |             msg = "Generation model failed"
344 | |             raise ValueError(msg)
    | |_________________________________^ PT012
345 |
346 |       def test_track_rag_pipeline_with_timing_breakdown(self):
    |

tests/unit/services/observability/test_observability_correlation.py:180:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
178 |           manager = TraceCorrelationManager()
179 |
180 | /         with pytest.raises(ValueError):
181 | |             with manager.correlated_operation("failing_operation"):
182 | |                 msg = "Test error"
183 | |                 raise ValueError(msg)
    | |_____________________________________^ PT012
184 |
185 |       def test_nested_correlated_operations(self):
    |

tests/unit/services/observability/test_observability_correlation.py:180:9: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
178 |           manager = TraceCorrelationManager()
179 |
180 | /         with pytest.raises(ValueError):
181 | |             with manager.correlated_operation("failing_operation"):
    | |___________________________________________________________________^ SIM117
182 |                   msg = "Test error"
183 |                   raise ValueError(msg)
    |
    = help: Combine `with` statements

tests/unit/services/observability/test_observability_correlation.py:318:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
316 |           tracker = ErrorCorrelationTracker(manager)
317 |
318 | /         with (
319 | |             pytest.raises(ValueError),
320 | |             tracker.create_error_span("test_error", {}),
321 | |         ):
322 | |             msg = "Error in error span"
323 | |             raise ValueError(msg)
    | |_________________________________^ PT012
    |

tests/unit/services/observability/test_observability_error_tracking.py:258:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
257 |           # Test embedding generation error
258 | /         with (
259 | |             pytest.raises(ConnectionError),
260 | |             ai_tracker.track_embedding_generation(
261 | |                 provider="openai",
262 | |                 model="text-embedding-ada-002",
263 | |                 input_texts=["test text"],
264 | |             ),
265 | |         ):
266 | |             msg = "OpenAI API unavailable"
267 | |             raise ConnectionError(msg)
    | |______________________________________^ PT012
268 |
269 |           # Test vector search error
    |

tests/unit/services/observability/test_observability_error_tracking.py:270:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
269 |           # Test vector search error
270 | /         with (
271 | |             pytest.raises(TimeoutError),
272 | |             ai_tracker.track_vector_search(
273 | |                 collection_name="documents", query_type="semantic"
274 | |             ),
275 | |         ):
276 | |             msg = "Vector database timeout"
277 | |             raise TimeoutError(msg)
    | |___________________________________^ PT012
278 |
279 |           # Test LLM call error
    |

tests/unit/services/observability/test_observability_error_tracking.py:280:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
279 |           # Test LLM call error
280 | /         with (
281 | |             pytest.raises(ValueError),
282 | |             ai_tracker.track_llm_call(provider="openai", model="gpt-4"),
283 | |         ):
284 | |             msg = "Invalid API response"
285 | |             raise ValueError(msg)
    | |_________________________________^ PT012
286 |
287 |           assert request_id is not None
    |

tests/unit/services/observability/test_observability_instrumentation.py:285:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
283 |       def test_trace_operation_with_exception(self):
284 |           """Test trace_operation context manager with exceptions."""
285 | /         with pytest.raises(ValueError), trace_operation("failing_operation"):
286 | |             msg = "Test error"
287 | |             raise ValueError(msg)
    | |_________________________________^ PT012
288 |
289 |       def test_trace_async_operation(self):
    |

tests/unit/services/observability/test_observability_integration.py:235:17: PLC0415 `import` should be at the top-level of a file
    |
233 |               except ConnectionError as e:
234 |                   # Test error recording with correlation
235 | /                 from src.services.observability.correlation import (
236 | |                     record_error,
237 | |                 )
    | |_________________^ PLC0415
238 |
239 |                   error_id = record_error(
    |

tests/unit/services/observability/test_observability_integration.py:523:13: SIM117 Use a single `with` statement with multiple contexts instead of nested `with` statements
    |
521 |               )
522 |
523 | /             with correlation_manager.correlated_operation(f"request_{request_num}"):
524 | |                 with monitor_operation(
525 | |                     f"operation_{request_num}", track_resources=False
526 | |                 ):
    | |__________________^ SIM117
527 |                       # Simulate work
528 |                       time.sleep(0.001)
    |
    = help: Combine `with` statements

tests/unit/services/observability/test_observability_performance.py:188:9: PT012 `pytest.raises()` block should contain a single simple statement
    |
186 |           monitor = PerformanceMonitor()
187 |
188 | /         with (
189 | |             pytest.raises(ValueError),
190 | |             monitor.monitor_operation("failing_operation"),
191 | |         ):
192 | |             msg = "Test error"
193 | |             raise ValueError(msg)
    | |_________________________________^ PT012
194 |
195 |       def test_monitor_operation_without_resource_tracking(self):
    |

tests/unit/services/test_decorators.py:348:17: TRY004 Prefer `TypeError` exception for invalid type
    |
346 |             if not isinstance(value, int | float):
347 |                 msg = "Must be a number"
348 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY004
349 |             return float(value)
    |

tests/unit/services/test_decorators.py:382:17: TRY004 Prefer `TypeError` exception for invalid type
    |
380 |             if not isinstance(value, str):
381 |                 msg = "Must be string"
382 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY004
383 |             return value.strip()
    |

tests/unit/services/test_service_errors.py:740:17: TRY004 Prefer `TypeError` exception for invalid type
    |
738 |             if not isinstance(value, str):
739 |                 msg = "Must be string"
740 |                 raise ValueError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^ TRY004
741 |             return value.strip()
    |

Found 760 errors.
No fixes available (22 hidden fixes can be enabled with the `--unsafe-fixes` option).

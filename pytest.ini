[pytest]
minversion = 8.0
addopts =
    --strict-config
    --strict-markers
    --maxfail=1
    --durations=20
    --showlocals
    --cov=src
    --cov-report=term-missing:skip-covered
    --cov-report=xml
    --cov-report=html
    --cov-fail-under=80
    --randomly-seed=1337
    --randomly-dont-reset-seed
    --import-mode=importlib
python_files = test_*.py
python_functions = test_*
python_classes = Test* *Test *Tests
testpaths = tests
filterwarnings =
    error
    ignore:pkg_resources is deprecated as an API.:DeprecationWarning
    ignore:Support for class-based `config` is deprecated:DeprecationWarning
    ignore:unclosed event loop:ResourceWarning
    ignore:unclosed <socket\.socket:ResourceWarning
markers =
    unit: unit tests for isolated functionality
    integration: integration tests that touch multiple subsystems
    cli: CLI behaviour tests
    vector_db: vector database specific unit tests
    processing: document processing unit tests
    ai: AI and embedding related tests
    fast: fast running smoke tests
    slow: long running scenarios
    performance: performance-sensitive checks
    respx: tests relying on respx HTTP mocking
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
